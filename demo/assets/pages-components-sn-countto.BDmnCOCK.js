import{_ as e,a as t}from"./sn-topbar.CX0rMkKy.js";import{d as a,r as l,c as n,w as u,l as s,y as o,b as r,e as i,u as c,o as d,f as m,g as f,k as p}from"./index-DNTc1GxZ.js";import{$ as v,r as y}from"./uni-app.es.D9ZkitmT.js";import{b as V,a as x,_}from"./sn-button.BaZjRh9m.js";import{_ as S}from"./com-card.22LSjaaf.js";import{_ as b}from"./sn-page.CEVOSUw5.js";const g=a(Object.assign({name:"sn-countto"},{__name:"sn-countto",props:{startVal:{type:Number,default:0},endVal:{type:Number,default:0},aniTime:{type:Number,default:2e3},decimals:{type:Number,default:0},separate:{type:Number,default:0},autoplay:{type:Boolean,default:!0},easing:{type:Boolean,default:!1},textSize:{type:String,default:""},textColor:{type:String,default:""},customStyle:{type:Object,default:{}}},emits:["finish"],setup(e,t){var a=t.expose,m=t.emit;const f=v.utils,p=v.colors,x=m,_=e,S=l(""),b=l(0),g=l(0),z=l(!1),C=n((()=>Math.max(0,_.decimals))),j=n((()=>""==_.textSize?v.configs.font.baseSize:_.textSize)),T=n((()=>""==_.textColor?p.value.text:_.textColor)),h=n((()=>0!=_.separate?f.separateNumber(S.value,_.separate):S.value));function I(){z.value=!1,clearInterval(g.value),b.value=0,S.value=_.endVal.toFixed(C.value),x("finish")}function N(){z.value=!0;let e=_.endVal-_.startVal;g.value=setInterval((()=>{if(z.value){let t=_.easing?f.easeOutSine(10*b.value/_.aniTime):f.linear(10*b.value/_.aniTime);b.value+=1,S.value=(_.startVal+t*e+f.randomNumber(C.value)*Math.pow(10,-C.value)).toFixed(C.value),parseFloat(S.value)>=_.endVal&&I()}}),10)}function k(){b.value=0,S.value=_.startVal.toString(),_.autoplay&&(clearInterval(g.value),z.value=!0,S.value=_.startVal.toString(),N())}a({play:N,stop:I,pause:function(){z.value&&(z.value=!1,clearInterval(g.value))},reset:function(){clearInterval(g.value),k()}});const F=n((()=>_.startVal)),O=n((()=>_.endVal));return u(F,(()=>{k()})),u(O,(()=>{k()})),s((()=>{k()})),o((()=>{clearInterval(g.value)})),(t=null,a=null)=>{const l=y(r("sn-text"),V);return d(),i(l,{text:c(h),color:c(T),size:c(j),customStyle:e.customStyle},null,8,["text","color","size","customStyle"])}}})),z=a({__name:"sn-countto",setup(a){const n=v.colors,u=l(!0),s=l(null);function o(){u.value=!u.value,u.value?s.value.play():s.value.pause()}function V(){u.value=!1,s.value.stop()}function z(){u.value=!0,s.value.reset()}return(a=null,l=null)=>{const C=y(r("sn-topbar"),e),j=y(r("sn-countto"),g),T=y(r("com-card"),S),h=y(r("sn-icon"),x),I=y(r("sn-button"),_),N=y(r("sn-row"),t),k=p,F=y(r("sn-page"),b);return d(),i(F,null,{default:m((()=>[f(C,{title:"Countto 数字滚动"}),f(T,{title:"基础用法",note:"滚动的数字，常用在 PPT 的大屏上"},{default:m((()=>[f(j,{endVal:6666})])),_:1}),f(T,{title:"开始值 & 结束值",note:"支持自定义开始和结束的数值"},{default:m((()=>[f(j,{startVal:6666,endVal:7777})])),_:1}),f(T,{title:"小数精度",note:"支持自定义小数滚动位数"},{default:m((()=>[f(j,{startVal:6666,endVal:7777,decimals:2}),f(j,{startVal:6666,endVal:7777,decimals:8})])),_:1}),f(T,{title:"动画时长",note:"支持自定义动画时长"},{default:m((()=>[f(j,{aniTime:1e4,startVal:6666,endVal:7777})])),_:1}),f(T,{title:"缓动动画",note:"以 easeOutSine 缓动动画代替默认的 linear 动画，使得动画在结束前减速"},{default:m((()=>[f(j,{easing:"",aniTime:5e3,endVal:7777})])),_:1}),f(T,{title:"分割数字",note:"常用于金融场景"},{default:m((()=>[f(j,{separate:3,aniTime:1e4,endVal:1e6})])),_:1}),f(T,{title:"自定义样式",note:"多姿多样，丰富多彩"},{default:m((()=>[f(j,{endVal:7777,textColor:c(n).successDark,textSize:c(v).configs.font.size(3),customStyle:{fontFamily:"alipuhuiheavy"}},null,8,["textColor","textSize"])])),_:1}),f(T,{title:"自由控制",note:"提供 API 以自由控制数字滚动的状态。"},{default:m((()=>[f(k,{class:"align-items-center"},{default:m((()=>[f(j,{ref_key:"counttoEle",ref:s,aniTime:5e3,endVal:7777},null,512),f(N,{align:"center"},{default:m((()=>[f(I,{"round-size":"50px",round:"",onClick:z},{default:m((()=>[f(h,{name:"refresh-line"})])),_:1}),f(I,{class:"m-l-10",type:"primary",level:"second","round-size":"60px",round:"",onClick:o},{default:m((()=>[f(h,{name:"".concat(c(u)?"pause":"play","-fill"),color:c(n).primary},null,8,["name","color"])])),_:1}),f(I,{class:"m-l-10","round-size":"50px",round:"",onClick:V},{default:m((()=>[f(h,{name:"stop-circle-fill"})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}});export{z as default};
