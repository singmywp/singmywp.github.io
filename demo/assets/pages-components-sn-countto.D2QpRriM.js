import{_ as e,a as t}from"./sn-topbar.DEOjSarq.js";import{d as a,r as l,c as n,w as u,k as s,y as o,b as r,e as i,u as c,o as d,f,g as m,q as p}from"./index-C41ek1zM.js";import{$ as v,r as y}from"./uni-app.es.DMEFtuWf.js";import{b as V,a as x,_}from"./sn-button.CpSyIQkh.js";import{_ as b}from"./com-card.DTC2fNbY.js";import{_ as g}from"./sn-page.Djy77f-h.js";const S=a(Object.assign({name:"sn-countto"},{__name:"sn-countto",props:{startVal:{type:Number,default:0},endVal:{type:Number,default:0},aniTime:{type:Number,default:2e3},decimals:{type:Number,default:0},separate:{type:Number,default:0},autoplay:{type:Boolean,default:!0},easing:{type:Boolean,default:!1},textSize:{type:String,default:""},textColor:{type:String,default:""},customStyle:{type:Object,default:{}}},emits:["finish"],setup(e,t){var a=t.expose,f=t.emit;const m=v.utils,p=v.colors,x=f,_=e,b=l(""),g=l(0),S=l(0),z=l(!1),j=n((()=>Math.max(0,_.decimals))),C=n((()=>""==_.textSize?v.configs.font.baseSize:_.textSize)),T=n((()=>""==_.textColor?p.value.text:_.textColor)),h=n((()=>0!=_.separate?m.separateNumber(b.value,_.separate):b.value));function I(){z.value=!1,clearInterval(S.value),g.value=0,b.value=_.endVal.toFixed(j.value),x("finish")}function N(){z.value=!0;let e=_.endVal-_.startVal;S.value=setInterval((()=>{if(z.value){let t=_.easing?m.easeOutSine(10*g.value/_.aniTime):m.linear(10*g.value/_.aniTime);g.value+=1,b.value=(_.startVal+t*e+m.randomNumber(j.value)*Math.pow(10,-j.value)).toFixed(j.value),parseFloat(b.value)>=_.endVal&&I()}}),10)}function k(){g.value=0,b.value=_.startVal.toString(),_.autoplay&&(clearInterval(S.value),z.value=!0,b.value=_.startVal.toString(),N())}a({play:N,stop:I,pause:function(){z.value&&(z.value=!1,clearInterval(S.value))},reset:function(){clearInterval(S.value),k()}});const F=n((()=>_.startVal)),O=n((()=>_.endVal));return u(F,(()=>{k()})),u(O,(()=>{k()})),s((()=>{k()})),o((()=>{clearInterval(S.value)})),(t=null,a=null)=>{const l=y(r("sn-text"),V);return d(),i(l,{text:c(h),color:c(T),size:c(C),customStyle:e.customStyle},null,8,["text","color","size","customStyle"])}}})),z=a({__name:"sn-countto",setup(a){const n=v.colors,u=l(!0),s=l(null);function o(){u.value=!u.value,u.value?s.value.play():s.value.pause()}function V(){u.value=!1,s.value.stop()}function z(){u.value=!0,s.value.reset()}return(a=null,l=null)=>{const j=y(r("sn-topbar"),e),C=y(r("sn-countto"),S),T=y(r("com-card"),b),h=y(r("sn-icon"),x),I=y(r("sn-button"),_),N=y(r("sn-button-group"),t),k=p,F=y(r("sn-page"),g);return d(),i(F,null,{default:f((()=>[m(j,{title:"Countto 数字滚动"}),m(T,{title:"基础用法",note:"滚动的数字，常用在 PPT 的大屏上"},{default:f((()=>[m(C,{endVal:6666})])),_:1}),m(T,{title:"开始值 & 结束值",note:"支持自定义开始和结束的数值"},{default:f((()=>[m(C,{startVal:6666,endVal:7777})])),_:1}),m(T,{title:"小数精度",note:"支持自定义小数滚动位数"},{default:f((()=>[m(C,{startVal:6666,endVal:7777,decimals:2}),m(C,{startVal:6666,endVal:7777,decimals:8})])),_:1}),m(T,{title:"动画时长",note:"支持自定义动画时长"},{default:f((()=>[m(C,{aniTime:1e4,startVal:6666,endVal:7777})])),_:1}),m(T,{title:"缓动动画",note:"以 easeOutSine 缓动动画代替默认的 linear 动画，使得动画在结束前减速"},{default:f((()=>[m(C,{easing:"",aniTime:5e3,endVal:7777})])),_:1}),m(T,{title:"分割数字",note:"常用于金融场景"},{default:f((()=>[m(C,{separate:3,aniTime:1e4,endVal:1e6})])),_:1}),m(T,{title:"自定义样式",note:"多姿多样，丰富多彩"},{default:f((()=>[m(C,{endVal:7777,textColor:c(n).successDark,textSize:c(v).configs.font.size(3),customStyle:{fontFamily:"alipuhuiheavy"}},null,8,["textColor","textSize"])])),_:1}),m(T,{title:"自由控制",note:"提供 API 以自由控制数字滚动的状态。"},{default:f((()=>[m(k,{class:"align-items-center"},{default:f((()=>[m(C,{ref_key:"counttoEle",ref:s,aniTime:5e3,endVal:7777},null,512),m(N,{align:"center"},{default:f((()=>[m(I,{"round-size":"50px",round:"",onClick:z},{default:f((()=>[m(h,{name:"refresh-line"})])),_:1}),m(I,{class:"m-l-10",type:"primary",level:"second","round-size":"60px",round:"",onClick:o},{default:f((()=>[m(h,{name:"".concat(c(u)?"pause":"play","-fill"),color:c(n).primary},null,8,["name","color"])])),_:1}),m(I,{class:"m-l-10","round-size":"50px",round:"",onClick:V},{default:f((()=>[m(h,{name:"stop-circle-fill"})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}});export{z as default};
