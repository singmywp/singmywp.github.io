import{_ as e,a as t}from"./sn-topbar.DxKzInQK.js";import{d as a,$ as l,r as n,c as u,w as s,l as o,x as r,a as i,b as c,u as d,y as p,o as f,e as m,f as v,j as y}from"./index-DoInGK9X.js";import{r as V}from"./uni-app.es.K1mZmM8s.js";import{b as _,a as x,_ as b}from"./sn-button.B1LvAG78.js";import{_ as S}from"./com-card.D8_7_rS9.js";import{_ as g}from"./sn-page.Nlp4LDKz.js";const j=a(Object.assign({name:"sn-countto"},{__name:"sn-countto",props:{startVal:{type:Number,default:0},endVal:{type:Number,default:0},duration:{type:Number,default:2e3},decimals:{type:Number,default:0},separate:{type:Number,default:0},autoplay:{type:Boolean,default:!0},easing:{type:Boolean,default:!1},textSize:{type:String,default:""},textColor:{type:String,default:""},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["finish"],setup(e,t){var a=t.expose,m=t.emit;const v=l.utils,y=l.colors,x=m,b=e,S=n(""),g=n(0),j=n(0),z=n(!1),N=u((()=>Math.max(0,b.decimals))),h=u((()=>p("font",b.textSize,l.configs.font.baseSize))),C=u((()=>p("color",b.textColor,y.value.text))),I=u((()=>0!=b.separate?v.separateNumber(S.value,b.separate):S.value));function O(){z.value=!1,clearInterval(j.value),g.value=0,S.value=b.endVal.toFixed(N.value),x("finish")}function k(){z.value=!0;let e=b.endVal-b.startVal;j.value=setInterval((()=>{if(z.value){let t=b.easing?v.easeOutSine(10*g.value/b.duration):v.linear(10*g.value/b.duration);g.value+=1,S.value=(b.startVal+t*e+v.randomNumber(N.value)*Math.pow(10,-N.value)).toFixed(N.value),parseFloat(S.value)>=b.endVal&&O()}}),10)}function w(){g.value=0,S.value=b.startVal.toString(),b.autoplay&&(clearInterval(j.value),z.value=!0,S.value=b.startVal.toString(),k())}a({play:k,stop:O,pause:function(){z.value&&(z.value=!1,clearInterval(j.value))},reset:function(){clearInterval(j.value),w()}});const F=u((()=>b.startVal)),$=u((()=>b.endVal));return s(F,(()=>{w()})),s($,(()=>{w()})),o((()=>{w()})),r((()=>{clearInterval(j.value)})),(t=null,a=null)=>{const l=V(i("sn-text"),_);return f(),c(l,{text:d(I),color:d(C),size:d(h),customStyle:e.customStyle},null,8,["text","color","size","customStyle"])}}})),z=a({__name:"sn-countto",setup(a){l.colors;const u=n(!0),s=n(null);function o(){u.value=!u.value,u.value?s.value.play():s.value.pause()}function r(){u.value=!1,s.value.stop()}function p(){u.value=!0,s.value.reset()}return(a=null,l=null)=>{const n=V(i("sn-topbar"),e),_=V(i("sn-countto"),j),z=V(i("com-card"),S),N=V(i("sn-icon"),x),h=V(i("sn-button"),b),C=V(i("sn-row"),t),I=y,O=V(i("sn-page"),g);return f(),c(O,null,{default:m((()=>[v(n,{title:"Countto 数字滚动"}),v(z,{title:"基础用法",note:"滚动的数字，常用在 PPT 的大屏上"},{default:m((()=>[v(_,{endVal:6666})])),_:1}),v(z,{title:"开始值 & 结束值",note:"支持自定义开始和结束的数值"},{default:m((()=>[v(_,{startVal:6666,endVal:7777})])),_:1}),v(z,{title:"小数精度",note:"支持自定义小数滚动位数"},{default:m((()=>[v(_,{startVal:6666,endVal:7777,decimals:2}),v(_,{startVal:6666,endVal:7777,decimals:8})])),_:1}),v(z,{title:"动画时长",note:"支持自定义动画时长"},{default:m((()=>[v(_,{duration:1e4,startVal:6666,endVal:7777})])),_:1}),v(z,{title:"缓动动画",note:"以 easeOutSine 缓动动画代替默认的 linear 动画，使得动画在结束前减速"},{default:m((()=>[v(_,{easing:"",duration:5e3,endVal:7777})])),_:1}),v(z,{title:"分割数字",note:"常用于金融场景"},{default:m((()=>[v(_,{separate:3,duration:1e4,endVal:1e6})])),_:1}),v(z,{title:"自定义样式",note:"多姿多样，丰富多彩"},{default:m((()=>[v(_,{textSize:"$3",textColor:"$successDark",endVal:7777,customStyle:{fontFamily:"alipuhuiheavy"}})])),_:1}),v(z,{title:"自由控制",note:"提供 API 以自由控制数字滚动的状态。"},{default:m((()=>[v(I,{class:"align-items-center"},{default:m((()=>[v(_,{ref_key:"counttoEle",ref:s,duration:5e3,endVal:7777},null,512),v(C,{align:"center"},{default:m((()=>[v(h,{"round-size":"50px",round:"",onClick:p},{default:m((()=>[v(N,{name:"refresh-line"})])),_:1}),v(h,{class:"m-l-10",type:"primary",level:"second","round-size":"60px",round:"",onClick:o},{default:m((()=>[v(N,{color:"$primary",name:"".concat(d(u)?"pause":"play","-fill")},null,8,["name"])])),_:1}),v(h,{class:"m-l-10","round-size":"50px",round:"",onClick:r},{default:m((()=>[v(N,{name:"stop-circle-fill"})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}});export{z as default};
