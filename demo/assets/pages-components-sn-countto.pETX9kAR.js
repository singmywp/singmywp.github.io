import{_ as e,a as t}from"./sn-topbar.wm0GzhH3.js";import{d as a,$ as l,r as n,c as u,w as s,o,v as r,a as i,e as d,u as c,x as p,b as m,f,g as v,_ as y}from"./index-DYMgrqHp.js";import{r as _}from"./uni-app.es.DgDfNdgy.js";import{a as V,_ as x}from"./sn-text.euomPoe8.js";import{_ as S}from"./com-card.BtLNzB63.js";import{_ as b}from"./sn-button.BjZePiC5.js";import{_ as g}from"./sn-page.Cf6LEMVT.js";import"./sn-menu-item.DkjoXkWj.js";import"./sn-overlay.CiZFgEyq.js";import"./sn-loading.t5otRKvs.js";const j=a(Object.assign({name:"sn-countto"},{__name:"sn-countto",props:{startVal:{type:Number,default:0},endVal:{type:Number,default:0},duration:{type:Number,default:2e3},decimals:{type:Number,default:0},separate:{type:Number,default:0},autoplay:{type:Boolean,default:!0},easing:{type:Boolean,default:!1},textSize:{type:String,default:""},textColor:{type:String,default:""},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["finish"],setup(e,t){var a=t.expose,f=t.emit;const v=l.utils,y=l.colors,x=f,S=e,b=n(""),g=n(0),j=n(0),z=n(!1),N=u((()=>Math.max(0,S.decimals))),h=u((()=>p("font",S.textSize,l.configs.font.baseSize))),C=u((()=>p("color",S.textColor,y.value.text))),I=u((()=>0!=S.separate?v.separateNumber(b.value,S.separate):b.value));function O(){z.value=!1,clearInterval(j.value),g.value=0,b.value=S.endVal.toFixed(N.value),x("finish")}function k(){z.value=!0;let e=S.endVal-S.startVal;j.value=setInterval((()=>{if(z.value){let t=S.easing?v.easeOutSine(10*g.value/S.duration):v.linear(10*g.value/S.duration);g.value+=1,b.value=(S.startVal+t*e+v.randomNumber(N.value)*Math.pow(10,-N.value)).toFixed(N.value),parseFloat(b.value)>=S.endVal&&O()}}),10)}function w(){g.value=0,b.value=S.startVal.toString(),S.autoplay&&(clearInterval(j.value),z.value=!0,b.value=S.startVal.toString(),k())}a({play:k,stop:O,pause:function(){z.value&&(z.value=!1,clearInterval(j.value))},reset:function(){clearInterval(j.value),w()}});const F=u((()=>S.startVal)),$=u((()=>S.endVal));return s(F,(()=>{w()})),s($,(()=>{w()})),o((()=>{w()})),r((()=>{clearInterval(j.value)})),(t=null,a=null)=>{const l=_(i("sn-text"),V);return m(),d(l,{text:c(I),color:c(C),size:c(h),customStyle:e.customStyle},null,8,["text","color","size","customStyle"])}}})),z=a({__name:"sn-countto",setup(a){l.colors;const u=n(!0),s=n(null);function o(){u.value=!u.value,u.value?s.value.play():s.value.pause()}function r(){u.value=!1,s.value.stop()}function p(){u.value=!0,s.value.reset()}return(a=null,l=null)=>{const n=_(i("sn-topbar"),e),V=_(i("sn-countto"),j),z=_(i("com-card"),S),N=_(i("sn-icon"),x),h=_(i("sn-button"),b),C=_(i("sn-row"),t),I=y,O=_(i("sn-page"),g);return m(),d(O,null,{default:f((()=>[v(n,{title:"Countto 数字滚动"}),v(z,{title:"基础用法",note:"滚动的数字，常用在 PPT 的大屏上"},{default:f((()=>[v(V,{endVal:6666})])),_:1}),v(z,{title:"开始值 & 结束值",note:"支持自定义开始和结束的数值"},{default:f((()=>[v(V,{startVal:6666,endVal:7777})])),_:1}),v(z,{title:"小数精度",note:"支持自定义小数滚动位数"},{default:f((()=>[v(V,{startVal:6666,endVal:7777,decimals:2}),v(V,{startVal:6666,endVal:7777,decimals:8})])),_:1}),v(z,{title:"动画时长",note:"支持自定义动画时长"},{default:f((()=>[v(V,{duration:1e4,startVal:6666,endVal:7777})])),_:1}),v(z,{title:"缓动动画",note:"以 easeOutSine 缓动动画代替默认的 linear 动画，使得动画在结束前减速"},{default:f((()=>[v(V,{easing:"",duration:5e3,endVal:7777})])),_:1}),v(z,{title:"分割数字",note:"常用于金融场景"},{default:f((()=>[v(V,{separate:3,duration:1e4,endVal:1e6})])),_:1}),v(z,{title:"自定义样式",note:"多姿多样，丰富多彩"},{default:f((()=>[v(V,{textSize:"$3",textColor:"$successDark",endVal:7777,customStyle:{fontFamily:"alipuhuiheavy"}})])),_:1}),v(z,{title:"自由控制",note:"提供 API 以自由控制数字滚动的状态。"},{default:f((()=>[v(I,{class:"align-items-center"},{default:f((()=>[v(V,{ref_key:"counttoEle",ref:s,duration:5e3,endVal:7777},null,512),v(C,{align:"center"},{default:f((()=>[v(h,{"round-size":"50px",round:"",onClick:p},{default:f((()=>[v(N,{name:"refresh-line"})])),_:1}),v(h,{class:"m-l-10",type:"primary",level:"second","round-size":"60px",round:"",onClick:o},{default:f((()=>[v(N,{color:"$primary",name:"".concat(c(u)?"pause":"play","-fill")},null,8,["name"])])),_:1}),v(h,{class:"m-l-10","round-size":"50px",round:"",onClick:r},{default:f((()=>[v(N,{name:"stop-circle-fill"})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}});export{z as default};
