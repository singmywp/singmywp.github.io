import{_ as t}from"./sn-topbar.DGNmRcUY.js";import{d as e,r as a,c as s,k as i,b as l,e as o,f as r,m as n,u as c,p as d,o as u,I as p,J as g,g as m,v as h,l as f,K as w,L as b}from"./index-D82xabMX.js";import{$ as y,r as v}from"./uni-app.es.Cv0ss-rw.js";import{_ as x}from"./sn-view.uvue_vue_type_script_setup_true_lang.NnYLQipQ.js";import{a as _,c as j}from"./sn-button.CJ0ZsVkl.js";import{u as S}from"./useResize.C5gdmbvL.js";import{_ as k}from"./com-card.2Ru7Wd6o.js";import{_ as P}from"./sn-row.DBw4p-E_.js";import{_ as B}from"./sn-gap.BFzalOT1.js";import{_ as E}from"./sn-page.CIc3m52K.js";const F=j(e(Object.assign({name:"sn-image"},{__name:"sn-image",props:{width:{type:String,default:""},height:{type:String,default:""},src:{type:String,default:""},mode:{type:String,default:"aspectFit"},borderRadius:{type:String,default:""},loadingBgColor:{type:String,default:""},loadingSize:{type:String,default:"80px"},lazyLoad:{type:Boolean,default:!1},fadeShow:{type:Boolean,default:!0},enablePreview:{type:Boolean,default:!1},customStyle:{type:Object,default:{}},customImageStyle:{type:Object,default:{}},customLoadingStyle:{type:Object,default:{}}},emits:["error","load","click","dbclick","load","error","longpress"],setup(t,e){var j=e.emit;const k=y.utils,P=y.colors,B=j,E=t,F=a(!1),z=a(!1),J=a("auto"),L=a("auto"),C=a({width:0,height:0}),G=a(null),I=s((()=>"auto"!=E.width&&""!=E.width));s((()=>"auto"!=E.height&&""!=E.height));const T=s((()=>"aspectFit"==E.mode&&""==E.height)),R=s((()=>""==E.loadingBgColor?P.value.info:E.loadingBgColor)),O=s((()=>""==E.borderRadius?y.configs.radius.small:E.borderRadius)),M=s((()=>""==E.loadingBgColor?P.value.infoDark:E.loadingBgColor)),D=s((()=>{let t=new Map;return T.value?I.value?(t.set("width",J.value),t.set("height",L.value)):t.set("flex","1"):(t.set("width",J.value),t.set("height",L.value)),t.set("border-radius",O.value),t.set("transition-duration",y.configs.aniTime.normal),t})),K=s((()=>{let t=new Map;return t.set("width",J.value),t.set("height",L.value),t.set("border-radius",O.value),t.set("transition-duration",y.configs.aniTime.normal),t})),$=s((()=>{let t=new Map;return t.set("background",R.value),t.set("width",E.loadingSize),t.set("height",E.loadingSize),t.set("border-radius",O.value),t.set("transition-duration",y.configs.aniTime.normal),t}));function q(t){B("error",t),F.value=!0}function A(){let t=C.value;0!=t.width&&f((()=>{var e;let a=null===(e=G.value)||void 0===e?void 0:e.getBoundingClientRect();null!=a&&null!=a.width&&(J.value="".concat(a.width,"px"),L.value="".concat(a.width*(t.height/t.width),"px"))}))}function H(t){z.value=!0,B("load",t),T.value&&f((()=>{C.value=t.detail,A(),setTimeout((()=>{A()}),3e3),S(G.value,(()=>{A()}))}))}function N(t){k.debounce((()=>{E.enablePreview&&!F.value&&w({urls:[E.src]}),B("click",t.event)}),300)}function Q(t){k.debounce((()=>{B("dbclick",t.event)}),300)}return i((()=>{T.value?I.value&&(J.value=E.width):(J.value=E.width,L.value=E.height)})),(e=null,a=null)=>{const s=b,i=v(l("sn-view"),x),f=v(l("sn-icon"),_),w=d;return u(),o(w,{class:"sn-image-contain",ref_key:"containEle",ref:G,style:n([c(D),t.customStyle])},{default:r((()=>[p(m(i,{class:"sn-image",onClick:N,onDbclick:Q,style:n([c(D),t.customStyle])},{default:r((()=>[m(s,{class:"sn-image-image",src:t.src,mode:t.mode,lazyLoad:t.lazyLoad,fadeShow:t.fadeShow,onError:q,onLoad:H,style:n([c(K),t.customImageStyle])},null,8,["src","mode","lazyLoad","fadeShow","style"])])),_:1},8,["style"]),[[g,c(z)]]),c(z)?h("",!0):(u(),o(w,{key:0,class:"sn-image-unloaded",style:n([c($),t.customLoadingStyle])},{default:r((()=>[m(f,{name:"image-line",color:c(M)},null,8,["color"])])),_:1},8,["style"]))])),_:1},8,["style"])}}})),[["__scopeId","data-v-85bda7bc"]]),z=j(e({__name:"sn-image",setup(e){const s=a(!0);return i((()=>{f((()=>{setTimeout((()=>{s.value=!1}),500)}))})),(e=null,a=null)=>{const i=v(l("sn-topbar"),t),n=v(l("sn-image"),F),d=v(l("com-card"),k),p=v(l("sn-row"),P),g=v(l("sn-gap"),B),h=v(l("sn-view"),x),f=v(l("sn-page"),E);return u(),o(f,null,{default:r((()=>[m(i,{title:"Image 图片"}),m(h,{loading:c(s)},{default:r((()=>[m(d,{title:"基础用法",note:"相比于内置 image 组件更加方便使用。\\n支持图片加载占位、图片预览、懒加载（同 image 组件）、动画效果（同 image 组件）\\n默认为 aspectFit 模式"},{default:r((()=>[m(n,{src:"https://img1.baidu.com/it/u=2572795898,2432467619&fm=253&fmt=auto&app=138&f=JPEG?w=640&h=427",width:"200px"})])),_:1}),m(d,{title:"模式",note:"支持设置图片裁剪、缩放模式，其值同内置 image 组件"},{default:r((()=>[m(p,{wrap:""},{default:r((()=>[m(n,{class:"spacing",mode:"scaleToFill",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"aspectFit",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"aspectFill",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"widthFix",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"heightFix",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"top",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"bottom",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"center",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"left",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"right",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"top left",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"top right",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"bottom left",src:"/static/strawberry.jpg",width:"80px",height:"80px"}),m(n,{class:"spacing",mode:"bottom right",src:"/static/strawberry.jpg",width:"80px",height:"80px"})])),_:1})])),_:1}),m(d,{title:"自动计算长宽",note:"aspectFit 模式支持根据父容器自动设置图片长宽、给定宽度自动计算长度，设置 height 属性后此功能失效"},{default:r((()=>[m(p,null,{default:r((()=>[m(n,{class:"spacing",src:"https://img0.baidu.com/it/u=854650116,3372822797&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=667"}),m(n,{class:"spacing",src:"https://img2.baidu.com/it/u=448582925,1585814755&fm=253&fmt=auto&app=138&f=JPEG?w=333&h=500"}),m(n,{class:"spacing",src:"https://img1.baidu.com/it/u=1431796479,1028246143&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=743"})])),_:1})])),_:1}),m(d,null,{default:r((()=>[m(p,null,{default:r((()=>[m(n,{class:"spacing",src:"https://img2.baidu.com/it/u=3307857314,3539337404&fm=253&fmt=auto&app=120&f=JPEG?w=1280&h=800",width:"150px"}),m(n,{class:"spacing",src:"https://img1.baidu.com/it/u=3587186811,3730884801&fm=253&fmt=auto&app=138&f=JPEG?w=424&h=600",width:"70px"})])),_:1})])),_:1}),m(d,{title:"图片预览",note:"调用内置的 uni.previewImage 进行图片预览"},{default:r((()=>[m(n,{enablePreview:"",src:"https://img1.baidu.com/it/u=253682624,1679759773&fm=253&fmt=auto&app=138&f=JPEG?w=900&h=500"})])),_:1}),m(g)])),_:1},8,["loading"])])),_:1})}}}),[["__scopeId","data-v-ff80195f"]]);export{z as default};
