import{d as e,ax as o,ay as r,r as t,c as l,a as s,e as a,f as n,_ as i,b as u,g as d,z as c,B as p,u as f,p as h,I as m,J as g,$ as _,az as v,h as y,j as S,F as b,k as T}from"./index-DYMgrqHp.js";import{_ as x,a as w}from"./sn-topbar.wm0GzhH3.js";import{r as C,d as k}from"./uni-app.es.DgDfNdgy.js";import{_ as j}from"./sn-alert.B2UqFsTR.js";import{_ as U}from"./com-card.BtLNzB63.js";import{b as B,a as N}from"./sn-text.euomPoe8.js";import{_ as $}from"./sn-tag.Bvg8GfrB.js";import{_ as z}from"./sn-loadmore.DSbj1VD1.js";import{_ as M}from"./sn-backtop.DGnJhJe7.js";import{_ as R}from"./sn-toast.CbZM1jPi.js";import{_ as E}from"./sn-page.Cf6LEMVT.js";import"./sn-button.BjZePiC5.js";import"./sn-loading.t5otRKvs.js";import"./sn-menu-item.DkjoXkWj.js";import"./sn-overlay.CiZFgEyq.js";import"./sn-line.BnKikEoE.js";const D=B(e(Object.assign({name:"sn-longlist"},{__name:"sn-longlist",props:{associativeContainer:{type:String,default:""},bounces:{type:Boolean,default:!1},upperThreshold:{type:Number,default:50},lowerThreshold:{type:Number,default:50},scrollTop:{type:Number,default:0},showScrollbar:{type:Boolean,default:!1},scrollIntoView:{type:String,default:""},scrollWithAnimation:{type:Boolean,default:!0},refresherEnabled:{type:Boolean,default:!1},refresherThreshold:{type:Number,default:45},refresherMaxDragDistance:{type:Number,default:100},refresherBackground:{type:String,default:"transparent"},refresherTriggered:{type:Boolean,default:!1},backtop:{type:Boolean,default:!0},loadmore:{type:Boolean,default:!0},refresherDefaultStyle:{type:String,default:"white"},loadmoreStatus:{type:String,default:"loadmore"},loadmoreConfig:{type:Object,default:new o({})},refresherConfig:{type:Object,default:new r({})},customNestedScroll:{type:Boolean,default:!1},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["refresherpulling","refresherrefresh","refresherrestore","refresherabort","scrolltoupper","scrolltolower","scroll","scrollend","click","loadmore"],setup(e,o){var r=o.expose;const _=o.emit,v=e,y=t([e=>{}]),S=t(null),b=t("refresh"),T=l((()=>v.refresherDefaultStyle));function x(e){y.value.forEach((o=>{o(e)}))}function w(){_("loadmore")}function k(e){b.value="refresh",_("refresherpulling",e)}function j(e){b.value="refreshing",_("refresherrefresh",e)}function U(e){b.value="refresh",_("refresherrestore",e)}function B(e){b.value="refresh",_("refresherabort",e)}function N(e){_("scrolltoupper",e)}function $(e){_("scrolltolower",e)}function R(e){_("scroll",e),x(e.detail.scrollTop)}function E(e){_("scrollend",e)}return r({scrollTo:function(e,o){x(o),null!=S.value&&(S.value.scrollTop=e,S.value.scrollLeft=o)},registerBacktop:function(e){y.value.push(e)}}),(o=null,r=null)=>{const t=C(s("sn-loadmore"),z),l=m,v=g,y=C(s("sn-backtop"),M),b=i;return u(),a(b,null,{default:n((()=>[d(v,{class:"sn-longlist",ref_key:"listEle",ref:S,"refresher-default-style":f(T),"associative-container":e.associativeContainer,bounces:e.bounces,"upper-threshold":e.upperThreshold,"lower-threshold":e.lowerThreshold,"scroll-top":e.scrollTop,"show-scrollbar":e.showScrollbar,"scroll-into-view":e.scrollIntoView,"scroll-with-animation":e.scrollWithAnimation,"refresher-enabled":e.refresherEnabled,"refresher-threshold":e.refresherThreshold,"refresher-max-drag-distance":e.refresherMaxDragDistance,"refresher-background":e.refresherBackground,"refresher-triggered":e.refresherTriggered,"custom-nested-scroll":e.customNestedScroll,onRefresherpulling:k,onRefresherrefresh:j,onRefresherrestore:U,onRefresherabort:B,onScrolltolower:$,onScrolltoupper:N,onScroll:R,onScrollend:E,onClick:r[0]||(r[0]=(e=null)=>_("click")),style:h([e.customStyle])},{default:n((()=>[c(o.$slots,"default",{},void 0,!0),e.loadmore?(u(),a(l,{key:0,type:"99998"},{default:n((()=>{var o,r,l,s,a,n,i,u,c,p,f;return[d(t,{status:e.loadmoreStatus,dashed:null!==(o=e.loadmoreConfig.dashed)&&void 0!==o&&o,disabled:null!==(r=e.loadmoreConfig.disabled)&&void 0!==r&&r,textSize:null!==(l=e.loadmoreConfig.textSize)&&void 0!==l?l:"",textColor:null!==(s=e.loadmoreConfig.textColor)&&void 0!==s?s:"",iconSize:null!==(a=e.loadmoreConfig.iconSize)&&void 0!==a?a:"",iconColor:null!==(n=e.loadmoreConfig.iconColor)&&void 0!==n?n:"",lineHeight:null!==(i=e.loadmoreConfig.lineHeight)&&void 0!==i?i:"0.5px",lineColor:null!==(u=e.loadmoreConfig.lineColor)&&void 0!==u?u:"",loadingText:null!==(c=e.loadmoreConfig.loadingText)&&void 0!==c?c:"",nomoreText:null!==(p=e.loadmoreConfig.nomoreText)&&void 0!==p?p:"",loadmoreText:null!==(f=e.loadmoreConfig.loadmoreText)&&void 0!==f?f:"",onLoadmore:w},null,8,["status","dashed","disabled","textSize","textColor","iconSize","iconColor","lineHeight","lineColor","loadingText","nomoreText","loadmoreText"])]})),_:1})):p("",!0)])),_:3},8,["refresher-default-style","associative-container","bounces","upper-threshold","lower-threshold","scroll-top","show-scrollbar","scroll-into-view","scroll-with-animation","refresher-enabled","refresher-threshold","refresher-max-drag-distance","refresher-background","refresher-triggered","custom-nested-scroll","style"]),e.backtop?(u(),a(y,{key:0})):p("",!0)])),_:3})}}})),[["__scopeId","data-v-d76c66cd"]]);class L extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{title:{type:String,optional:!1},index:{type:Number,optional:!1},hotValue:{type:String,optional:!1},link:{type:String,optional:!1}}}}}constructor(e,o=L.get$UTSMetadata$(),r=!1){super(),this.__props__=UTS.UTSType.initProps(e,o,r),this.title=this.__props__.title,this.index=this.__props__.index,this.hotValue=this.__props__.hotValue,this.link=this.__props__.link,delete this.__props__}}class O extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{code:{type:Number,optional:!1},result:{type:UTS.UTSType.withGenerics(Array,[L]),optional:!1},msg:{type:String,optional:!1}}}}}constructor(e,o=O.get$UTSMetadata$(),r=!1){super(),this.__props__=UTS.UTSType.initProps(e,o,r),this.code=this.__props__.code,this.result=this.__props__.result,this.msg=this.__props__.msg,delete this.__props__}}const V=e({__name:"sn-longlist",setup(e){const o=_.colors,r=t(!1),i=t([]),c=t([]),p=t("loading"),g=t(0),B=t(null);k((()=>{B.value.show(),v({url:"https://api.oioweb.cn/api/common/fetchHotSearchBoard?type=toutiao",method:"GET",success:e=>{var o,r;let t=null!==(r=null===(o=e.data)||void 0===o?void 0:o.result)&&void 0!==r?r:[];B.value.close(),i.value=t,c.value=c.value.concat(i.value),p.value="loadmore",g.value+=1}},O)}));const z=l((()=>{const e=new Map;return e.set("padding","15px 10px"),e.set("margin-bottom","10px"),e.set("border-radius",_.configs.radius.normal),e.set("background",o.value.front),e.set("overflow","visible"),e.set("transition-duration",_.configs.aniTime.normal),e}));function M(){if("nomore"==p.value)return null;g.value+=1,p.value="loading",B.value.show(),setTimeout((()=>{B.value.close(),c.value=c.value.concat(i.value),setTimeout((()=>{g.value>=3?p.value="nomore":p.value="loadmore"}),1e3)}),500)}function L(){r.value=!0,setTimeout((()=>{r.value=!1}),2e3)}return(e=null,o=null)=>{const t=C(s("sn-topbar"),x),l=C(s("sn-alert"),j),i=C(s("com-card"),U),g=C(s("sn-text"),N),_=C(s("sn-tag"),$),v=C(s("sn-row"),w),k=m,O=C(s("sn-longlist"),D),V=C(s("sn-toast"),R),I=C(s("sn-page"),E);return u(),a(I,null,{default:n((()=>[d(t,{title:"Longlist 长列表"}),d(l,{type:"primary",text:"一次性初始化太多列表项，因为创建大量 vnode 耗时，会导致列表初始化变慢。此时推荐使用官方的扩展组件 uni-recycle-view 来解决初始化慢的问题，该组件内部会分批创建节点，自动实现节点复用。"}),d(i,{note:"Longlist 组件用于显示大量同类信息。Longlist 本身只是容器，不预设任何样式。在 Android 端基于 recycle-view，性能优秀（设置固定的高度才支持高性能滚动）。\\nsn-longlist 的子组件为 list-item。"}),d(O,{loadmoreStatus:f(p),refresherTriggered:f(r),refresherEnabled:"",onRefresherrefresh:L,onScrolltolower:M,style:{flex:"1"}},{default:n((()=>[(u(!0),y(b,null,S(f(c),((e,o)=>(u(),a(k,{onClick:(o=null)=>{var r;T({url:"/pages/other/webview?title=".concat((r=e).title,"&url=").concat(encodeURIComponent(r.link))})},style:h(f(z))},{default:n((()=>[d(v,{justify:"space-between"},{default:n((()=>[d(g,{text:e.title},null,8,["text"]),d(_,{type:"error",text:e.hotValue,customStyle:{padding:"2px 7px",borderRadius:"1000px"}},null,8,["text"])])),_:2},1024)])),_:2},1032,["onClick","style"])))),256))])),_:1},8,["loadmoreStatus","refresherTriggered"]),d(V,{ref_key:"toastEle",ref:B,text:"加载中",loading:""},null,512)])),_:1})}}});export{V as default};
