import{_ as e}from"./sn-topbar.D5ol6wWa.js";import{d as t,$ as l,r as a,c as s,l as n,m as o,a as i,b as u,e as r,z as d,j as f,o as m,f as c,t as p,T as x,U as g,u as v,q as _,p as b,v as y}from"./index-BDGnenFq.js";import{r as T}from"./uni-app.es.BfR9KIrQ.js";import{b as S,a as z,c as j}from"./sn-button.DCeBN0oM.js";import{u as h}from"./useResize.C1IVTLMN.js";import{_ as w}from"./com-card.CltZjJtY.js";import{_ as $}from"./sn-gap.DaFvbZ58.js";import{_ as C}from"./sn-page.BIWIogO0.js";import{b as k,d as H,e as O,f as U,c as M}from"./longtext.BGk0ymny.js";const R=j(t(Object.assign({name:"sn-more"},{__name:"sn-more",props:{minHeight:{type:String,default:"100px"},unfoldText:{type:String,default:"展开查看更多"},foldText:{type:String,default:"收起"},icon:{type:String,default:""},textSize:{type:String,default:""},textColor:{type:String,default:""},bgColor:{type:String,default:""},disabled:{type:Boolean,default:!1},aniTime:{type:String,default:l.configs.aniTime.normal},customStyle:{type:Object,default:new UTSJSONObject(new UTSJSONObject({}))}},emits:["fold","unfold"],setup(e,t){var j=t.emit;const w=l.utils,$=l.libs.color,C=l.colors,k=j,H=e,O=a(null),U=a(!0),M=a(0),R=a(!1),A=s((()=>!w.isEmpty(H.icon))),B=s((()=>d("color",H.bgColor,C.value.front))),E=s((()=>d("aniTime",H.aniTime,l.configs.aniTime.normal))),J=s((()=>d("color",H.textColor,C.value.textLight))),N=s((()=>d("font",H.textSize,l.configs.font.size(2)))),P=s((()=>$.tinyColor(B.value).setAlpha(.5).toRgbString())),q=s((()=>{let e=new Map,t=w.addPx(M.value);return e.set("height",U.value&&R.value?H.minHeight:t),e.set("background",B.value),e.set("transition-duration",E.value),e})),D=s((()=>{let e=new Map;return R.value&&e.set("background-image","linear-gradient(to top, ".concat(B.value,", ").concat(P.value,")")),e}));function F(){var e,t,l;M.value=null!==(l=null===(t=null===(e=O.value)||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.height)&&void 0!==l?l:0,M.value>w.getPx(H.minHeight)&&(R.value=!0)}function I(){if(H.disabled)return null;U.value?(U.value=!1,k("unfold")):(U.value=!0,k("fold"))}return n((()=>{o((()=>{F()})),h(O.value,(()=>{F()}))})),(t=null,l=null)=>{const a=f,s=T(i("sn-text"),S),n=T(i("sn-icon"),z);return m(),u(a,{class:"sn-more-contain"},{default:r((()=>[c(a,{class:"sn-more",style:_([v(q),e.customStyle])},{default:r((()=>[c(a,{class:"sn-more-wrap",ref_key:"wrapEle",ref:O},{default:r((()=>[p(t.$slots,"default",{},void 0,!0)])),_:3},512),x(c(a,{class:"sn-more-mask",style:_([v(D)])},null,8,["style"]),[[g,v(U)&&v(R)]])])),_:3},8,["style"]),v(R)?(m(),u(a,{key:0,class:b(["sn-more-text-area",e.disabled?"disabled":""]),onClick:I},{default:r((()=>[c(s,{text:v(U)?e.unfoldText:e.foldText,color:e.disabled?v(C).disabledText:v(J),size:v(N)},null,8,["text","color","size"]),c(n,{name:v(A)?e.icon:"arrow-".concat(v(U)?"down":"up","-s-line"),color:e.disabled?v(C).disabledText:v(J),size:v(N),style:{"margin-left":"5px"}},null,8,["name","color","size"])])),_:1},8,["class"])):y("",!0)])),_:3})}}})),[["__scopeId","data-v-815da108"]]),A=t({__name:"sn-more",setup:t=>(l.colors,(t=null,l=null)=>{const a=T(i("sn-topbar"),e),s=T(i("sn-text"),S),n=T(i("sn-more"),R),o=T(i("com-card"),w),d=T(i("sn-gap"),$),f=T(i("sn-page"),C);return m(),u(f,null,{default:r((()=>[c(a,{title:"More 查看更多"}),c(o,{title:"基础用法",note:"内容太长可以先收起一部分"},{default:r((()=>[c(n,null,{default:r((()=>[c(s,{size:"$3",text:"　　"+v(k)},null,8,["text"])])),_:1})])),_:1}),c(o,{title:"自定义文字"},{default:r((()=>[c(n,{unfoldText:"开",foldText:"关"},{default:r((()=>[c(s,{text:v(H),size:"$3"},null,8,["text"])])),_:1})])),_:1}),c(o,{title:"自定义展示高度",note:"低于展示高度则全部显示，高于则隐藏"}),c(o,null,{default:r((()=>[c(n,{minHeight:"250px"},{default:r((()=>[c(s,{text:"这是一小段文本，不会被折叠",size:"$3"})])),_:1})])),_:1}),c(o,null,{default:r((()=>[c(n,{minHeight:"250px"},{default:r((()=>[c(s,{size:"$3",text:"　　"+v(O)},null,8,["text"])])),_:1})])),_:1}),c(o,{title:"动画时长",note:"如果你在意性能的话，可以关闭动画"},{default:r((()=>[c(n,{aniTime:"0ms"},{default:r((()=>[c(s,{size:"$3",text:v(U)},null,8,["text"])])),_:1})])),_:1}),c(o,{title:"禁用"},{default:r((()=>[c(n,{unfoldText:"开通大会员畅享百万好文",icon:"vip-crown-line",disabled:""},{default:r((()=>[c(s,{size:"$3",text:v(M)},null,8,["text"])])),_:1})])),_:1}),c(d)])),_:1})})});export{A as default};
