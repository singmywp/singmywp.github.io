import{_ as e}from"./sn-topbar.CX0rMkKy.js";import{d as t,r as l,c as s,l as a,m as n,b as o,e as i,f as u,k as r,o as d,g as f,t as c,N as m,O as p,u as g,q as x,p as v,v as b}from"./index-DNTc1GxZ.js";import{$ as _,r as z}from"./uni-app.es.D9ZkitmT.js";import{b as y,a as S,c as T}from"./sn-button.BaZjRh9m.js";import{u as j}from"./useResize.BiiI_cO4.js";import{_ as h}from"./com-card.22LSjaaf.js";import{_ as C}from"./sn-gap.B2D2kaQK.js";import{_ as w}from"./sn-page.CEVOSUw5.js";import{b as k,d as O,e as H,f as M,c as N}from"./longtext.BGk0ymny.js";const R=T(t(Object.assign({name:"sn-more"},{__name:"sn-more",props:{minHeight:{type:String,default:"100px"},unfoldText:{type:String,default:"展开查看更多"},foldText:{type:String,default:"收起"},icon:{type:String,default:""},textSize:{type:String,default:""},textColor:{type:String,default:""},bgColor:{type:String,default:""},disabled:{type:Boolean,default:!1},aniTime:{type:Number,default:parseInt(_.configs.aniTime.normal)},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["fold","unfold"],setup(e,t){var T=t.emit;const h=_.utils,C=_.libs.color,w=_.colors,k=T,O=e,H=l(null),M=l(!0),N=l(0),R=l(!1),q=s((()=>!h.isEmpty(O.icon))),B=s((()=>""==O.bgColor?w.value.front:O.bgColor)),E=s((()=>""==O.textColor?w.value.textLight:O.textColor)),I=s((()=>""==O.textSize?_.configs.font.size(2):O.textSize)),P=s((()=>C.tinyColor(B.value).setAlpha(.5).toRgbString())),$=s((()=>{let e=new Map;return e.set("height",M.value?O.minHeight:h.addPx(N.value)),e.set("background",B.value),e.set("transition-duration","".concat(O.aniTime,"ms")),e})),A=s((()=>{let e=new Map;return e.set("background-image","linear-gradient(to top, ".concat(B.value,", ").concat(P.value,")")),e}));function F(){var e,t,l;N.value=null!==(l=null===(t=null===(e=H.value)||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.height)&&void 0!==l?l:0,N.value>h.getPx(O.minHeight)&&(R.value=!0)}function J(){if(O.disabled)return null;M.value?(M.value=!1,k("unfold")):(M.value=!0,k("fold"))}return a((()=>{n((()=>{F()})),j(H.value,(()=>{F()}))})),(t=null,l=null)=>{const s=r,a=z(o("sn-text"),y),n=z(o("sn-icon"),S);return d(),i(s,{class:"sn-more-contain"},{default:u((()=>[f(s,{class:"sn-more",style:x([g($),e.customStyle])},{default:u((()=>[f(s,{class:"sn-more-wrap",ref_key:"wrapEle",ref:H},{default:u((()=>[c(t.$slots,"default",{},void 0,!0)])),_:3},512),m(f(s,{class:"sn-more-mask",style:x([g(A)])},null,8,["style"]),[[p,g(M)&&g(R)]])])),_:3},8,["style"]),g(R)?(d(),i(s,{key:0,class:v(["sn-more-text-area",e.disabled?"disabled":""]),onClick:J},{default:u((()=>[f(a,{text:g(M)?e.unfoldText:e.foldText,color:e.disabled?g(w).disabledText:g(E),size:g(I)},null,8,["text","color","size"]),f(n,{name:g(q)?e.icon:"arrow-".concat(g(M)?"down":"up","-s-line"),color:e.disabled?g(w).disabledText:g(E),size:g(I),style:{"margin-left":"5px"}},null,8,["name","color","size"])])),_:1},8,["class"])):b("",!0)])),_:3})}}})),[["__scopeId","data-v-f0f4743e"]]),q=t({__name:"sn-more",setup:t=>(_.colors,(t=null,l=null)=>{const s=z(o("sn-topbar"),e),a=z(o("sn-text"),y),n=z(o("sn-more"),R),r=z(o("com-card"),h),c=z(o("sn-gap"),C),m=z(o("sn-page"),w);return d(),i(m,null,{default:u((()=>[f(s,{title:"More 查看更多"}),f(r,{title:"基础用法",note:"内容太长可以先收起一部分"},{default:u((()=>[f(n,null,{default:u((()=>[f(a,{text:"　　"+g(k),size:g(_).configs.font.size(3)},null,8,["text","size"])])),_:1})])),_:1}),f(r,{title:"自定义文字"},{default:u((()=>[f(n,{unfoldText:"开",foldText:"关"},{default:u((()=>[f(a,{text:g(O),size:g(_).configs.font.size(3)},null,8,["text","size"])])),_:1})])),_:1}),f(r,{title:"自定义展示高度"},{default:u((()=>[f(n,{minHeight:"250px"},{default:u((()=>[f(a,{text:"　　"+g(H),size:g(_).configs.font.size(3)},null,8,["text","size"])])),_:1})])),_:1}),f(r,{title:"动画时长",note:"如果你在意性能的话，可以关闭动画"},{default:u((()=>[f(n,{aniTime:0},{default:u((()=>[f(a,{text:g(M),size:g(_).configs.font.size(3)},null,8,["text","size"])])),_:1})])),_:1}),f(r,{title:"禁用"},{default:u((()=>[f(n,{unfoldText:"开通大会员畅享百万好文",icon:"vip-crown-line",disabled:""},{default:u((()=>[f(a,{text:g(N),size:g(_).configs.font.size(3)},null,8,["text","size"])])),_:1})])),_:1}),f(c)])),_:1})})});export{q as default};
