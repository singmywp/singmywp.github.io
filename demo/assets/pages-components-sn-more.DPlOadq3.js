import{_ as e}from"./sn-topbar.wm0GzhH3.js";import{d as t,$ as l,r as a,c as s,o as n,n as o,a as i,e as u,f as r,x as d,_ as f,b as m,g as c,z as p,W as x,X as g,u as _,p as v,m as b,B as y}from"./index-DYMgrqHp.js";import{r as j}from"./uni-app.es.DgDfNdgy.js";import{a as S,_ as T,b as z}from"./sn-text.euomPoe8.js";import{u as h}from"./useResize.Cfi37DcV.js";import{_ as $}from"./com-card.BtLNzB63.js";import{_ as w}from"./sn-gap.2Twkbobz.js";import{_ as C}from"./sn-page.Cf6LEMVT.js";import{b as k,d as H,e as O,f as R,c as B}from"./longtext.BGk0ymny.js";import"./sn-button.BjZePiC5.js";import"./sn-loading.t5otRKvs.js";import"./sn-menu-item.DkjoXkWj.js";import"./sn-overlay.CiZFgEyq.js";const M=z(t(Object.assign({name:"sn-more"},{__name:"sn-more",props:{minHeight:{type:String,default:"100px"},unfoldText:{type:String,default:"展开查看更多"},foldText:{type:String,default:"收起"},icon:{type:String,default:""},textSize:{type:String,default:""},textColor:{type:String,default:""},bgColor:{type:String,default:""},disabled:{type:Boolean,default:!1},aniTime:{type:String,default:l.configs.aniTime.normal},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["fold","unfold"],setup(e,t){var z=t.emit;const $=l.utils,w=l.libs.color,C=l.colors,k=z,H=e,O=a(null),R=a(!0),B=a(0),M=a(!1),E=s((()=>!$.isEmpty(H.icon))),J=s((()=>d("color",H.bgColor,C.value.front))),L=s((()=>d("aniTime",H.aniTime,l.configs.aniTime.normal))),P=s((()=>d("color",H.textColor,C.value.textLight))),A=s((()=>d("font",H.textSize,l.configs.font.size(2)))),I=s((()=>w.tinyColor(J.value).setAlpha(.5).toRgbString())),K=s((()=>{const e=new Map;let t=$.addPx(B.value);return e.set("height",R.value&&M.value?H.minHeight:t),e.set("background",J.value),e.set("transition-duration",L.value),e})),N=s((()=>{const e=new Map;return M.value&&e.set("background-image","linear-gradient(to top, ".concat(J.value,", ").concat(I.value,")")),e}));function Q(){var e,t,l;B.value=null!==(l=null===(t=null===(e=O.value)||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.height)&&void 0!==l?l:0,B.value>$.getPx(H.minHeight)&&(M.value=!0)}function U(){if(H.disabled)return null;R.value?(R.value=!1,k("unfold")):(R.value=!0,k("fold"))}return n((()=>{o((()=>{Q()})),h(O.value,(()=>{Q()}))})),(t=null,l=null)=>{const a=f,s=j(i("sn-text"),S),n=j(i("sn-icon"),T);return m(),u(a,{class:"sn-more-contain"},{default:r((()=>[c(a,{class:"sn-more",style:v([_(K),e.customStyle])},{default:r((()=>[c(a,{class:"sn-more-wrap",ref_key:"wrapEle",ref:O},{default:r((()=>[p(t.$slots,"default",{},void 0,!0)])),_:3},512),x(c(a,{class:"sn-more-mask",style:v([_(N)])},null,8,["style"]),[[g,_(R)&&_(M)]])])),_:3},8,["style"]),_(M)?(m(),u(a,{key:0,class:b(["sn-more-text-area",e.disabled?"disabled":""]),onClick:U},{default:r((()=>[c(s,{text:_(R)?e.unfoldText:e.foldText,color:e.disabled?_(C).disabledText:_(P),size:_(A)},null,8,["text","color","size"]),c(n,{name:_(E)?e.icon:"arrow-".concat(_(R)?"down":"up","-s-line"),color:e.disabled?_(C).disabledText:_(P),size:_(A),style:{"margin-left":"5px"}},null,8,["name","color","size"])])),_:1},8,["class"])):y("",!0)])),_:3})}}})),[["__scopeId","data-v-b3639c10"]]),E=t({__name:"sn-more",setup:t=>(l.colors,(t=null,l=null)=>{const a=j(i("sn-topbar"),e),s=j(i("sn-text"),S),n=j(i("sn-more"),M),o=j(i("com-card"),$),d=j(i("sn-gap"),w),f=j(i("sn-page"),C);return m(),u(f,null,{default:r((()=>[c(a,{title:"More 查看更多"}),c(o,{title:"基础用法",note:"内容太长可以先收起一部分"},{default:r((()=>[c(n,null,{default:r((()=>[c(s,{size:"$3",text:"　　"+_(k)},null,8,["text"])])),_:1})])),_:1}),c(o,{title:"自定义文字"},{default:r((()=>[c(n,{unfoldText:"开",foldText:"关"},{default:r((()=>[c(s,{text:_(H),size:"$3"},null,8,["text"])])),_:1})])),_:1}),c(o,{title:"自定义展示高度",note:"低于展示高度则全部显示，高于则隐藏"}),c(o,null,{default:r((()=>[c(n,{minHeight:"250px"},{default:r((()=>[c(s,{text:"这是一小段文本，不会被折叠",size:"$3"})])),_:1})])),_:1}),c(o,null,{default:r((()=>[c(n,{minHeight:"250px"},{default:r((()=>[c(s,{size:"$3",text:"　　"+_(O)},null,8,["text"])])),_:1})])),_:1}),c(o,{title:"动画时长",note:"如果你在意性能的话，可以关闭动画"},{default:r((()=>[c(n,{aniTime:"0ms"},{default:r((()=>[c(s,{size:"$3",text:_(R)},null,8,["text"])])),_:1})])),_:1}),c(o,{title:"禁用"},{default:r((()=>[c(n,{unfoldText:"开通大会员畅享百万好文",icon:"vip-crown-line",disabled:""},{default:r((()=>[c(s,{size:"$3",text:_(B)},null,8,["text"])])),_:1})])),_:1}),c(d)])),_:1})})});export{E as default};
