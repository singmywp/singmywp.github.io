import{_ as e}from"./sn-topbar.A9l38UY4.js";import{d as t,r as l,c as a,k as o,l as s,b as r,u as n,e as i,f as u,m as c,v as d,p as v,o as p,g as f,D as m,E as y}from"./index-BV7wVSs2.js";import{$ as x,g as b,f as g,r as _}from"./uni-app.es.BzKMvEv9.js";import{a as C,b as S,c as z}from"./sn-button.68-4Ol7n.js";import{u as w}from"./useResize.uG7lV8L1.js";import{_ as k}from"./com-card.YVwaER4k.js";import{_ as h}from"./sn-page.Jy_rsgwA.js";const T=z(t(Object.assign({name:"sn-notice-bar"},{__name:"sn-notice-bar",props:{texts:{type:Array,default:[]},bgColor:{type:String,default:""},textColor:{type:String,default:""},textSize:{type:String,default:""},icon:{type:String,default:"volume-up-line"},iconColor:{type:String,default:""},iconSize:{type:String,default:""},speed:{type:Number,default:50},swiperInterval:{type:Number,default:2e3},vertical:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},mode:{type:String,default:"scroll"},customStyle:{type:Object,default:{}},customTextStyle:{type:Object,default:{}},customIconStyle:{type:Object,default:{}}},emits:["close","click","change"],setup(e,t){var z=t.emit;const k=x.utils,h=x.colors,T=z,j=e,I=l(k.randomComId()),B=l(!1),E=l(null),N=l(null),M=l(0),O=l(null),P=l(0),A=l(0),L=l(!1),R=l(0),U=l(0),$=l(0),D=l(""),X=l(""),Z=a((()=>!k.isEmpty(j.icon))),q=a((()=>""==j.bgColor?h.value.warningLight:j.bgColor)),F=a((()=>""==j.textColor?h.value.warning:j.textColor)),G=a((()=>""==j.textSize?x.configs.font.baseSize:j.textSize)),H=a((()=>k.isEmpty(j.iconColor)?F.value:j.iconColor)),J=a((()=>""==j.iconSize?x.configs.font.size(3):j.iconSize)),K=a((()=>{let e="";return e=["scroll","swiper"].includes(j.mode)?j.mode:"scroll",j.vertical&&(e="swiper"),e})),Q=a((()=>{let e=new Map;return e.set("background",q.value),e.set("border-radius",x.configs.radius.small),e.set("transition-duration",x.configs.aniTime.normal),e})),V=a((()=>{let e=new Map;return e.set("transform","translateX(".concat(M.value,"px)")),e.set("width",L.value?"100000px":""),e})),W=a((()=>{let e=new Map;return e.set("height",k.addPx(Math.max(k.getPx(J.value),k.getPx(G.value)))),e}));function Y(e){e.stopPropagation(),B.value=!0,T("close")}function ee(e){if(j.disabled)return null;T("click",e)}function te(){let e=A.value+P.value,t=k.formatNumber(e/j.speed*1e3);$.value=0,M.value=A.value,R.value=setTimeout((()=>{$.value=t,s((()=>{M.value=A.value-e-50,L.value=!0,U.value=setTimeout((()=>{L.value=!1,te()}),t)}))}),50)}function le(){$.value=0,s((()=>{"scroll"==K.value&&(M.value=2e5,P.value=O.value.$el.getBoundingClientRect().width,A.value=E.value.getBoundingClientRect().width),k.debounce((()=>{"scroll"==K.value?te():function(){const e=j.texts;let t=0,l=1;var a;D.value=e[t],X.value=null!==(a=e[l])&&void 0!==a?a:"",setInterval((()=>{t+=1,l+=1,t>e.length-1&&(t=0),l>e.length-1&&(l=0),t%2==0?D.value=e[t]:X.value=e[t]}),j.swiperInterval)}()}),100,I.value)}))}return o((()=>{le(),s((()=>{w(N.value,(()=>{le()}))}))})),b((()=>{clearTimeout(R.value),clearTimeout(U.value),$.value=0,M.value=0,L.value=!1})),g((()=>{s((()=>{le()}))})),(t=null,l=null)=>{const a=_(r("sn-icon"),C),o=_(r("sn-text"),S),s=m,x=y,b=v;return n(B)?d("",!0):(p(),i(b,{key:0,class:"sn-notice-bar",ref_key:"noticeBarEle",ref:N,onClick:ee,style:c([n(Q),e.customStyle])},{default:u((()=>[n(Z)?(p(),i(a,{key:0,class:"sn-notice-bar-icon",name:e.icon,color:n(H),size:n(J)},null,8,["name","color","size"])):d("",!0),f(b,{class:"sn-notice-bar-text-zone",ref_key:"textZoneEle",ref:E},{default:u((()=>{var t;return["scroll"==n(K)?(p(),i(o,{key:0,class:"sn-notice-bar-scroll-text",ref_key:"scrollTextEle",ref:O,lines:1,text:null!==(t=e.texts[0])&&void 0!==t?t:"",color:n(F),size:n(G),aniTime:n($),onTransitionend:te,style:c([n(V),e.customTextStyle])},null,8,["text","color","size","aniTime","style"])):d("",!0),"swiper"==n(K)?(p(),i(x,{key:1,class:"sn-notice-bar-swiper","disable-touch":!0,autoplay:!0,vertical:e.vertical,interval:e.swiperInterval,circular:!0,lines:1,style:c([n(W)])},{default:u((()=>[e.texts.length>=1?(p(),i(s,{key:0,class:"sn-notice-bar-swiper-item"},{default:u((()=>{var t;return[f(o,{text:null!==(t=n(D))&&void 0!==t?t:"",color:n(F),size:n(G),lines:1,style:c([e.customTextStyle])},null,8,["text","color","size","style"])]})),_:1})):d("",!0),e.texts.length>=2?(p(),i(s,{key:1,class:"sn-notice-bar-swiper-item"},{default:u((()=>{var t;return[f(o,{text:null!==(t=n(X))&&void 0!==t?t:"",color:n(F),size:n(G),lines:1,style:c([e.customTextStyle])},null,8,["text","color","size","style"])]})),_:1})):d("",!0)])),_:1},8,["vertical","interval","style"])):d("",!0)]})),_:1},512),e.closable?(p(),i(a,{key:1,class:"sn-notice-bar-close",name:"close-large-line",color:n(H),size:n(J),onClick:Y},null,8,["color","size"])):d("",!0)])),_:1},8,["style"]))}}})),[["__scopeId","data-v-bbfeb15a"]]),j=t({__name:"sn-notice-bar",setup(t){const l=x.colors,a=["朝辞白帝彩云间","千里江陵一日还。","两岸猿声啼不住","轻舟已过万重山。"],o=["SinleUI ，一个简洁、轻巧的现代移动应用UI框架。"];return(t=null,s=null)=>{const c=_(r("sn-topbar"),e),d=_(r("sn-notice-bar"),T),v=_(r("com-card"),k),m=_(r("sn-page"),h);return p(),i(m,null,{default:u((()=>[f(c,{title:"Notice Bar 通知栏"}),f(v,{title:"基础用法",note:"一般用于滚动公告等多种场景。\\n注意和 Alert 组件区别。Notice Bar 单行、可多条、可滚动；Alert 可多行，多主题，固定不滚动。"},{default:u((()=>[f(d,{texts:o})])),_:1}),f(v,{title:"可关闭"},{default:u((()=>[f(d,{closable:"",texts:o})])),_:1}),f(v,{title:"无图标"},{default:u((()=>[f(d,{icon:" ",texts:o})])),_:1}),f(v,{title:"自定义滚动速度"},{default:u((()=>[f(d,{speed:200,texts:o})])),_:1}),f(v,{title:"步进滚动"},{default:u((()=>[f(d,{mode:"swiper",texts:a}),f(d,{vertical:"",texts:a})])),_:1}),f(v,{title:"自定义样式"},{default:u((()=>[f(d,{texts:o,bgColor:n(l).primary,textColor:n(l).primaryText},null,8,["bgColor","textColor"]),f(d,{vertical:"",texts:a,bgColor:n(l).errorLight,textColor:n(l).errorLightText},null,8,["bgColor","textColor"])])),_:1})])),_:1})}}});export{j as default};
