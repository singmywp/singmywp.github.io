import{b as e,_ as t}from"./sn-topbar.A9l38UY4.js";import{d as a,r as l,c as n,b as s,e as o,f as i,u as p,m as u,o as r,g as m,t as d,q as c,B as f,p as v,h as k,i as _,F as y,L as g}from"./index-BV7wVSs2.js";import{$ as j,e as b,r as w,S as C}from"./uni-app.es.BzKMvEv9.js";import{_ as V}from"./sn-switch.kH-15fw2.js";import{_ as x}from"./sn-form-item.B6YASuRh.js";import{_ as T}from"./sn-select.C6Ny2cNr.js";import{_ as B}from"./sn-stepper.K0dGSYtN.js";import{c as h,_ as I}from"./sn-button.68-4Ol7n.js";import{_ as M}from"./sn-form.uvue_vue_type_script_setup_true_lang.DoB8Hcj3.js";import{_ as O}from"./com-card.YVwaER4k.js";import{_ as U}from"./sn-gap.DH4zRrCY.js";import{_ as S}from"./sn-page.Jy_rsgwA.js";import{_ as P}from"./sn-row.BXkLUWPG.js";import"./sn-alert.yUyLj5uH.js";import"./sn-line.DLI2-M9C.js";import"./sn-input.Bzur-JJ6.js";const z=h(a(Object.assign({name:"sn-popup"},{__name:"sn-popup",props:{renderMode:{type:String,default:"v-if"},position:{type:String,default:"center"},aniTime:{type:Number,default:parseInt(j.configs.aniTime.long)},preventBack:{type:Boolean,default:!1},maskClose:{type:Boolean,default:!0},maskOpacity:{type:Number,default:.3},customStyle:{type:Object,default:{}}},emits:["open","close","clickMask"],setup(t,a){var k=a.expose,_=a.emit;const y=j.utils,g=_,C=t,V=l(!1),x=l(null),T=l(y.randomComId()),B=n((()=>["center","top","bottom","left","right"].includes(C.position)?C.position:"center")),h=n((()=>C.aniTime==parseInt(j.configs.aniTime.long)?parseInt(j.configs.aniTime.long):C.aniTime)),I=n((()=>h.value>100?h.value-100:h.value)),M=n((()=>{let e=new Map;return e.set("justifyContent",["center","left","right"].includes(B.value)?"center":"top"==B.value?"flex-start":"flex-end"),e})),O=n((()=>{let e=new Map;return e.set("transition-duration","".concat(h.value,"ms")),e.set("zIndex",j.configs.zIndex.popup),e})),U=n((()=>{let e=new Map;return e.set("animation",h.value>0),e.set("hover",V.value),e.set(B.value,!0),e}));function S(){var e,t;V.value=!1,null===(t=null===(e=x.value)||void 0===e?void 0:e.close)||void 0===t||t.call(e),g("close")}function P(){V.value=!1,g("clickMask")}return k({open:function(){var e,t;null===(t=null===(e=x.value)||void 0===e?void 0:e.open)||void 0===t||t.call(e),y.throttle((()=>{V.value=!0}),20,T.value),g("open")},close:S}),b((e=>!!V.value&&(C.preventBack||S(),!0))),(a=null,l=null)=>{const n=v,k=w(s("sn-overlay"),e);return r(),o(k,{ref_key:"overlayEle",ref:x,renderMode:t.renderMode,aniTime:p(I),opacity:t.maskOpacity,maskClose:t.maskClose,onClickMask:P,style:u(p(M))},{default:i((()=>[m(n,{class:c(["sn-popup",p(U)]),onClick:l[0]||(l[0]=f((()=>{}),["stop"])),style:u([p(O),t.customStyle])},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["renderMode","aniTime","opacity","maskClose","style"])}}})),[["__scopeId","data-v-ce292731"]]),D=a({__name:"sn-popup",setup(e){const a=j.utils,n=l(null),o=l({position:1,maskClose:!0,preventBack:!1,aniTime:parseInt(j.configs.aniTime.long),maskOpacity:.3}),u=[new C({id:"top",text:"顶部"}),new C({id:"center",text:"居中"}),new C({id:"bottom",text:"底部"}),new C({id:"left",text:"左侧"}),new C({id:"right",text:"右侧"})];function d(){a.throttle((()=>{n.value.open()}),50)}function c(e){"run"==e.id&&d()}return(e=null,a=null)=>{var l,f;const v=w(s("sn-topbar"),t),j=w(s("sn-switch"),V),b=w(s("sn-form-item"),x),h=w(s("sn-select"),T),D=w(s("sn-stepper"),B),E=w(s("sn-button"),I),F=w(s("sn-form"),M),N=w(s("com-card"),O),$=w(s("sn-gap"),U),q=w(s("sn-page"),S),L=g,A=w(s("sn-row"),P),G=w(s("sn-popup"),z);return r(),k(y,null,[m(q,null,{default:i((()=>[m(v,{title:"Popup 弹出层",features:[new C({id:"run",icon:"play-circle-fill"})],onButtonClick:c}),m(N,{title:"组件演示",note:"需要弹窗？试试它吧。\\n请注意区分 Popup 和 Drawer。Popup 只控制动画和显隐逻辑，UI 需要自己写。而 Drawer 则是在 Popup 的基础上加了一层 UI 模板。"},{default:i((()=>[m(F,{modelValue:p(o),"onUpdate:modelValue":a[6]||(a[6]=(e=null)=>_(o)?o.value=e:null),showBorder:!1},{default:i((()=>[m(b,{label:"遮罩关闭"},{default:i((()=>[m(j,{modelValue:p(o).maskClose,"onUpdate:modelValue":a[0]||(a[0]=(e=null)=>p(o).maskClose=e)},null,8,["modelValue"])])),_:1}),m(b,{label:"阻止返回事件"},{default:i((()=>[m(j,{modelValue:p(o).preventBack,"onUpdate:modelValue":a[1]||(a[1]=(e=null)=>p(o).preventBack=e)},null,8,["modelValue"])])),_:1}),m(b,{label:"位置"},{default:i((()=>[m(h,{modelValue:p(o).position,"onUpdate:modelValue":a[2]||(a[2]=(e=null)=>p(o).position=e),width:"200px",data:u},null,8,["modelValue"])])),_:1}),m(b,{label:"动画时长"},{default:i((()=>[m(D,{modelValue:p(o).aniTime,"onUpdate:modelValue":a[3]||(a[3]=(e=null)=>p(o).aniTime=e),step:100,min:100},null,8,["modelValue"])])),_:1}),m(b,{label:"遮罩透明度"},{default:i((()=>[m(D,{modelValue:p(o).maskOpacity,"onUpdate:modelValue":a[4]||(a[4]=(e=null)=>p(o).maskOpacity=e),step:.1,min:0,max:1},null,8,["modelValue"])])),_:1}),m(E,{text:"打开",level:"second",type:"primary",onClick:a[5]||(a[5]=(e=null)=>d()),style:{"margin-top":"10px"}})])),_:1},8,["modelValue"])])),_:1}),m($)])),_:1}),m(G,{ref_key:"popupEle",ref:n,position:null!==(f=u[null!==(l=p(o).position)&&void 0!==l?l:1].id)&&void 0!==f?f:"",aniTime:p(o).aniTime,maskOpacity:p(o).maskOpacity,maskClose:p(o).maskClose,preventBack:p(o).preventBack},{default:i((()=>[m(A,{justify:"center"},{default:i((()=>[m(L,{class:"w-200",mode:"aspectFit",src:"/demo/assets/letter-open-CupCgpkg.png"})])),_:1})])),_:1},8,["position","aniTime","maskOpacity","maskClose","preventBack"])],64)}}});export{D as default};
