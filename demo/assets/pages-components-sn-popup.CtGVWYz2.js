import{b as e,_ as t}from"./sn-topbar.DGNmRcUY.js";import{d as a,r as l,c as n,b as s,e as o,f as u,u as r,m as i,o as p,g as m,t as d,q as c,B as f,p as v,h as k,i as _,F as y,L as g}from"./index-D82xabMX.js";import{$ as j,e as b,r as w,S as C}from"./uni-app.es.Cv0ss-rw.js";import{_ as V}from"./sn-switch.B79Tps6Q.js";import{_ as x}from"./sn-form-item.D3fgF-ip.js";import{_ as B}from"./sn-select.B1heSqvw.js";import{_ as D}from"./sn-stepper.Q3yYL--b.js";import{c as h,_ as I}from"./sn-button.CJ0ZsVkl.js";import{_ as M}from"./sn-form.uvue_vue_type_script_setup_true_lang.CZfQ0e94.js";import{_ as O}from"./com-card.2Ru7Wd6o.js";import{_ as U}from"./sn-gap.BFzalOT1.js";import{_ as S}from"./sn-page.CIc3m52K.js";import{_ as P}from"./sn-row.DBw4p-E_.js";import"./sn-alert.IFfoCHl2.js";import"./sn-line.C1IVPNnk.js";import"./sn-input.OLyd3D9e.js";const T=h(a(Object.assign({name:"sn-popup"},{__name:"sn-popup",props:{renderMode:{type:String,default:"v-if"},position:{type:String,default:"center"},aniTime:{type:Number,default:parseInt(j.configs.aniTime.long)},preventBack:{type:Boolean,default:!1},maskClose:{type:Boolean,default:!0},maskOpacity:{type:Number,default:.3},customStyle:{type:Object,default:{}}},emits:["open","close","clickMask"],setup(t,a){var k=a.expose,_=a.emit;const y=j.utils,g=_,C=t,V=l(!1),x=l(null),B=l(y.randomComId()),D=n((()=>["center","top","bottom","left","right"].includes(C.position)?C.position:"center")),h=n((()=>C.aniTime==parseInt(j.configs.aniTime.long)?parseInt(j.configs.aniTime.long):C.aniTime)),I=n((()=>h.value>100?h.value-100:h.value)),M=n((()=>{let e=new Map;return e.set("justifyContent",["center","left","right"].includes(D.value)?"center":"top"==D.value?"flex-start":"flex-end"),e})),O=n((()=>{let e=new Map;return e.set("transition-duration","".concat(h.value,"ms")),e.set("zIndex",j.configs.zIndex.popup),e})),U=n((()=>{let e=new Map;return e.set("animation",h.value>0),e.set("hover",V.value),e.set(D.value,!0),e}));function S(){var e,t;V.value=!1,null===(t=null===(e=x.value)||void 0===e?void 0:e.close)||void 0===t||t.call(e),g("close")}function P(){V.value=!1,g("clickMask")}return k({open:function(){var e,t;null===(t=null===(e=x.value)||void 0===e?void 0:e.open)||void 0===t||t.call(e),y.throttle((()=>{V.value=!0}),20,B.value),g("open")},close:S}),b((e=>!!V.value&&(C.preventBack||S(),!0))),(a=null,l=null)=>{const n=v,k=w(s("sn-overlay"),e);return p(),o(k,{ref_key:"overlayEle",ref:x,renderMode:t.renderMode,aniTime:r(I),opacity:t.maskOpacity,maskClose:t.maskClose,onClickMask:P,style:i(r(M))},{default:u((()=>[m(n,{class:c(["sn-popup",r(U)]),onClick:l[0]||(l[0]=f((()=>{}),["stop"])),style:i([r(O),t.customStyle])},{default:u((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["renderMode","aniTime","opacity","maskClose","style"])}}})),[["__scopeId","data-v-7b8aa385"]]),z=a({__name:"sn-popup",setup(e){const a=j.utils,n=l(null),o=l({position:1,maskClose:!0,preventBack:!1,aniTime:parseInt(j.configs.aniTime.long),maskOpacity:.3}),i=[new C({id:"top",text:"顶部"}),new C({id:"center",text:"居中"}),new C({id:"bottom",text:"底部"}),new C({id:"left",text:"左侧"}),new C({id:"right",text:"右侧"})];function d(){a.throttle((()=>{n.value.open()}),50)}function c(e){"run"==e.id&&d()}return(e=null,a=null)=>{var l,f;const v=w(s("sn-topbar"),t),j=w(s("sn-switch"),V),b=w(s("sn-form-item"),x),h=w(s("sn-select"),B),z=w(s("sn-stepper"),D),E=w(s("sn-button"),I),F=w(s("sn-form"),M),N=w(s("com-card"),O),$=w(s("sn-gap"),U),q=w(s("sn-page"),S),L=g,A=w(s("sn-row"),P),G=w(s("sn-popup"),T);return p(),k(y,null,[m(q,null,{default:u((()=>[m(v,{title:"Popup 弹出层",features:[new C({id:"run",icon:"play-circle-fill"})],onButtonClick:c}),m(N,{title:"组件演示",note:"需要弹窗？试试它吧。\\n请注意区分 Popup 和 Drawer。Popup 只控制动画和显隐逻辑，UI 需要自己写。而 Drawer 则是在 Popup 的基础上加了一层 UI 模板。"},{default:u((()=>[m(F,{modelValue:r(o),"onUpdate:modelValue":a[6]||(a[6]=(e=null)=>_(o)?o.value=e:null),showBorder:!1},{default:u((()=>[m(b,{label:"遮罩关闭"},{default:u((()=>[m(j,{modelValue:r(o).maskClose,"onUpdate:modelValue":a[0]||(a[0]=(e=null)=>r(o).maskClose=e)},null,8,["modelValue"])])),_:1}),m(b,{label:"阻止返回事件"},{default:u((()=>[m(j,{modelValue:r(o).preventBack,"onUpdate:modelValue":a[1]||(a[1]=(e=null)=>r(o).preventBack=e)},null,8,["modelValue"])])),_:1}),m(b,{label:"位置"},{default:u((()=>[m(h,{modelValue:r(o).position,"onUpdate:modelValue":a[2]||(a[2]=(e=null)=>r(o).position=e),width:"200px",data:i},null,8,["modelValue"])])),_:1}),m(b,{label:"动画时长"},{default:u((()=>[m(z,{modelValue:r(o).aniTime,"onUpdate:modelValue":a[3]||(a[3]=(e=null)=>r(o).aniTime=e),step:100,min:100},null,8,["modelValue"])])),_:1}),m(b,{label:"遮罩透明度"},{default:u((()=>[m(z,{modelValue:r(o).maskOpacity,"onUpdate:modelValue":a[4]||(a[4]=(e=null)=>r(o).maskOpacity=e),step:.1,min:0,max:1},null,8,["modelValue"])])),_:1}),m(E,{text:"打开",level:"second",type:"primary",onClick:a[5]||(a[5]=(e=null)=>d()),style:{"margin-top":"10px"}})])),_:1},8,["modelValue"])])),_:1}),m($)])),_:1}),m(G,{ref_key:"popupEle",ref:n,position:null!==(f=i[null!==(l=r(o).position)&&void 0!==l?l:1].id)&&void 0!==f?f:"",aniTime:r(o).aniTime,maskOpacity:r(o).maskOpacity,maskClose:r(o).maskClose,preventBack:r(o).preventBack},{default:u((()=>[m(A,{justify:"center"},{default:u((()=>[m(L,{class:"w-200",mode:"aspectFit",src:"/demo/assets/letter-open-CupCgpkg.png"})])),_:1})])),_:1},8,["position","aniTime","maskOpacity","maskClose","preventBack"])],64)}}});export{z as default};
