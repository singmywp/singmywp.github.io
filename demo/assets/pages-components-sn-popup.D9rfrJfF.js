import{b as e,_ as t,a}from"./sn-topbar.CX0rMkKy.js";import{d as l,r as n,c as s,b as o,e as i,f as p,u,q as r,o as m,g as d,t as c,p as f,B as v,k,h as _,i as y,F as g,I as j}from"./index-DNTc1GxZ.js";import{$ as w,e as C,r as V,S as b}from"./uni-app.es.D9ZkitmT.js";import{_ as x}from"./sn-switch.C3UtPu7N.js";import{_ as T}from"./sn-form-item.iui4qf57.js";import{_ as B}from"./sn-select.CSb66Fnx.js";import{_ as h}from"./sn-stepper.D3yVS7uF.js";import{c as I,_ as M}from"./sn-button.BaZjRh9m.js";import{_ as O}from"./sn-form.uvue_vue_type_script_setup_true_lang.CpEqESxD.js";import{_ as U}from"./com-card.22LSjaaf.js";import{_ as S}from"./sn-gap.B2D2kaQK.js";import{_ as P}from"./sn-page.CEVOSUw5.js";import"./sn-alert.BVqfDC3L.js";import"./sn-line.BJRaATTn.js";import"./sn-input.ojC213jP.js";const q=I(l(Object.assign({name:"sn-popup"},{__name:"sn-popup",props:{renderMode:{type:String,default:"v-if"},position:{type:String,default:"center"},aniTime:{type:Number,default:parseInt(w.configs.aniTime.long)},preventBack:{type:Boolean,default:!1},maskClose:{type:Boolean,default:!0},maskOpacity:{type:Number,default:.3},customStyle:{type:Object,default:{}}},emits:["open","close","clickMask"],setup(t,a){var l=a.expose,_=a.emit;const y=w.utils,g=_,j=t,b=n(!1),x=n(null),T=n(y.randomComId()),B=s((()=>["center","top","bottom","left","right"].includes(j.position)?j.position:"center")),h=s((()=>j.aniTime==parseInt(w.configs.aniTime.long)?parseInt(w.configs.aniTime.long):j.aniTime)),I=s((()=>h.value>100?h.value-100:h.value)),M=s((()=>{let e=new Map;return e.set("justifyContent",["center","left","right"].includes(B.value)?"center":"top"==B.value?"flex-start":"flex-end"),e})),O=s((()=>{let e=new Map;return e.set("transition-duration","".concat(h.value,"ms")),e.set("zIndex",w.configs.zIndex.popup),e})),U=s((()=>{let e=new Map;return e.set("animation",h.value>0),e.set("hover",b.value),e.set(B.value,!0),e}));function S(){var e,t;b.value=!1,null===(t=null===(e=x.value)||void 0===e?void 0:e.close)||void 0===t||t.call(e),g("close")}function P(){b.value=!1,g("clickMask")}return l({open:function(){var e,t;null===(t=null===(e=x.value)||void 0===e?void 0:e.open)||void 0===t||t.call(e),y.throttle((()=>{b.value=!0}),20,T.value),g("open")},close:S}),C((e=>!!b.value&&(j.preventBack||S(),!0))),(a=null,l=null)=>{const n=k,s=V(o("sn-overlay"),e);return m(),i(s,{ref_key:"overlayEle",ref:x,renderMode:t.renderMode,aniTime:u(I),opacity:t.maskOpacity,maskClose:t.maskClose,onClickMask:P,style:r(u(M))},{default:p((()=>[d(n,{class:f(["sn-popup",u(U)]),onClick:l[0]||(l[0]=v((()=>{}),["stop"])),style:r([u(O),t.customStyle])},{default:p((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["renderMode","aniTime","opacity","maskClose","style"])}}})),[["__scopeId","data-v-ce292731"]]),z=l({__name:"sn-popup",setup(e){const l=w.utils,s=n(null),i=n({position:1,maskClose:!0,preventBack:!1,aniTime:parseInt(w.configs.aniTime.long),maskOpacity:.3}),r=[new b({id:"top",text:"顶部"}),new b({id:"center",text:"居中"}),new b({id:"bottom",text:"底部"}),new b({id:"left",text:"左侧"}),new b({id:"right",text:"右侧"})];function c(){l.throttle((()=>{s.value.open()}),50)}function f(e){"run"==e.id&&c()}return(e=null,l=null)=>{var n,v;const k=V(o("sn-topbar"),t),w=V(o("sn-switch"),x),C=V(o("sn-form-item"),T),I=V(o("sn-select"),B),z=V(o("sn-stepper"),h),D=V(o("sn-button"),M),E=V(o("sn-form"),O),F=V(o("com-card"),U),N=V(o("sn-gap"),S),$=V(o("sn-page"),P),H=j,A=V(o("sn-row"),a),G=V(o("sn-popup"),q);return m(),_(g,null,[d($,null,{default:p((()=>[d(k,{title:"Popup 弹出层",features:[new b({id:"run",icon:"play-circle-fill"})],onButtonClick:f}),d(F,{title:"组件演示",note:"需要弹窗？试试它吧。\\n请注意区分 Popup 和 Drawer。Popup 只控制动画和显隐逻辑，UI 需要自己写。而 Drawer 则是在 Popup 的基础上加了一层 UI 模板。"},{default:p((()=>[d(E,{modelValue:u(i),"onUpdate:modelValue":l[6]||(l[6]=(e=null)=>y(i)?i.value=e:null),showBorder:!1},{default:p((()=>[d(C,{label:"遮罩关闭"},{default:p((()=>[d(w,{modelValue:u(i).maskClose,"onUpdate:modelValue":l[0]||(l[0]=(e=null)=>u(i).maskClose=e)},null,8,["modelValue"])])),_:1}),d(C,{label:"阻止返回事件"},{default:p((()=>[d(w,{modelValue:u(i).preventBack,"onUpdate:modelValue":l[1]||(l[1]=(e=null)=>u(i).preventBack=e)},null,8,["modelValue"])])),_:1}),d(C,{label:"位置"},{default:p((()=>[d(I,{modelValue:u(i).position,"onUpdate:modelValue":l[2]||(l[2]=(e=null)=>u(i).position=e),width:"200px",data:r},null,8,["modelValue"])])),_:1}),d(C,{label:"动画时长"},{default:p((()=>[d(z,{modelValue:u(i).aniTime,"onUpdate:modelValue":l[3]||(l[3]=(e=null)=>u(i).aniTime=e),step:100,min:100},null,8,["modelValue"])])),_:1}),d(C,{label:"遮罩透明度"},{default:p((()=>[d(z,{modelValue:u(i).maskOpacity,"onUpdate:modelValue":l[4]||(l[4]=(e=null)=>u(i).maskOpacity=e),step:.1,min:0,max:1},null,8,["modelValue"])])),_:1}),d(D,{text:"打开",level:"second",type:"primary",onClick:l[5]||(l[5]=(e=null)=>c()),style:{"margin-top":"10px"}})])),_:1},8,["modelValue"])])),_:1}),d(N)])),_:1}),d(G,{ref_key:"popupEle",ref:s,position:null!==(v=r[null!==(n=u(i).position)&&void 0!==n?n:1].id)&&void 0!==v?v:"",aniTime:u(i).aniTime,maskOpacity:u(i).maskOpacity,maskClose:u(i).maskClose,preventBack:u(i).preventBack},{default:p((()=>[d(A,{justify:"center"},{default:p((()=>[d(H,{class:"w-200",mode:"aspectFit",src:"/demo/assets/letter-open-CupCgpkg.png"})])),_:1})])),_:1},8,["position","aniTime","maskOpacity","maskClose","preventBack"])],64)}}});export{z as default};
