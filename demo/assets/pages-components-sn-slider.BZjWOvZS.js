import{_ as e,a as l}from"./sn-topbar.wm0GzhH3.js";import{d as t,a8 as a,$ as u,r as n,c as o,o as s,n as d,y as i,a as r,e as m,f as c,p as v,u as p,x as h,_ as f,b as x,g as b,m as V,B as g,i as y}from"./index-DYMgrqHp.js";import{r as w}from"./uni-app.es.DgDfNdgy.js";import{_ as S}from"./sn-slider.MdIJTXYQ.js";import{a as T,b as _}from"./sn-text.euomPoe8.js";import{u as j}from"./useResize.Cfi37DcV.js";import{_ as U}from"./com-card.BtLNzB63.js";import{_ as M}from"./sn-gap.2Twkbobz.js";import{_ as P}from"./sn-page.Cf6LEMVT.js";import"./sn-button.BjZePiC5.js";import"./sn-loading.t5otRKvs.js";import"./sn-menu-item.DkjoXkWj.js";import"./sn-overlay.CiZFgEyq.js";const O=_(t(Object.assign({name:"sn-slider"},{__name:"sn-slider-double",props:{modelValue:{type:Array,default:[0,0],validator:e=>{if(2!=e.length)throw new a("components","snSlider",9010012);return!0}},vertical:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},thickness:{type:String,default:"20px"},borderRadius:{type:String,default:""},thumbBorderRadius:{type:String,default:""},thumbBorder:{type:String,default:""},thumbSize:{type:String,default:"10px"},showValueText:{type:Boolean,default:!1},valueTextWidth:{type:String,default:"30px"},customStyle:{type:Object,default:new UTSJSONObject({})},customContainStyle:{type:Object,default:new UTSJSONObject({})},customThumbStyle:{type:Object,default:new UTSJSONObject({})},customValueTextStyle:{type:Object,default:new UTSJSONObject({})},customActiveStyle:{type:Object,default:new UTSJSONObject({})}},emits:["update:modelValue","change","touchend","touchstart","touchmove","touchcancel"],setup(e,l){var t=l.emit;const a=u.utils,y=u.colors,S=t,_=e,U=n(null),M=n(null),P=n(0),O=n(0),k=n(0),B=n(0),D=n(-1);function C(e){return e=Math.min(Math.max(_.min,e),_.max),e=Math.round((e-_.min)/_.step)*_.step+_.min}function N(e){return[C(e[0]),C(e[1])]}const R=o({get:()=>_.modelValue,set:e=>{let l=N(e);S("update:modelValue",l),S("change",l[0]<l[1]?[l[0],l[1]]:[l[1],l[0]])}}),W=o((()=>Math.max((a.getPx(_.thickness)-a.getPx(_.thumbSize))/2,0))),z=o((()=>a.getPx(_.thumbSize))),J=o((()=>2*W.value+z.value)),A=o((()=>_.vertical?O.value:P.value)),X=o((()=>A.value-J.value)),Y=o((()=>h("radius",_.borderRadius,u.configs.radius.circle))),E=o((()=>h("radius",_.thumbBorderRadius,u.configs.radius.circle))),L=o((()=>h("color",_.activeColor,y.value.primary))),$=o((()=>h("color",_.inactiveColor,y.value.infoActive))),I=o((()=>(R.value[0]-_.min)/(_.max-_.min))),K=o((()=>(R.value[1]-_.min)/(_.max-_.min))),Q=o((()=>I.value*X.value)),q=o((()=>K.value*X.value)),F=o((()=>Math.min(Q.value,q.value))),G=o((()=>Math.abs(q.value-Q.value)+J.value)),H=o((()=>{const e=new Map;return _.vertical?(e.set("width",_.thickness),e.set("flex-direction","column")):(e.set("height",_.thickness),e.set("flex-direction","row")),e.set("border-radius",Y.value),e.set("background",_.disabled?y.value.disabled:$.value),e.set("transition-duration",u.configs.aniTime.normal),e})),Z=o((()=>{const e=new Map;return _.vertical?(e.set("top",a.addPx(F.value)),e.set("width","100%"),e.set("height",a.addPx(G.value)),e.set("min-height",a.addPx(J.value)),e.set("max-height",a.addPx(O.value)),e.set("flex-direction","column")):(e.set("left",a.addPx(F.value)),e.set("height","100%"),e.set("width",a.addPx(G.value)),e.set("min-width",a.addPx(J.value)),e.set("max-width",a.addPx(P.value)),e.set("flex-direction","row")),e.set("border-radius",E.value),e.set("background",_.disabled?y.value.disabledText:L.value),e.set("transition-duration",u.configs.aniTime.normal),e})),ee=o((()=>{const e=new Map;return e.set("width",a.addPx(z.value)),e.set("height",a.addPx(z.value)),e.set("border-radius",E.value),e.set("background","white"),e.set("border",_.thumbBorder),e.set("transition-duration",u.configs.aniTime.normal),e})),le=o((()=>{const e=new Map;return e.set("transform","translate".concat(_.vertical?"Y":"X","(").concat(Q.value+W.value,"px)")),e})),te=o((()=>{const e=new Map;return e.set("transform","translate".concat(_.vertical?"Y":"X","(").concat(q.value+W.value,"px)")),e})),ae=o((()=>{const e=new Map;return e.set("width",_.valueTextWidth),_.vertical?e.set("margin-top","5px"):e.set("margin-left","5px"),e})),ue=o((()=>{const e=new Map;let l=Math.max(z.value,a.getPx(_.thickness));return _.vertical?(e.set("flex-direction","column"),e.set("height","100%"),e.set("width",a.addPx(Math.max(l,a.getPx(_.valueTextWidth))))):(e.set("flex-direction","row"),e.set("width","100%"),e.set("height",a.addPx(l))),e}));function ne(){var e,l,t,a,u,n;let o=null===(e=U.value)||void 0===e?void 0:e.getBoundingClientRect(),s=null===(l=M.value)||void 0===l?void 0:l.getBoundingClientRect();P.value=null!==(t=null==o?void 0:o.width)&&void 0!==t?t:0,O.value=null!==(a=null==o?void 0:o.height)&&void 0!==a?a:0,k.value=null!==(u=null==s?void 0:s.left)&&void 0!==u?u:0,B.value=null!==(n=null==s?void 0:s.top)&&void 0!==n?n:0}function oe(e,l,t){return e>=l&&e<=t}function se(e,l){let t=_.vertical?B.value:k.value,a=((_.vertical?l:e)-t-J.value/2)/X.value;a=Math.min(Math.max(0,a),1),a=a*(_.max-_.min)+_.min,R.value[D.value]=a,R.value=R.value}function de(e){if(e.preventDefault(),_.disabled||-1==D.value)return null;let l=e.touches[0];se(l.clientX,l.clientY),S("touchmove",e)}function ie(e){if(e.preventDefault(),_.disabled||-1!=D.value)return null;let l=e.touches[0],t=function(e){for(let l=0;l<2;l++){let t=0,a=0;_.vertical?(t=B.value,a=e.clientY):(t=k.value,a=e.clientX);let u=0==l?I.value:K.value,n=t+X.value*u;if(oe(a,n,n+J.value))return l}return-1}(l);-1!=t&&(D.value=t,se(l.clientX,l.clientY)),S("touchstart",e)}function re(e){e.preventDefault(),D.value=-1;let l=R.value;R.value=l[0]>l[1]?[l[1],l[0]]:l,S("touchend",e.target)}function me(e){e.preventDefault(),S("touchcancel",e.target)}function ce(e){if(e.preventDefault(),_.disabled)return null;S("touchstart",e)}function ve(e){if(e.preventDefault(),_.disabled||-1==D.value)return null;S("touchmove",e)}function pe(e){e.preventDefault(),S("touchend",e)}return s((()=>{R.value=N(R.value),window.addEventListener("mouseup",pe),window.addEventListener("mousemove",ve),d((()=>{ne()})),j(U.value,(()=>{ne()}))})),i((()=>{d((()=>{ne()}))})),(l=null,t=null)=>{const a=f,u=w(r("sn-text"),T);return x(),m(a,{class:"sn-slider-contain",ref_key:"containEle",ref:M,onTouchmove:de,onTouchstart:ie,onTouchend:re,onTouchcancel:me,onMousedown:ce,style:v([p(ue),e.customContainStyle])},{default:c((()=>[b(a,{class:V(["sn-slider",e.disabled?"disabled":""]),ref_key:"sliderEle",ref:U,style:v([p(H),e.customStyle])},{default:c((()=>[b(a,{class:"sn-slider-active",style:v([p(Z),e.customActiveStyle])},null,8,["style"])])),_:1},8,["class","style"]),b(a,{class:"sn-slider-thumb-pre",style:v([p(ee),p(le),e.customThumbStyle])},null,8,["style"]),b(a,{class:"sn-slider-thumb-suf",style:v([p(ee),p(te),e.customThumbStyle])},null,8,["style"]),e.showValueText?(x(),m(u,{key:0,align:"center",text:"".concat(p(R)),lines:1,style:v([p(ae),e.customValueTextStyle])},null,8,["text","style"])):g("",!0)])),_:1},8,["style"])}}})),[["__scopeId","data-v-4443bdd9"]]),k=t({__name:"sn-slider",setup(t){const a=n(70),u=n(50),o=n(20),s=n(20),d=n(20),i=n(20),v=n([20,40]),h=n([20,40]),f=n([20,40]),V=n([20,40]),g=n([20,40]),_=n([20,40]);return(t=null,n=null)=>{const j=w(r("sn-topbar"),e),k=w(r("sn-slider"),S),B=w(r("sn-slider-double"),O),D=w(r("com-card"),U),C=w(r("sn-text"),T),N=w(r("sn-row"),l),R=w(r("sn-gap"),M),W=w(r("sn-page"),P);return x(),m(W,null,{default:c((()=>[b(j,{title:"Slider 滑动选择"}),b(D,{title:"基础用法",note:"和内置 Slider 组件不同的是，本组件并非使用 Draw Api 绘制。大部分场景下，不会出现大量 Slider 联动的高性能需求，使用多 DOM 布局以更好满足用户个性化需求。支持双向 Slider。"},{default:c((()=>[b(k,{modelValue:p(a),"onUpdate:modelValue":n[0]||(n[0]=(e=null)=>y(a)?a.value=e:null)},null,8,["modelValue"]),b(B,{class:"m-t-10",modelValue:p(v),"onUpdate:modelValue":n[1]||(n[1]=(e=null)=>y(v)?v.value=e:null)},null,8,["modelValue"])])),_:1}),b(D,{title:"滑块大小",note:"可以自由设置滑块大小"},{default:c((()=>[b(k,{modelValue:p(u),"onUpdate:modelValue":n[2]||(n[2]=(e=null)=>y(u)?u.value=e:null),thumbSize:"16px"},null,8,["modelValue"]),b(B,{modelValue:p(h),"onUpdate:modelValue":n[3]||(n[3]=(e=null)=>y(h)?h.value=e:null),class:"m-t-10",thumbSize:"20px",thickness:"2px",valueTextWidth:"50px",thumbBorder:"1px solid #ededed"},null,8,["modelValue"])])),_:1}),b(D,{title:"厚度",note:"调节 Slider 的显示厚度，可以更小，也可更大"},{default:c((()=>[b(k,{modelValue:p(o),"onUpdate:modelValue":n[4]||(n[4]=(e=null)=>y(o)?o.value=e:null),thickness:"15px",padding:"3px"},null,8,["modelValue"]),b(B,{modelValue:p(f),"onUpdate:modelValue":n[5]||(n[5]=(e=null)=>y(f)?f.value=e:null),class:"m-t-10",thickness:"15px",padding:"3px",valueTextWidth:"50px"},null,8,["modelValue"])])),_:1}),b(D,{title:"显示值",note:"可以显示当前数值文本"},{default:c((()=>[b(k,{modelValue:p(s),"onUpdate:modelValue":n[6]||(n[6]=(e=null)=>y(s)?s.value=e:null),showValueText:""},null,8,["modelValue"]),b(B,{modelValue:p(V),"onUpdate:modelValue":n[7]||(n[7]=(e=null)=>y(V)?V.value=e:null),class:"m-t-10",showValueText:"",valueTextWidth:"50px"},null,8,["modelValue"])])),_:1}),b(D,{title:"极值和步长",note:"可以自由设置最大值、最小值、步长。支持自动检查初始数据并纠错。"},{default:c((()=>[b(C,{class:"m-b-10",text:"最小值：10\n最大值：60\n步长：5\n当前值：".concat(p(d))},null,8,["text"]),b(k,{modelValue:p(d),"onUpdate:modelValue":n[8]||(n[8]=(e=null)=>y(d)?d.value=e:null),min:10,max:60,step:5},null,8,["modelValue"]),b(B,{class:"m-t-10",modelValue:p(_),"onUpdate:modelValue":n[9]||(n[9]=(e=null)=>y(_)?_.value=e:null),min:10,max:60,step:5},null,8,["modelValue"])])),_:1}),b(D,{title:"竖向",note:"支持设置竖向显示"},{default:c((()=>[b(N,{class:"h-250"},{default:c((()=>[b(k,{modelValue:p(i),"onUpdate:modelValue":n[10]||(n[10]=(e=null)=>y(i)?i.value=e:null),vertical:""},null,8,["modelValue"]),b(k,{class:"m-r-50",modelValue:p(i),"onUpdate:modelValue":n[11]||(n[11]=(e=null)=>y(i)?i.value=e:null),vertical:"",showValueText:""},null,8,["modelValue"]),b(B,{modelValue:p(g),"onUpdate:modelValue":n[12]||(n[12]=(e=null)=>y(g)?g.value=e:null),vertical:""},null,8,["modelValue"]),b(B,{modelValue:p(g),"onUpdate:modelValue":n[13]||(n[13]=(e=null)=>y(g)?g.value=e:null),vertical:"",showValueText:"",valueTextWidth:"60px"},null,8,["modelValue"])])),_:1})])),_:1}),b(D,{title:"禁用",note:"支持设置禁用"},{default:c((()=>[b(k,{modelValue:p(o),"onUpdate:modelValue":n[14]||(n[14]=(e=null)=>y(o)?o.value=e:null),disabled:""},null,8,["modelValue"]),b(B,{modelValue:p(f),"onUpdate:modelValue":n[15]||(n[15]=(e=null)=>y(f)?f.value=e:null),class:"m-t-10",disabled:"",valueTextWidth:"50px"},null,8,["modelValue"])])),_:1}),b(R,{height:"50px"})])),_:1})}}});export{k as default};
