import{_ as e}from"./sn-topbar.DGNmRcUY.js";import{d as l,r as t,c as a,k as u,l as n,A as o,b as s,e as i,f as d,m as r,u as m,p as c,o as v,g as p,v as h,i as f}from"./index-D82xabMX.js";import{$ as x,r as b}from"./uni-app.es.Cv0ss-rw.js";import{_ as V}from"./sn-slider.DJpLZwcs.js";import{b as g,c as y}from"./sn-button.CJ0ZsVkl.js";import{u as w}from"./useResize.C5gdmbvL.js";import{_ as S}from"./com-card.2Ru7Wd6o.js";import{_ as T}from"./sn-row.DBw4p-E_.js";import{_}from"./sn-gap.BFzalOT1.js";import{_ as j}from"./sn-page.CIc3m52K.js";const M=y(l(Object.assign({name:"sn-slider"},{__name:"sn-slider-double",props:{modelValue:{type:Array,default:[0,0],validator:e=>{if(2!=e.length)throw new Error("sn-slider: v-model 必须是长度为 2 的 number[]");return!0}},vertical:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},thickness:{type:String,default:"20px"},borderRadius:{type:String,default:""},thumbBorderRadius:{type:String,default:""},thumbBorder:{type:String,default:""},thumbSize:{type:String,default:"10px"},showValueText:{type:Boolean,default:!1},valueTextWidth:{type:String,default:"30px"},customStyle:{type:Object,default:new UTSJSONObject({})},customContainStyle:{type:Object,default:new UTSJSONObject({})},customThumbStyle:{type:Object,default:new UTSJSONObject({})},customValueTextStyle:{type:Object,default:new UTSJSONObject({})},customActiveStyle:{type:Object,default:new UTSJSONObject({})}},emits:["update:modelValue","change","touchend","touchstart","touchmove","touchcancel"],setup(e,l){var f=l.emit;const V=x.utils,y=x.colors,S=f,T=e,_=t(null),j=t(null),M=t(0),U=t(0),O=t(0),P=t(0),k=t(-1);function B(e){return e=Math.min(Math.max(T.min,e),T.max),e=Math.round((e-T.min)/T.step)*T.step+T.min}function C(e){return[B(e[0]),B(e[1])]}const D=a({get:()=>T.modelValue,set:e=>{let l=C(e);S("update:modelValue",l),S("change",l[0]<l[1]?[l[0],l[1]]:[l[1],l[0]])}}),R=a((()=>Math.max((V.getPx(T.thickness)-V.getPx(T.thumbSize))/2,0))),N=a((()=>V.getPx(T.thumbSize))),W=a((()=>2*R.value+N.value)),z=a((()=>T.vertical?U.value:M.value)),A=a((()=>z.value-W.value)),E=a((()=>""==T.borderRadius?x.configs.radius.circle:T.borderRadius)),J=a((()=>""==T.thumbBorderRadius?x.configs.radius.circle:T.thumbBorderRadius)),X=a((()=>""==T.activeColor?y.value.primary:T.activeColor)),Y=a((()=>""==T.inactiveColor?y.value.infoActive:T.inactiveColor)),L=a((()=>(D.value[0]-T.min)/(T.max-T.min))),I=a((()=>(D.value[1]-T.min)/(T.max-T.min))),$=a((()=>L.value*A.value)),q=a((()=>I.value*A.value)),F=a((()=>Math.min($.value,q.value))),G=a((()=>Math.abs(q.value-$.value)+W.value)),H=a((()=>{let e=new Map;return T.vertical?(e.set("width",T.thickness),e.set("flex-direction","column")):(e.set("height",T.thickness),e.set("flex-direction","row")),e.set("border-radius",E.value),e.set("background",Y.value),e.set("transition-duration",x.configs.aniTime.normal),e})),K=a((()=>{let e=new Map;return T.vertical?(e.set("top",V.addPx(F.value)),e.set("width","100%"),e.set("height",V.addPx(G.value)),e.set("min-height",V.addPx(W.value)),e.set("max-height",V.addPx(U.value)),e.set("flex-direction","column")):(e.set("left",V.addPx(F.value)),e.set("height","100%"),e.set("width",V.addPx(G.value)),e.set("min-width",V.addPx(W.value)),e.set("max-width",V.addPx(M.value)),e.set("flex-direction","row")),e.set("border-radius",J.value),e.set("background",X.value),e.set("transition-duration",x.configs.aniTime.normal),e})),Q=a((()=>{let e=new Map;return e.set("width",V.addPx(N.value)),e.set("height",V.addPx(N.value)),e.set("border-radius",J.value),e.set("background","white"),e.set("border",T.thumbBorder),e.set("transition-duration",x.configs.aniTime.normal),e})),Z=a((()=>{let e=new Map;return e.set("transform","translate".concat(T.vertical?"Y":"X","(").concat($.value+R.value,"px)")),e})),ee=a((()=>{let e=new Map;return e.set("transform","translate".concat(T.vertical?"Y":"X","(").concat(q.value+R.value,"px)")),e})),le=a((()=>{let e=new Map;return e.set("width",T.valueTextWidth),T.vertical?e.set("margin-top","5px"):e.set("margin-left","5px"),e})),te=a((()=>{let e=new Map,l=Math.max(N.value,V.getPx(T.thickness));return T.vertical?(e.set("flex-direction","column"),e.set("height","100%"),e.set("width",V.addPx(Math.max(l,V.getPx(T.valueTextWidth))))):(e.set("flex-direction","row"),e.set("width","100%"),e.set("height",V.addPx(l))),e}));function ae(){var e,l,t,a,u,n;let o=null===(e=_.value)||void 0===e?void 0:e.getBoundingClientRect(),s=null===(l=j.value)||void 0===l?void 0:l.getBoundingClientRect();M.value=null!==(t=null==o?void 0:o.width)&&void 0!==t?t:0,U.value=null!==(a=null==o?void 0:o.height)&&void 0!==a?a:0,O.value=null!==(u=null==s?void 0:s.left)&&void 0!==u?u:0,P.value=null!==(n=null==s?void 0:s.top)&&void 0!==n?n:0}function ue(e,l,t){return e>=l&&e<=t}function ne(e,l){let t=T.vertical?P.value:O.value,a=((T.vertical?l:e)-t-W.value/2)/A.value;a=Math.min(Math.max(0,a),1),a=a*(T.max-T.min)+T.min,D.value[k.value]=a,D.value=D.value}function oe(e){if(e.preventDefault(),T.disabled||-1==k.value)return null;let l=e.touches[0];ne(l.clientX,l.clientY),S("touchmove",e)}function se(e){if(e.preventDefault(),T.disabled||-1!=k.value)return null;let l=e.touches[0],t=function(e){for(let l=0;l<2;l++){let t=0,a=0;T.vertical?(t=P.value,a=e.clientY):(t=O.value,a=e.clientX);let u=0==l?L.value:I.value,n=t+A.value*u;if(ue(a,n,n+W.value))return l}return-1}(l);-1!=t&&(k.value=t,ne(l.clientX,l.clientY)),S("touchstart",e)}function ie(e){e.preventDefault(),k.value=-1;let l=D.value;D.value=l[0]>l[1]?[l[1],l[0]]:l,S("touchend",e.target)}function de(e){e.preventDefault(),S("touchcancel",e.target)}function re(e){if(e.preventDefault(),T.disabled)return null;S("touchstart",e)}function me(e){if(e.preventDefault(),T.disabled||-1==k.value)return null;S("touchmove",e)}function ce(e){e.preventDefault(),S("touchend",e)}return u((()=>{D.value=C(D.value),window.addEventListener("mouseup",ce),window.addEventListener("mousemove",me),n((()=>{ae(),w(_.value,(()=>{ae()}))}))})),o((()=>{n((()=>{ae()}))})),(l=null,t=null)=>{const a=c,u=b(s("sn-text"),g);return v(),i(a,{class:"sn-slider-contain",ref_key:"containEle",ref:j,onTouchmove:oe,onTouchstart:se,onTouchend:ie,onTouchcancel:de,onMousedown:re,style:r([m(te),e.customContainStyle])},{default:d((()=>[p(a,{class:"sn-slider",ref_key:"sliderEle",ref:_,style:r([m(H),e.customStyle])},{default:d((()=>[p(a,{class:"sn-slider-active",style:r([m(K),e.customActiveStyle])},null,8,["style"])])),_:1},8,["style"]),p(a,{class:"sn-slider-thumb-pre",style:r([m(Q),m(Z),e.customThumbStyle])},null,8,["style"]),p(a,{class:"sn-slider-thumb-suf",style:r([m(Q),m(ee),e.customThumbStyle])},null,8,["style"]),e.showValueText?(v(),i(u,{key:0,align:"center",text:"".concat(m(D)),lines:1,style:r([m(le),e.customValueTextStyle])},null,8,["text","style"])):h("",!0)])),_:1},8,["style"])}}})),[["__scopeId","data-v-d58ea06d"]]),U=l({__name:"sn-slider",setup(l){const a=t(70),u=t(50),n=t(20),o=t(20),r=t(20),c=t(20),h=t([20,40]),x=t([20,40]),y=t([20,40]),w=t([20,40]),U=t([20,40]),O=t([20,40]);return(l=null,t=null)=>{const P=b(s("sn-topbar"),e),k=b(s("sn-slider"),V),B=b(s("sn-slider-double"),M),C=b(s("com-card"),S),D=b(s("sn-text"),g),R=b(s("sn-row"),T),N=b(s("sn-gap"),_),W=b(s("sn-page"),j);return v(),i(W,null,{default:d((()=>[p(P,{title:"Slider 滑动选择"}),p(C,{title:"基础用法",note:"和内置 Slider 组件不同的是，本组件并非使用 Draw Api 绘制。大部分场景下，不会出现大量 Slider 联动的高性能需求，使用多 DOM 布局以更好满足用户个性化需求。支持双向 Slider。"},{default:d((()=>[p(k,{modelValue:m(a),"onUpdate:modelValue":t[0]||(t[0]=(e=null)=>f(a)?a.value=e:null)},null,8,["modelValue"]),p(B,{class:"m-t-10",modelValue:m(h),"onUpdate:modelValue":t[1]||(t[1]=(e=null)=>f(h)?h.value=e:null)},null,8,["modelValue"])])),_:1}),p(C,{title:"滑块大小",note:"可以自由设置滑块大小"},{default:d((()=>[p(k,{modelValue:m(u),"onUpdate:modelValue":t[2]||(t[2]=(e=null)=>f(u)?u.value=e:null),thumbSize:"16px"},null,8,["modelValue"]),p(B,{modelValue:m(x),"onUpdate:modelValue":t[3]||(t[3]=(e=null)=>f(x)?x.value=e:null),class:"m-t-10",thumbSize:"20px",thickness:"2px",valueTextWidth:"50px",thumbBorder:"1px solid #ededed"},null,8,["modelValue"])])),_:1}),p(C,{title:"厚度",note:"调节 Slider 的显示厚度，可以更小，也可更大"},{default:d((()=>[p(k,{modelValue:m(n),"onUpdate:modelValue":t[4]||(t[4]=(e=null)=>f(n)?n.value=e:null),thickness:"15px",padding:"3px"},null,8,["modelValue"]),p(B,{modelValue:m(y),"onUpdate:modelValue":t[5]||(t[5]=(e=null)=>f(y)?y.value=e:null),class:"m-t-10",thickness:"15px",padding:"3px",valueTextWidth:"50px"},null,8,["modelValue"])])),_:1}),p(C,{title:"显示值",note:"可以显示当前数值文本"},{default:d((()=>[p(k,{modelValue:m(o),"onUpdate:modelValue":t[6]||(t[6]=(e=null)=>f(o)?o.value=e:null),showValueText:""},null,8,["modelValue"]),p(B,{modelValue:m(w),"onUpdate:modelValue":t[7]||(t[7]=(e=null)=>f(w)?w.value=e:null),class:"m-t-10",showValueText:"",valueTextWidth:"50px"},null,8,["modelValue"])])),_:1}),p(C,{title:"极值和步长",note:"可以自由设置最大值、最小值、步长。支持自动检查初始数据并纠错。"},{default:d((()=>[p(D,{class:"m-b-10",text:"最小值：10\n最大值：60\n步长：5\n当前值：".concat(m(r))},null,8,["text"]),p(k,{modelValue:m(r),"onUpdate:modelValue":t[8]||(t[8]=(e=null)=>f(r)?r.value=e:null),min:10,max:60,step:5},null,8,["modelValue"]),p(B,{class:"m-t-10",modelValue:m(O),"onUpdate:modelValue":t[9]||(t[9]=(e=null)=>f(O)?O.value=e:null),min:10,max:60,step:5},null,8,["modelValue"])])),_:1}),p(C,{title:"竖向",note:"支持设置竖向显示"},{default:d((()=>[p(R,{class:"h-250"},{default:d((()=>[p(k,{modelValue:m(c),"onUpdate:modelValue":t[10]||(t[10]=(e=null)=>f(c)?c.value=e:null),vertical:""},null,8,["modelValue"]),p(k,{class:"m-r-50",modelValue:m(c),"onUpdate:modelValue":t[11]||(t[11]=(e=null)=>f(c)?c.value=e:null),vertical:"",showValueText:""},null,8,["modelValue"]),p(B,{modelValue:m(U),"onUpdate:modelValue":t[12]||(t[12]=(e=null)=>f(U)?U.value=e:null),vertical:""},null,8,["modelValue"]),p(B,{modelValue:m(U),"onUpdate:modelValue":t[13]||(t[13]=(e=null)=>f(U)?U.value=e:null),vertical:"",showValueText:"",valueTextWidth:"60px"},null,8,["modelValue"])])),_:1})])),_:1}),p(N,{height:"50px"})])),_:1})}}});export{U as default};
