import{_ as e}from"./sn-topbar.DEOjSarq.js";import{d as l,r as t,c as a,k as u,l as n,A as o,b as d,e as s,f as i,p as r,u as m,q as c,o as v,g as p,m as h,v as f,i as x}from"./index-C41ek1zM.js";import{$ as b,r as V}from"./uni-app.es.DMEFtuWf.js";import{_ as g}from"./sn-slider.a6HQ4fTZ.js";import{b as y,c as w}from"./sn-button.CpSyIQkh.js";import{u as S}from"./useResize.BWc6k2GD.js";import{_ as T}from"./com-card.DTC2fNbY.js";import{_}from"./sn-row.4ZQqf_Dz.js";import{_ as j}from"./sn-gap.88myKfwU.js";import{_ as U}from"./sn-page.Djy77f-h.js";const M=w(l(Object.assign({name:"sn-slider"},{__name:"sn-slider-double",props:{modelValue:{type:Array,default:[0,0],validator:e=>{if(2!=e.length)throw new Error("sn-slider: v-model 必须是长度为 2 的 number[]");return!0}},vertical:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},thickness:{type:String,default:"20px"},borderRadius:{type:String,default:""},thumbBorderRadius:{type:String,default:""},thumbBorder:{type:String,default:""},thumbSize:{type:String,default:"10px"},showValueText:{type:Boolean,default:!1},valueTextWidth:{type:String,default:"30px"},customStyle:{type:Object,default:new UTSJSONObject({})},customContainStyle:{type:Object,default:new UTSJSONObject({})},customThumbStyle:{type:Object,default:new UTSJSONObject({})},customValueTextStyle:{type:Object,default:new UTSJSONObject({})},customActiveStyle:{type:Object,default:new UTSJSONObject({})}},emits:["update:modelValue","change","touchend","touchstart","touchmove","touchcancel"],setup(e,l){var x=l.emit;const g=b.utils,w=b.colors,T=x,_=e,j=t(null),U=t(null),M=t(0),O=t(0),P=t(0),k=t(0),B=t(-1);function C(e){return e=Math.min(Math.max(_.min,e),_.max),e=Math.round((e-_.min)/_.step)*_.step+_.min}function D(e){return[C(e[0]),C(e[1])]}const R=a({get:()=>_.modelValue,set:e=>{let l=D(e);T("update:modelValue",l),T("change",l[0]<l[1]?[l[0],l[1]]:[l[1],l[0]])}}),N=a((()=>Math.max((g.getPx(_.thickness)-g.getPx(_.thumbSize))/2,0))),W=a((()=>g.getPx(_.thumbSize))),z=a((()=>2*N.value+W.value)),A=a((()=>_.vertical?O.value:M.value)),E=a((()=>A.value-z.value)),J=a((()=>""==_.borderRadius?b.configs.radius.circle:_.borderRadius)),X=a((()=>""==_.thumbBorderRadius?b.configs.radius.circle:_.thumbBorderRadius)),Y=a((()=>""==_.activeColor?w.value.primary:_.activeColor)),L=a((()=>""==_.inactiveColor?w.value.infoActive:_.inactiveColor)),q=a((()=>(R.value[0]-_.min)/(_.max-_.min))),I=a((()=>(R.value[1]-_.min)/(_.max-_.min))),$=a((()=>q.value*E.value)),F=a((()=>I.value*E.value)),G=a((()=>Math.min($.value,F.value))),H=a((()=>Math.abs(F.value-$.value)+z.value)),K=a((()=>{let e=new Map;return _.vertical?(e.set("width",_.thickness),e.set("flex-direction","column")):(e.set("height",_.thickness),e.set("flex-direction","row")),e.set("border-radius",J.value),e.set("background",_.disabled?w.value.disabled:L.value),e.set("transition-duration",b.configs.aniTime.normal),e})),Q=a((()=>{let e=new Map;return _.vertical?(e.set("top",g.addPx(G.value)),e.set("width","100%"),e.set("height",g.addPx(H.value)),e.set("min-height",g.addPx(z.value)),e.set("max-height",g.addPx(O.value)),e.set("flex-direction","column")):(e.set("left",g.addPx(G.value)),e.set("height","100%"),e.set("width",g.addPx(H.value)),e.set("min-width",g.addPx(z.value)),e.set("max-width",g.addPx(M.value)),e.set("flex-direction","row")),e.set("border-radius",X.value),e.set("background",_.disabled?w.value.disabledText:Y.value),e.set("transition-duration",b.configs.aniTime.normal),e})),Z=a((()=>{let e=new Map;return e.set("width",g.addPx(W.value)),e.set("height",g.addPx(W.value)),e.set("border-radius",X.value),e.set("background","white"),e.set("border",_.thumbBorder),e.set("transition-duration",b.configs.aniTime.normal),e})),ee=a((()=>{let e=new Map;return e.set("transform","translate".concat(_.vertical?"Y":"X","(").concat($.value+N.value,"px)")),e})),le=a((()=>{let e=new Map;return e.set("transform","translate".concat(_.vertical?"Y":"X","(").concat(F.value+N.value,"px)")),e})),te=a((()=>{let e=new Map;return e.set("width",_.valueTextWidth),_.vertical?e.set("margin-top","5px"):e.set("margin-left","5px"),e})),ae=a((()=>{let e=new Map,l=Math.max(W.value,g.getPx(_.thickness));return _.vertical?(e.set("flex-direction","column"),e.set("height","100%"),e.set("width",g.addPx(Math.max(l,g.getPx(_.valueTextWidth))))):(e.set("flex-direction","row"),e.set("width","100%"),e.set("height",g.addPx(l))),e}));function ue(){var e,l,t,a,u,n;let o=null===(e=j.value)||void 0===e?void 0:e.getBoundingClientRect(),d=null===(l=U.value)||void 0===l?void 0:l.getBoundingClientRect();M.value=null!==(t=null==o?void 0:o.width)&&void 0!==t?t:0,O.value=null!==(a=null==o?void 0:o.height)&&void 0!==a?a:0,P.value=null!==(u=null==d?void 0:d.left)&&void 0!==u?u:0,k.value=null!==(n=null==d?void 0:d.top)&&void 0!==n?n:0}function ne(e,l,t){return e>=l&&e<=t}function oe(e,l){let t=_.vertical?k.value:P.value,a=((_.vertical?l:e)-t-z.value/2)/E.value;a=Math.min(Math.max(0,a),1),a=a*(_.max-_.min)+_.min,R.value[B.value]=a,R.value=R.value}function de(e){if(e.preventDefault(),_.disabled||-1==B.value)return null;let l=e.touches[0];oe(l.clientX,l.clientY),T("touchmove",e)}function se(e){if(e.preventDefault(),_.disabled||-1!=B.value)return null;let l=e.touches[0],t=function(e){for(let l=0;l<2;l++){let t=0,a=0;_.vertical?(t=k.value,a=e.clientY):(t=P.value,a=e.clientX);let u=0==l?q.value:I.value,n=t+E.value*u;if(ne(a,n,n+z.value))return l}return-1}(l);-1!=t&&(B.value=t,oe(l.clientX,l.clientY)),T("touchstart",e)}function ie(e){e.preventDefault(),B.value=-1;let l=R.value;R.value=l[0]>l[1]?[l[1],l[0]]:l,T("touchend",e.target)}function re(e){e.preventDefault(),T("touchcancel",e.target)}function me(e){if(e.preventDefault(),_.disabled)return null;T("touchstart",e)}function ce(e){if(e.preventDefault(),_.disabled||-1==B.value)return null;T("touchmove",e)}function ve(e){e.preventDefault(),T("touchend",e)}return u((()=>{R.value=D(R.value),window.addEventListener("mouseup",ve),window.addEventListener("mousemove",ce),n((()=>{ue(),S(j.value,(()=>{ue()}))}))})),o((()=>{n((()=>{ue()}))})),(l=null,t=null)=>{const a=c,u=V(d("sn-text"),y);return v(),s(a,{class:"sn-slider-contain",ref_key:"containEle",ref:U,onTouchmove:de,onTouchstart:se,onTouchend:ie,onTouchcancel:re,onMousedown:me,style:r([m(ae),e.customContainStyle])},{default:i((()=>[p(a,{class:h(["sn-slider",e.disabled?"disabled":""]),ref_key:"sliderEle",ref:j,style:r([m(K),e.customStyle])},{default:i((()=>[p(a,{class:"sn-slider-active",style:r([m(Q),e.customActiveStyle])},null,8,["style"])])),_:1},8,["class","style"]),p(a,{class:"sn-slider-thumb-pre",style:r([m(Z),m(ee),e.customThumbStyle])},null,8,["style"]),p(a,{class:"sn-slider-thumb-suf",style:r([m(Z),m(le),e.customThumbStyle])},null,8,["style"]),e.showValueText?(v(),s(u,{key:0,align:"center",text:"".concat(m(R)),lines:1,style:r([m(te),e.customValueTextStyle])},null,8,["text","style"])):f("",!0)])),_:1},8,["style"])}}})),[["__scopeId","data-v-ea275a9e"]]),O=l({__name:"sn-slider",setup(l){const a=t(70),u=t(50),n=t(20),o=t(20),r=t(20),c=t(20),h=t([20,40]),f=t([20,40]),b=t([20,40]),w=t([20,40]),S=t([20,40]),O=t([20,40]);return(l=null,t=null)=>{const P=V(d("sn-topbar"),e),k=V(d("sn-slider"),g),B=V(d("sn-slider-double"),M),C=V(d("com-card"),T),D=V(d("sn-text"),y),R=V(d("sn-row"),_),N=V(d("sn-gap"),j),W=V(d("sn-page"),U);return v(),s(W,null,{default:i((()=>[p(P,{title:"Slider 滑动选择"}),p(C,{title:"基础用法",note:"和内置 Slider 组件不同的是，本组件并非使用 Draw Api 绘制。大部分场景下，不会出现大量 Slider 联动的高性能需求，使用多 DOM 布局以更好满足用户个性化需求。支持双向 Slider。"},{default:i((()=>[p(k,{modelValue:m(a),"onUpdate:modelValue":t[0]||(t[0]=(e=null)=>x(a)?a.value=e:null)},null,8,["modelValue"]),p(B,{class:"m-t-10",modelValue:m(h),"onUpdate:modelValue":t[1]||(t[1]=(e=null)=>x(h)?h.value=e:null)},null,8,["modelValue"])])),_:1}),p(C,{title:"滑块大小",note:"可以自由设置滑块大小"},{default:i((()=>[p(k,{modelValue:m(u),"onUpdate:modelValue":t[2]||(t[2]=(e=null)=>x(u)?u.value=e:null),thumbSize:"16px"},null,8,["modelValue"]),p(B,{modelValue:m(f),"onUpdate:modelValue":t[3]||(t[3]=(e=null)=>x(f)?f.value=e:null),class:"m-t-10",thumbSize:"20px",thickness:"2px",valueTextWidth:"50px",thumbBorder:"1px solid #ededed"},null,8,["modelValue"])])),_:1}),p(C,{title:"厚度",note:"调节 Slider 的显示厚度，可以更小，也可更大"},{default:i((()=>[p(k,{modelValue:m(n),"onUpdate:modelValue":t[4]||(t[4]=(e=null)=>x(n)?n.value=e:null),thickness:"15px",padding:"3px"},null,8,["modelValue"]),p(B,{modelValue:m(b),"onUpdate:modelValue":t[5]||(t[5]=(e=null)=>x(b)?b.value=e:null),class:"m-t-10",thickness:"15px",padding:"3px",valueTextWidth:"50px"},null,8,["modelValue"])])),_:1}),p(C,{title:"显示值",note:"可以显示当前数值文本"},{default:i((()=>[p(k,{modelValue:m(o),"onUpdate:modelValue":t[6]||(t[6]=(e=null)=>x(o)?o.value=e:null),showValueText:""},null,8,["modelValue"]),p(B,{modelValue:m(w),"onUpdate:modelValue":t[7]||(t[7]=(e=null)=>x(w)?w.value=e:null),class:"m-t-10",showValueText:"",valueTextWidth:"50px"},null,8,["modelValue"])])),_:1}),p(C,{title:"极值和步长",note:"可以自由设置最大值、最小值、步长。支持自动检查初始数据并纠错。"},{default:i((()=>[p(D,{class:"m-b-10",text:"最小值：10\n最大值：60\n步长：5\n当前值：".concat(m(r))},null,8,["text"]),p(k,{modelValue:m(r),"onUpdate:modelValue":t[8]||(t[8]=(e=null)=>x(r)?r.value=e:null),min:10,max:60,step:5},null,8,["modelValue"]),p(B,{class:"m-t-10",modelValue:m(O),"onUpdate:modelValue":t[9]||(t[9]=(e=null)=>x(O)?O.value=e:null),min:10,max:60,step:5},null,8,["modelValue"])])),_:1}),p(C,{title:"竖向",note:"支持设置竖向显示"},{default:i((()=>[p(R,{class:"h-250"},{default:i((()=>[p(k,{modelValue:m(c),"onUpdate:modelValue":t[10]||(t[10]=(e=null)=>x(c)?c.value=e:null),vertical:""},null,8,["modelValue"]),p(k,{class:"m-r-50",modelValue:m(c),"onUpdate:modelValue":t[11]||(t[11]=(e=null)=>x(c)?c.value=e:null),vertical:"",showValueText:""},null,8,["modelValue"]),p(B,{modelValue:m(S),"onUpdate:modelValue":t[12]||(t[12]=(e=null)=>x(S)?S.value=e:null),vertical:""},null,8,["modelValue"]),p(B,{modelValue:m(S),"onUpdate:modelValue":t[13]||(t[13]=(e=null)=>x(S)?S.value=e:null),vertical:"",showValueText:"",valueTextWidth:"60px"},null,8,["modelValue"])])),_:1})])),_:1}),p(C,{title:"禁用",note:"支持设置禁用"},{default:i((()=>[p(k,{modelValue:m(n),"onUpdate:modelValue":t[14]||(t[14]=(e=null)=>x(n)?n.value=e:null),disabled:""},null,8,["modelValue"]),p(B,{modelValue:m(b),"onUpdate:modelValue":t[15]||(t[15]=(e=null)=>x(b)?b.value=e:null),class:"m-t-10",disabled:"",valueTextWidth:"50px"},null,8,["modelValue"])])),_:1}),p(N,{height:"50px"})])),_:1})}}});export{O as default};
