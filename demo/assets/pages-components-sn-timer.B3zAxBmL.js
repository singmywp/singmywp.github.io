import{_ as t,a as e}from"./sn-topbar.DxKzInQK.js";import{d as a,$ as l,r as s,c as n,l as o,x as r,a as c,B as u,y as i,f as m,u as p,al as f,o as d,b as y,e as v,j as S}from"./index-DoInGK9X.js";import{r as x}from"./uni-app.es.K1mZmM8s.js";import{b as _,a as h,_ as g,c as j}from"./sn-button.B1LvAG78.js";import{_ as b}from"./com-card.D8_7_rS9.js";import{_ as H}from"./sn-tag.BJVGy74E.js";import{_ as D}from"./sn-page.Nlp4LDKz.js";const O=a(Object.assign({name:"sn-timer"},{__name:"sn-timer",props:{format:{type:String,default:"HH:mm:ss"},autoplay:{type:Boolean,default:!0},millisecond:{type:Boolean,default:!1},textSize:{type:String,default:""},textColor:{type:String,default:""},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["change"],setup(t,e){var a=e.expose,d=e.emit;const y=l.colors,v=d,S=t,h=s(0),g=s(0),j=s(!1);function b(){clearInterval(g.value),g.value=0}function H(t){const e=1e3,a=60*e,l=60*a,s=24*l,n=Math.floor(t/s),o=Math.floor(t%s/l),r=Math.floor(t%l/a),c=Math.floor(t%a/e),u=Math.floor(t%e);return new f({d:n,h:o,m:r,s:c,ms:u})}function D(){j.value=!1,b()}function O(){if(j.value)return null;var t;j.value=!0,t=S.millisecond?10:1e3,b(),g.value=setInterval((()=>{j.value&&(h.value+=t,v("change",H(h.value)))}),t)}function M(){D(),h.value=0,S.autoplay&&O()}a({start:O,pause:D,reset:M});const z=n((()=>i("font",S.textSize,l.configs.font.baseSize))),C=n((()=>i("color",S.textColor,y.value.text))),$=n((()=>function(t,e){let a=e.d,l=e.h,s=e.m,n=e.s,o=e.ms;return-1==t.indexOf("DD")?l+=24*a:t=t.replace("DD","".concat(a).padStart(2,"0")),-1==t.indexOf("HH")?s+=60*l:t=t.replace("HH","".concat(l).padStart(2,"0")),-1==t.indexOf("mm")?n+=60*s:t=t.replace("mm","".concat(s).padStart(2,"0")),-1==t.indexOf("ss")?o+=1e3*n:t=t.replace("ss","".concat(n).padStart(2,"0")),t.replace("SSS","".concat(o).padStart(3,"0")).replace("SS","".concat(Math.trunc(o/10)).padStart(2,"0")).replace("S","".concat(Math.trunc(o/100)))}(S.format,H(h.value))));return o((()=>{M()})),r((()=>{b()})),(e=null,a=null)=>{const l=x(c("sn-text"),_);return u(e.$slots,"default",{},(()=>[m(l,{text:p($),color:p(C),size:p(z),customStyle:t.customStyle},null,8,["text","color","size","customStyle"])]))}}})),M=j(a({__name:"sn-timer",setup(a){l.colors;const n=s(!1),o=s(new f({d:0,h:0,m:0,s:0,ms:0})),r=s(null);function u(t){o.value=t}function i(){n.value=!n.value,n.value?r.value.start():r.value.pause()}function j(){n.value=!1,r.value.reset()}return(a=null,l=null)=>{const s=x(c("sn-topbar"),t),f=x(c("sn-timer"),O),M=x(c("com-card"),b),z=x(c("sn-tag"),H),C=x(c("sn-text"),_),$=x(c("sn-row"),e),k=x(c("sn-icon"),h),w=x(c("sn-button"),g),B=S,I=x(c("sn-page"),D);return d(),y(I,null,{default:v((()=>[m(s,{title:"Timer 计时器"}),m(M,{title:"基础用法",note:"顾名思义，就是一个计时器。\\n推荐使用插槽布局为主，样式更好调。"},{default:v((()=>[m(f)])),_:1}),m(M,{title:"自定义样式",note:"可以自由设置文本的颜色和大小等样式"},{default:v((()=>[m(f,{textSize:"$3",textColor:"$successDark",customStyle:{fontFamily:"alipuhuiheavy"}})])),_:1}),m(M,{title:"格式化",note:"计时器内置文字支持时间格式化（参照Day.js）。"},{default:v((()=>[m(f,{format:"DD 天 HH 小时 mm 分钟 ss 秒"})])),_:1}),m(M,{title:"毫秒精度",note:"虽然使用一般模式也支持获取毫秒，但误差极大，不如此模式精确。"},{default:v((()=>[m(f,{format:"mm:ss.SS",millisecond:""})])),_:1}),m(M,{title:"插槽",note:"推荐使用插槽模式，自由度更高。"},{default:v((()=>[m(f,{millisecond:"",onChange:u},{default:v((()=>[m($,null,{default:v((()=>[m(z,{class:"spacing",type:"primary",text:"".concat(p(o).h)},null,8,["text"]),m(C,{class:"spacing",text:"时",font:"alipuhuiheavy"}),m(z,{class:"spacing",type:"primary",text:"".concat(p(o).m)},null,8,["text"]),m(C,{class:"spacing",text:"分",font:"alipuhuiheavy"}),m(z,{class:"spacing",type:"primary",text:"".concat(p(o).s)},null,8,["text"]),m(C,{class:"spacing",text:"秒",font:"alipuhuiheavy"})])),_:1})])),_:1})])),_:1}),m(M,{title:"自由控制",note:"提供 API 以自由控制计时器的状态。"},{default:v((()=>[m(B,{class:"align-items-center"},{default:v((()=>[m(f,{ref_key:"timerEle",ref:r,format:"mm:ss.SS",millisecond:"",autoplay:!1},null,512),m($,{class:"m-t-10",align:"center"},{default:v((()=>[m(w,{onClick:j},{default:v((()=>[m(k,{name:"refresh-line"})])),_:1}),m(w,{class:"m-l-10",type:"primary",level:"second",onClick:i},{default:v((()=>[m(k,{color:"$primary",name:"".concat(p(n)?"pause":"play","-fill")},null,8,["name"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a5c65ba4"]]);export{M as default};
