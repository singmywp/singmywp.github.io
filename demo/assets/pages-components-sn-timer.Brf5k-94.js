import{_ as t,a as e}from"./sn-topbar.DGNmRcUY.js";import{d as a,r as l,c as s,k as n,y as o,b as r,t as u,g as c,u as i,o as m,e as p,f,p as d}from"./index-D82xabMX.js";import{$ as y,r as x,s as v}from"./uni-app.es.Cv0ss-rw.js";import{b as S,a as _,_ as h,c as g}from"./sn-button.CJ0ZsVkl.js";import{_ as j}from"./com-card.2Ru7Wd6o.js";import{_ as b}from"./sn-tag.zoD9q8fg.js";import{_ as z}from"./sn-row.DBw4p-E_.js";import{_ as C}from"./sn-page.CIc3m52K.js";const D=a(Object.assign({name:"sn-timer"},{__name:"sn-timer",props:{format:{type:String,default:"HH:mm:ss"},autoplay:{type:Boolean,default:!0},millisecond:{type:Boolean,default:!1},textSize:{type:String,default:""},textColor:{type:String,default:""},customStyle:{type:Object,default:{}}},emits:["change"],setup(t,e){var a=e.expose,m=e.emit;const p=y.colors,f=m,d=t,_=l(0),h=l(0),g=l(!1);function j(){clearInterval(h.value),h.value=0}function b(t){const e=1e3,a=60*e,l=60*a,s=24*l,n=Math.floor(t/s),o=Math.floor(t%s/l),r=Math.floor(t%l/a),u=Math.floor(t%a/e),c=Math.floor(t%e);return new v({d:n,h:o,m:r,s:u,ms:c})}function z(){g.value=!1,j()}function C(){if(g.value)return null;var t;g.value=!0,t=d.millisecond?10:1e3,j(),h.value=setInterval((()=>{g.value&&(_.value+=t,f("change",b(_.value)))}),t)}function D(){z(),_.value=0,d.autoplay&&C()}a({start:C,pause:z,reset:D});const H=s((()=>""==d.textSize?y.configs.font.baseSize:d.textSize)),M=s((()=>""==d.textColor?p.value.text:d.textColor)),O=s((()=>function(t,e){let a=e.d,l=e.h,s=e.m,n=e.s,o=e.ms;return-1==t.indexOf("DD")?l+=24*a:t=t.replace("DD","".concat(a).padStart(2,"0")),-1==t.indexOf("HH")?s+=60*l:t=t.replace("HH","".concat(l).padStart(2,"0")),-1==t.indexOf("mm")?n+=60*s:t=t.replace("mm","".concat(s).padStart(2,"0")),-1==t.indexOf("ss")?o+=1e3*n:t=t.replace("ss","".concat(n).padStart(2,"0")),t.replace("SSS","".concat(o).padStart(3,"0")).replace("SS","".concat(Math.trunc(o/10)).padStart(2,"0")).replace("S","".concat(Math.trunc(o/100)))}(d.format,b(_.value))));return n((()=>{D()})),o((()=>{j()})),(e=null,a=null)=>{const l=x(r("sn-text"),S);return u(e.$slots,"default",{},(()=>[c(l,{text:i(O),color:i(M),size:i(H),customStyle:t.customStyle},null,8,["text","color","size","customStyle"])]))}}})),H=g(a({__name:"sn-timer",setup(a){const s=y.colors,n=l(!1),o=l(new v({d:0,h:0,m:0,s:0,ms:0})),u=l(null);function g(t){o.value=t}function H(){n.value=!n.value,n.value?u.value.start():u.value.pause()}function M(){n.value=!1,u.value.reset()}return(a=null,l=null)=>{const v=x(r("sn-topbar"),t),O=x(r("sn-timer"),D),k=x(r("com-card"),j),w=x(r("sn-tag"),b),I=x(r("sn-text"),S),B=x(r("sn-row"),z),$=x(r("sn-icon"),_),q=x(r("sn-button"),h),A=x(r("sn-button-group"),e),E=d,F=x(r("sn-page"),C);return m(),p(F,null,{default:f((()=>[c(v,{title:"Timer 计时器"}),c(k,{title:"基础用法",note:"顾名思义，就是一个计时器。\\n推荐使用插槽布局为主，样式更好调。"},{default:f((()=>[c(O)])),_:1}),c(k,{title:"自定义样式",note:"可以自由设置文本的颜色和大小等样式"},{default:f((()=>[c(O,{textColor:i(s).successDark,textSize:i(y).configs.font.size(3),customStyle:{fontFamily:"alipuhuiheavy"}},null,8,["textColor","textSize"])])),_:1}),c(k,{title:"格式化",note:"计时器内置文字支持时间格式化（参照Day.js）。"},{default:f((()=>[c(O,{format:"DD 天 HH 小时 mm 分钟 ss 秒"})])),_:1}),c(k,{title:"毫秒精度",note:"虽然使用一般模式也支持获取毫秒，但误差极大，不如此模式精确。"},{default:f((()=>[c(O,{format:"mm:ss.SS",millisecond:""})])),_:1}),c(k,{title:"插槽",note:"推荐使用插槽模式，自由度更高。"},{default:f((()=>[c(O,{millisecond:"",onChange:g},{default:f((()=>[c(B,null,{default:f((()=>[c(w,{class:"spacing",type:"primary",text:"".concat(i(o).h)},null,8,["text"]),c(I,{class:"spacing",text:"时",font:"alipuhuiheavy"}),c(w,{class:"spacing",type:"primary",text:"".concat(i(o).m)},null,8,["text"]),c(I,{class:"spacing",text:"分",font:"alipuhuiheavy"}),c(w,{class:"spacing",type:"primary",text:"".concat(i(o).s)},null,8,["text"]),c(I,{class:"spacing",text:"秒",font:"alipuhuiheavy"})])),_:1})])),_:1})])),_:1}),c(k,{title:"自由控制",note:"提供 API 以自由控制计时器的状态。"},{default:f((()=>[c(E,{class:"align-items-center"},{default:f((()=>[c(O,{ref_key:"timerEle",ref:u,format:"mm:ss.SS",millisecond:"",autoplay:!1},null,512),c(A,{class:"m-t-10",align:"center"},{default:f((()=>[c(q,{onClick:M},{default:f((()=>[c($,{name:"refresh-line"})])),_:1}),c(q,{class:"m-l-10",type:"primary",level:"second",onClick:H},{default:f((()=>[c($,{name:"".concat(i(n)?"pause":"play","-fill"),color:i(s).primary},null,8,["name","color"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ce430d4a"]]);export{H as default};
