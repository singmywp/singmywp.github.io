import{_ as t,a as e}from"./sn-topbar.wm0GzhH3.js";import{d as a,$ as l,r as s,c as n,o,v as r,a as c,z as u,x as i,g as m,u as p,D as f,b as d,e as v,f as y,_ as S}from"./index-DYMgrqHp.js";import{r as x}from"./uni-app.es.DgDfNdgy.js";import{a as _,_ as h,b as g}from"./sn-text.euomPoe8.js";import{_ as j}from"./com-card.BtLNzB63.js";import{_ as b}from"./sn-tag.Bvg8GfrB.js";import{_ as D}from"./sn-button.BjZePiC5.js";import{_ as H}from"./sn-page.Cf6LEMVT.js";import"./sn-menu-item.DkjoXkWj.js";import"./sn-overlay.CiZFgEyq.js";import"./sn-loading.t5otRKvs.js";const O=a(Object.assign({name:"sn-timer"},{__name:"sn-timer",props:{format:{type:String,default:"HH:mm:ss"},autoplay:{type:Boolean,default:!0},millisecond:{type:Boolean,default:!1},textSize:{type:String,default:""},textColor:{type:String,default:""},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["change"],setup(t,e){var a=e.expose,d=e.emit;const v=l.colors,y=d,S=t,h=s(0),g=s(0),j=s(!1);function b(){clearInterval(g.value),g.value=0}function D(t){const e=1e3,a=60*e,l=60*a,s=24*l,n=Math.floor(t/s),o=Math.floor(t%s/l),r=Math.floor(t%l/a),c=Math.floor(t%a/e),u=Math.floor(t%e);return new f({d:n,h:o,m:r,s:c,ms:u})}function H(){j.value=!1,b()}function O(){if(j.value)return null;var t;j.value=!0,t=S.millisecond?10:1e3,b(),g.value=setInterval((()=>{j.value&&(h.value+=t,y("change",D(h.value)))}),t)}function z(){H(),h.value=0,S.autoplay&&O()}a({start:O,pause:H,reset:z});const M=n((()=>i("font",S.textSize,l.configs.font.baseSize))),C=n((()=>i("color",S.textColor,v.value.text))),$=n((()=>function(t,e){let a=e.d,l=e.h,s=e.m,n=e.s,o=e.ms;return-1==t.indexOf("DD")?l+=24*a:t=t.replace("DD","".concat(a).padStart(2,"0")),-1==t.indexOf("HH")?s+=60*l:t=t.replace("HH","".concat(l).padStart(2,"0")),-1==t.indexOf("mm")?n+=60*s:t=t.replace("mm","".concat(s).padStart(2,"0")),-1==t.indexOf("ss")?o+=1e3*n:t=t.replace("ss","".concat(n).padStart(2,"0")),t.replace("SSS","".concat(o).padStart(3,"0")).replace("SS","".concat(Math.trunc(o/10)).padStart(2,"0")).replace("S","".concat(Math.trunc(o/100)))}(S.format,D(h.value))));return o((()=>{z()})),r((()=>{b()})),(e=null,a=null)=>{const l=x(c("sn-text"),_);return u(e.$slots,"default",{},(()=>[m(l,{text:p($),color:p(C),size:p(M),customStyle:t.customStyle},null,8,["text","color","size","customStyle"])]))}}})),z=g(a({__name:"sn-timer",setup(a){l.colors;const n=s(!1),o=s(new f({d:0,h:0,m:0,s:0,ms:0})),r=s(null);function u(t){o.value=t}function i(){n.value=!n.value,n.value?r.value.start():r.value.pause()}function g(){n.value=!1,r.value.reset()}return(a=null,l=null)=>{const s=x(c("sn-topbar"),t),f=x(c("sn-timer"),O),z=x(c("com-card"),j),M=x(c("sn-tag"),b),C=x(c("sn-text"),_),$=x(c("sn-row"),e),k=x(c("sn-icon"),h),w=x(c("sn-button"),D),I=S,B=x(c("sn-page"),H);return d(),v(B,null,{default:y((()=>[m(s,{title:"Timer 计时器"}),m(z,{title:"基础用法",note:"顾名思义，就是一个计时器。\\n推荐使用插槽布局为主，样式更好调。"},{default:y((()=>[m(f)])),_:1}),m(z,{title:"自定义样式",note:"可以自由设置文本的颜色和大小等样式"},{default:y((()=>[m(f,{textSize:"$3",textColor:"$successDark",customStyle:{fontFamily:"alipuhuiheavy"}})])),_:1}),m(z,{title:"格式化",note:"计时器内置文字支持时间格式化（参照Day.js）。"},{default:y((()=>[m(f,{format:"DD 天 HH 小时 mm 分钟 ss 秒"})])),_:1}),m(z,{title:"毫秒精度",note:"虽然使用一般模式也支持获取毫秒，但误差极大，不如此模式精确。"},{default:y((()=>[m(f,{format:"mm:ss.SS",millisecond:""})])),_:1}),m(z,{title:"插槽",note:"推荐使用插槽模式，自由度更高。"},{default:y((()=>[m(f,{millisecond:"",onChange:u},{default:y((()=>[m($,null,{default:y((()=>[m(M,{class:"spacing",type:"primary",text:"".concat(p(o).h)},null,8,["text"]),m(C,{class:"spacing",text:"时",font:"alipuhuiheavy"}),m(M,{class:"spacing",type:"primary",text:"".concat(p(o).m)},null,8,["text"]),m(C,{class:"spacing",text:"分",font:"alipuhuiheavy"}),m(M,{class:"spacing",type:"primary",text:"".concat(p(o).s)},null,8,["text"]),m(C,{class:"spacing",text:"秒",font:"alipuhuiheavy"})])),_:1})])),_:1})])),_:1}),m(z,{title:"自由控制",note:"提供 API 以自由控制计时器的状态。"},{default:y((()=>[m(I,{class:"align-items-center"},{default:y((()=>[m(f,{ref_key:"timerEle",ref:r,format:"mm:ss.SS",millisecond:"",autoplay:!1},null,512),m($,{class:"m-t-10",align:"center"},{default:y((()=>[m(w,{onClick:g},{default:y((()=>[m(k,{name:"refresh-line"})])),_:1}),m(w,{class:"m-l-10",type:"primary",level:"second",onClick:i},{default:y((()=>[m(k,{color:"$primary",name:"".concat(p(n)?"pause":"play","-fill")},null,8,["name"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-7a4ca1ed"]]);export{z as default};
