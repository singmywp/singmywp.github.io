import{d as e,$ as t,r as a,c as l,a as s,b as o,e as r,q as i,u as n,z as c,j as u,o as d,v as p,P as m,Q as f,a7 as g,M as v,O as y}from"./index-BDGnenFq.js";import{a as S,c as b}from"./sn-button.DCeBN0oM.js";import{r as k}from"./uni-app.es.BfR9KIrQ.js";const h=b(e(Object.assign({name:"sn-avatar"},{__name:"sn-avatar",props:{mode:{type:String,default:"image"},imageMode:{type:String,default:"scaleToFill"},src:{type:String,default:""},text:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"40px"},textSize:{type:String,default:"25px"},textColor:{type:String,default:""},iconSize:{type:String,default:"25px"},iconColor:{type:String,default:""},bgColor:{type:String,default:""},shape:{type:String,default:"square"},borderRadius:{type:String,default:""},enablePreview:{type:Boolean,default:!1},customStyle:{type:Object,default:new UTSJSONObject({})},customTextStyle:{type:Object,default:new UTSJSONObject({})},customIconStyle:{type:Object,default:new UTSJSONObject({})}},emits:["click","dbclick","load","error","longpress"],setup(e,b){var h=b.emit;const x=t.colors,z=h,j=e,w=a(!1),O=a(null),T=a("click"),C=l((()=>["image","text","icon"].includes(j.mode)?j.mode:"image"));l((()=>j.shape));const _=l((()=>t.configs.app.theme)),M=l((()=>{let e="light"==_.value?x.value.infoDark:x.value.dark;return c("color",j.iconColor,e)})),I=l((()=>c("color",j.bgColor,x.value.info))),J=l((()=>{let e="light"==_.value?x.value.infoDark:x.value.dark;return c("color",j.textColor,e)})),L=l((()=>c("borderRadius",j.borderRadius,t.configs.radius.xsmall))),N=l((()=>{let e=new Map;return e.set("width",j.size),e.set("height",j.size),e.set("border-radius","circle"!=j.shape?L.value:t.configs.radius.circle),e.set("transition-duration",t.configs.aniTime.normal),e})),P=l((()=>{let e=new Map;return e.set("width",j.size),e.set("height",j.size),e.set("border-radius","circle"!=j.shape?L.value:t.configs.radius.circle),e.set("background",w.value?x.value.disabled:I.value),e.set("transition-duration",t.configs.aniTime.normal),e})),R=l((()=>{let e=new Map;return e.set("color",J.value),e.set("font-size",j.textSize),e}));function U(e){z("load",e)}function q(e){w.value=!0,z("error",e)}function A(e){setTimeout((()=>{j.enablePreview&&!w.value&&"image"==C.value&&"click"==T.value&&g({urls:[j.src]})}),300),null==O.value?(O.value=setTimeout((()=>{O.value=null}),300),T.value="click"):(clearTimeout(O.value),O.value=null,T.value="dbclick"),z("click"==T.value?"click":"dbclick",e)}function D(e){z("longpress",e)}return(t=null,a=null)=>{const l=v,c=y,g=k(s("sn-icon"),S),b=u;return d(),o(b,{class:"sn-avatar",style:i([n(N)])},{default:r((()=>["image"!=n(C)||n(w)?p("",!0):(d(),o(l,{key:0,class:"sn-avatar-image","fade-show":"",mode:e.imageMode,src:e.src,onLoad:U,onError:q,onClick:A,onLongpress:D,style:i([n(N),e.customStyle])},null,8,["mode","src","style"])),"image"!=n(C)||n(w)?(d(),o(b,{key:1,class:"sn-avatar-placeholder",style:i([n(P),e.customStyle]),onLongpress:D,onClick:A},{default:r((()=>["text"==n(C)?(d(),o(c,{key:0,class:"sn-avatar-placeholder-text",style:i([n(R),e.customTextStyle])},{default:r((()=>[m(f(e.text.charAt(0)),1)])),_:1},8,["style"])):"icon"==n(C)||n(w)?(d(),o(g,{key:1,class:"sn-avatar-placeholder-icon",color:n(w)?n(x).errorActive:n(M),name:n(w)?"close-circle-fill":e.icon,size:e.iconSize,customStyle:e.customIconStyle},null,8,["color","name","size","customStyle"])):p("",!0)])),_:1},8,["style"])):p("",!0)])),_:1},8,["style"])}}})),[["__scopeId","data-v-fcd3c92a"]]);export{h as _};
