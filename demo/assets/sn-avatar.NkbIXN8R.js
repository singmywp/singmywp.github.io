import{d as e,$ as t,r as a,c as s,a as l,b as o,e as r,q as i,u as n,y as c,j as u,o as d,C as p,B as m,P as f,Q as g,a7 as y,M as v,O as S}from"./index-DoInGK9X.js";import{a as b,c as h}from"./sn-button.B1LvAG78.js";import{r as k}from"./uni-app.es.K1mZmM8s.js";const x=h(e(Object.assign({name:"sn-avatar"},{__name:"sn-avatar",props:{mode:{type:String,default:"image"},imageMode:{type:String,default:"scaleToFill"},src:{type:String,default:""},text:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"40px"},textSize:{type:String,default:"25px"},textColor:{type:String,default:""},iconSize:{type:String,default:"25px"},iconColor:{type:String,default:""},bgColor:{type:String,default:""},shape:{type:String,default:"square"},borderRadius:{type:String,default:""},enablePreview:{type:Boolean,default:!1},customStyle:{type:Object,default:new UTSJSONObject({})},customTextStyle:{type:Object,default:new UTSJSONObject({})},customIconStyle:{type:Object,default:new UTSJSONObject({})}},emits:["click","dbclick","load","error","longpress"],setup(e,h){var x=h.emit;const z=t.utils,j=t.colors,w=x,O=e,C=z.randomComId(),T=a(!1),_=a(0),M=s((()=>["image","text","icon"].includes(O.mode)?O.mode:"image"));s((()=>O.shape));const I=s((()=>t.configs.app.theme)),B=s((()=>{let e="light"==I.value?j.value.infoDark:j.value.dark;return c("color",O.iconColor,e)})),J=s((()=>c("color",O.bgColor,j.value.info))),L=s((()=>{let e="light"==I.value?j.value.infoDark:j.value.dark;return c("color",O.textColor,e)})),N=s((()=>c("radius",O.borderRadius,t.configs.radius.xsmall))),P=s((()=>{let e=new Map;return e.set("width",O.size),e.set("height",O.size),e.set("border-radius","circle"!=O.shape?N.value:t.configs.radius.circle),e.set("transition-duration",t.configs.aniTime.normal),e})),U=s((()=>{let e=new Map;return e.set("width",O.size),e.set("height",O.size),e.set("border-radius","circle"!=O.shape?N.value:t.configs.radius.circle),e.set("background",T.value?j.value.disabled:J.value),e.set("transition-duration",t.configs.aniTime.normal),e})),q=s((()=>{let e=new Map;return e.set("color",L.value),e.set("font-size",O.textSize),e}));function A(e){w("load",e)}function D(e){T.value=!0,w("error",e)}function R(e){_.value++;let t="click";z.throttle((()=>{1==_.value?(t="click",O.enablePreview&&!T.value&&"image"==M.value&&y({urls:[O.src]})):_.value>=2&&(t="dbclick"),_.value=0,w("click"==t?"click":"dbclick",e)}),200,C)}function $(e){w("longpress",e)}return(t=null,a=null)=>{const s=v,c=S,y=k(l("sn-icon"),b),h=u;return d(),o(h,{class:"sn-avatar",style:i([n(P)])},{default:r((()=>["image"!=n(M)||n(T)?p("",!0):(d(),o(s,{key:0,class:"sn-avatar-image","fade-show":"",mode:e.imageMode,src:e.src,onLoad:A,onError:D,onClick:R,onLongpress:$,style:i([n(P),e.customStyle])},null,8,["mode","src","style"])),"image"!=n(M)||n(T)?(d(),o(h,{key:1,class:"sn-avatar-placeholder",style:i([n(U),e.customStyle]),onLongpress:$,onClick:R},{default:r((()=>[m(t.$slots,"default",{},(()=>["text"==n(M)?(d(),o(c,{key:0,class:"sn-avatar-placeholder-text",style:i([n(q),e.customTextStyle])},{default:r((()=>[f(g(e.text.charAt(0)),1)])),_:1},8,["style"])):"icon"==n(M)||n(T)?(d(),o(y,{key:1,class:"sn-avatar-placeholder-icon",color:n(T)?n(j).errorActive:n(B),name:n(T)?"close-circle-fill":e.icon,size:e.iconSize,customStyle:e.customIconStyle},null,8,["color","name","size","customStyle"])):p("",!0)]),!0)])),_:3},8,["style"])):p("",!0)])),_:3},8,["style"])}}})),[["__scopeId","data-v-a09947f4"]]);export{x as _};
