import{d as e,$ as t,r as a,c as s,a as l,e as o,f as r,p as i,u as n,x as c,_ as u,b as d,B as p,z as m,O as f,P as g,aa as y,L as S,N as v}from"./index-DYMgrqHp.js";import{_ as b,b as h}from"./sn-text.euomPoe8.js";import{r as k}from"./uni-app.es.DgDfNdgy.js";const x=h(e(Object.assign({name:"sn-avatar"},{__name:"sn-avatar",props:{mode:{type:String,default:"image"},imageMode:{type:String,default:"scaleToFill"},src:{type:String,default:""},text:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:"40px"},textSize:{type:String,default:"25px"},textColor:{type:String,default:""},iconSize:{type:String,default:"25px"},iconColor:{type:String,default:""},bgColor:{type:String,default:""},shape:{type:String,default:"square"},borderRadius:{type:String,default:""},enablePreview:{type:Boolean,default:!1},customStyle:{type:Object,default:new UTSJSONObject({})},customTextStyle:{type:Object,default:new UTSJSONObject({})},customIconStyle:{type:Object,default:new UTSJSONObject({})}},emits:["click","dbclick","load","error","longpress"],setup(e,h){var x=h.emit;const z=t.utils,w=t.colors,O=x,j=e,_=z.randomComId(),C=a(!1),T=a(0),M=s((()=>["image","text","icon"].includes(j.mode)?j.mode:"image"));s((()=>j.shape));const I=s((()=>t.configs.app.theme)),J=s((()=>{let e="light"==I.value?w.value.infoDark:w.value.dark;return c("color",j.iconColor,e)})),L=s((()=>c("color",j.bgColor,w.value.info))),N=s((()=>{let e="light"==I.value?w.value.infoDark:w.value.dark;return c("color",j.textColor,e)})),P=s((()=>c("radius",j.borderRadius,t.configs.radius.xsmall))),U=s((()=>{const e=new Map;return e.set("width",j.size),e.set("height",j.size),e.set("border-radius","circle"!=j.shape?P.value:t.configs.radius.circle),e.set("transition-duration",t.configs.aniTime.normal),e})),A=s((()=>{const e=new Map;return e.set("width",j.size),e.set("height",j.size),e.set("border-radius","circle"!=j.shape?P.value:t.configs.radius.circle),e.set("background",C.value?w.value.disabled:L.value),e.set("transition-duration",t.configs.aniTime.normal),e})),B=s((()=>{const e=new Map;return e.set("color",N.value),e.set("font-size",j.textSize),e}));function D(e){O("load",e)}function R(e){C.value=!0,O("error",e)}function $(e){T.value++;let t="click";z.throttle((()=>{1==T.value?(t="click",j.enablePreview&&!C.value&&"image"==M.value&&y({urls:[j.src]})):T.value>=2&&(t="dbclick"),T.value=0,O("click"==t?"click":"dbclick",e)}),200,_)}function q(e){O("longpress",e)}return(t=null,a=null)=>{const s=S,c=v,y=k(l("sn-icon"),b),h=u;return d(),o(h,{class:"sn-avatar",style:i([n(U)])},{default:r((()=>["image"!=n(M)||n(C)?p("",!0):(d(),o(s,{key:0,class:"sn-avatar-image","fade-show":"",mode:e.imageMode,src:e.src,onLoad:D,onError:R,onClick:$,onLongpress:q,style:i([n(U),e.customStyle])},null,8,["mode","src","style"])),"image"!=n(M)||n(C)?(d(),o(h,{key:1,class:"sn-avatar-placeholder",style:i([n(A),e.customStyle]),onLongpress:q,onClick:$},{default:r((()=>[m(t.$slots,"default",{},(()=>["text"==n(M)?(d(),o(c,{key:0,class:"sn-avatar-placeholder-text",style:i([n(B),e.customTextStyle])},{default:r((()=>[f(g(e.text.charAt(0)),1)])),_:1},8,["style"])):"icon"==n(M)||n(C)?(d(),o(y,{key:1,class:"sn-avatar-placeholder-icon",color:n(C)?n(w).errorActive:n(J),name:n(C)?"close-circle-fill":e.icon,size:e.iconSize,customStyle:e.customIconStyle},null,8,["color","name","size","customStyle"])):p("",!0)]),!0)])),_:3},8,["style"])):p("",!0)])),_:3},8,["style"])}}})),[["__scopeId","data-v-7fa80314"]]);export{x as _};
