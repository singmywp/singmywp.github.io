import{d as e,$ as t,r as a,c as l,a as o,b as s,e as n,u as i,z as r,m as u,o as d,f as c,q as p,v,t as f,p as m,D as g,j as h}from"./index-BDGnenFq.js";import{_ as y}from"./sn-view.D-czNReK.js";import{a as b,r as x}from"./uni-app.es.BfR9KIrQ.js";import{b as k}from"./sn-topbar.D5ol6wWa.js";import{c as w}from"./sn-button.DCeBN0oM.js";const S=w(e(Object.assign({name:"sn-drawer"},{__name:"sn-drawer",props:{renderMode:{type:String,default:"v-if"},position:{type:String,default:"bottom"},showLine:{type:Boolean,default:!0},slideClose:{type:Boolean,default:!0},width:{type:String,default:"300px"},slideWidth:{type:String,default:"100px"},height:{type:String,default:"300px"},slideHeight:{type:String,default:"100px"},bgColor:{type:String,default:""},lineColor:{type:String,default:""},padding:{type:String,default:"25px 15px 10px 15px"},borderRadius:{type:String,default:""},aniTime:{type:String,default:t.configs.aniTime.long},preventBack:{type:Boolean,default:!1},maskClose:{type:Boolean,default:!0},maskOpacity:{type:Number,default:.3},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["open","close","clickMask"],setup(e,w){var S=w.expose,C=w.emit;const M=t.utils,T=t.colors,j=C,I=e,_=a(!1),O=a(0),B=a(!0),z=a(M.randomComId()),X=a(null),Y=l((()=>["top","bottom","left","right"].includes(I.position)?I.position:"bottom")),N=l((()=>"top"==Y.value||"bottom"==Y.value)),H=l((()=>r("radius",I.borderRadius,t.configs.radius.xlarge))),J=l((()=>r("color",I.bgColor,T.value.front))),L=l((()=>r("color",I.lineColor,T.value.lineText))),P=l((()=>r("aniTime",I.aniTime,t.configs.aniTime.long))),R=l((()=>{let e=parseInt(P.value);return e>100?e-100:e})),U=l((()=>{let e=new Map;return e.set("background",L.value),e.set("border-radius",t.configs.radius.circle),N.value?(e.set("height","5px"),e.set("left","50%"),e.set("width","60px"),e.set("transform","translateX(-50%)"),e.set("bottom"==Y.value?"top":"bottom","10px")):(e.set("width","5px"),e.set("top","50%"),e.set("height","60px"),e.set("transform","translateY(-50%)"),e.set("left"==Y.value?"right":"left","10px")),e})),W=l((()=>new UTSJSONObject({justifyContent:N.value?"top"==Y.value?"flex-start":"flex-end":"center",alignItems:N.value?"":"left"==Y.value?"flex-start":"flex-end"}))),$=l((()=>{let e=new Map,a=H.value;switch(N.value?(e.set("width","100%"),e.set("height",I.height)):(e.set("height","100%"),e.set("width",I.width)),Y.value){case"top":e.set("border-radius","0 0 ".concat(a," ").concat(a));break;case"bottom":e.set("border-radius","".concat(a," ").concat(a," 0 0"));break;case"left":e.set("border-radius","0 ".concat(a," ").concat(a," 0"));break;case"right":e.set("border-radius","".concat(a," 0 0 ").concat(a))}return 0!=O.value&&e.set("transform","translate".concat(N.value?"Y":"X","(").concat(O.value,"px)")),e.set("background",J.value),e.set("transition-duration","".concat(B.value?parseInt(P.value):0,"ms")),e.set("zIndex",t.configs.zIndex.popup),e})),q=l((()=>{let e=new Map;return e.set("animation",parseInt(P.value)>0),e.set("hover",_.value),e.set(Y.value,!0),e}));function D(){B.value=!0,M.throttle((()=>{_.value=!1,u((()=>{var e,t;null===(t=null===(e=X.value)||void 0===e?void 0:e.close)||void 0===t||t.call(e)}))}),20,z.value+"closepop"),j("close")}function E(){B.value=!0,u((()=>{_.value=!1})),j("clickMask")}function A(e){if(I.slideClose){let t=e.touches[0];N.value?"bottom"==Y.value?O.value="down"==t.direction?t.diffY:0:O.value="up"==t.direction?-t.diffY:0:"right"==Y.value?O.value="right"==t.direction?t.diffX:0:O.value="left"==t.direction?-t.diffX:0}}function F(){I.slideClose&&(N.value&&Math.abs(O.value)>=M.getPx(I.slideHeight)||!N.value&&Math.abs(O.value)>=M.getPx(I.slideWidth)?(O.value=0,B.value=!0,D()):(B.value=!0,O.value=0,M.debounce((()=>{B.value=!1}),parseInt(P.value))))}return S({open:function(){var e,t;B.value=!0,null===(t=null===(e=X.value)||void 0===e?void 0:e.open)||void 0===t||t.call(e),M.throttle((()=>{_.value=!0}),20,z.value+"showpop"),M.throttle((()=>{B.value=!1}),parseInt(P.value),z.value+"animating"),j("open")},close:D}),b((e=>!!_.value&&(I.preventBack||D(),!0))),(t=null,a=null)=>{const l=h,r=x(o("sn-view"),y),u=x(o("sn-overlay"),k);return d(),s(u,{ref_key:"overlayEle",ref:X,renderMode:e.renderMode,aniTime:"".concat(i(R),"ms"),opacity:e.maskOpacity,maskClose:e.maskClose,onClickMask:E,customStyle:i(W)},{default:n((()=>[c(l,{class:m(["sn-drawer",i(q)]),onClick:a[0]||(a[0]=g((()=>{}),["stop"])),style:p([i($),e.customStyle])},{default:n((()=>[c(r,{padding:e.padding,onTouchmove:A,onTouchend:F,onTouchcancel:F,style:{flex:"1"}},{default:n((()=>[e.showLine?(d(),s(l,{key:0,class:"sn-drawer-line",style:p(i(U))},null,8,["style"])):v("",!0),f(t.$slots,"default",{},void 0,!0)])),_:3},8,["padding"])])),_:3},8,["class","style"])])),_:3},8,["renderMode","aniTime","opacity","maskClose","customStyle"])}}})),[["__scopeId","data-v-167440d4"]]);export{S as _};
