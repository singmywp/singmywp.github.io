import{d as e,$ as t,r as a,c as l,a as s,e as o,f as n,u as i,x as r,n as u,b as d,g as c,p,B as v,z as f,m,A as g,_ as h}from"./index-DYMgrqHp.js";import{_ as y}from"./sn-view.BSUxthDa.js";import{o as x,r as b}from"./uni-app.es.DgDfNdgy.js";import{_ as k}from"./sn-overlay.CiZFgEyq.js";import{b as w}from"./sn-text.euomPoe8.js";const S=w(e(Object.assign({name:"sn-drawer"},{__name:"sn-drawer",props:{renderMode:{type:String,default:"v-if"},position:{type:String,default:"bottom"},showLine:{type:Boolean,default:!0},slideClose:{type:Boolean,default:!0},width:{type:String,default:"300px"},slideWidth:{type:String,default:"100px"},height:{type:String,default:"300px"},slideHeight:{type:String,default:"100px"},bgColor:{type:String,default:""},lineColor:{type:String,default:""},padding:{type:String,default:"25px 15px 10px 15px"},borderRadius:{type:String,default:""},aniTime:{type:String,default:t.configs.aniTime.long},preventBack:{type:Boolean,default:!1},maskClose:{type:Boolean,default:!0},maskOpacity:{type:Number,default:.3},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["open","close","clickMask"],setup(e,w){var S=w.expose,M=w.emit;const C=t.utils,T=t.colors,_=M,j=e,I=a(!1),O=a(0),B=a(!0),X=a(C.randomComId()),Y=a(null),z=l((()=>["top","bottom","left","right"].includes(j.position)?j.position:"bottom")),J=l((()=>"top"==z.value||"bottom"==z.value)),N=l((()=>r("radius",j.borderRadius,t.configs.radius.xlarge))),H=l((()=>r("color",j.bgColor,T.value.front))),L=l((()=>r("color",j.lineColor,T.value.lineText))),P=l((()=>r("aniTime",j.aniTime,t.configs.aniTime.long))),R=l((()=>{let e=parseInt(P.value);return e>100?e-100:e})),U=l((()=>{const e=new Map;return e.set("background",L.value),e.set("border-radius",t.configs.radius.circle),J.value?(e.set("height","5px"),e.set("left","50%"),e.set("width","60px"),e.set("transform","translateX(-50%)"),e.set("bottom"==z.value?"top":"bottom","10px")):(e.set("width","5px"),e.set("top","50%"),e.set("height","60px"),e.set("transform","translateY(-50%)"),e.set("left"==z.value?"right":"left","10px")),e})),W=l((()=>new UTSJSONObject({justifyContent:J.value?"top"==z.value?"flex-start":"flex-end":"center",alignItems:J.value?"":"left"==z.value?"flex-start":"flex-end"}))),$=l((()=>{const e=new Map;let a=N.value;switch(J.value?(e.set("width","100%"),e.set("height",j.height)):(e.set("height","100%"),e.set("width",j.width)),z.value){case"top":e.set("border-radius","0 0 ".concat(a," ").concat(a));break;case"bottom":e.set("border-radius","".concat(a," ").concat(a," 0 0"));break;case"left":e.set("border-radius","0 ".concat(a," ").concat(a," 0"));break;case"right":e.set("border-radius","".concat(a," 0 0 ").concat(a))}return 0!=O.value&&e.set("transform","translate".concat(J.value?"Y":"X","(").concat(O.value,"px)")),e.set("background",H.value),e.set("transition-duration","".concat(B.value?parseInt(P.value):0,"ms")),e.set("zIndex",t.configs.zIndex.popup),e})),A=l((()=>{let e=new Map;return e.set("animation",parseInt(P.value)>0),e.set("hover",I.value),e.set(z.value,!0),e}));function D(){B.value=!0,C.throttle((()=>{I.value=!1,u((()=>{var e,t;null===(t=null===(e=Y.value)||void 0===e?void 0:e.close)||void 0===t||t.call(e)}))}),20,X.value+"closepop"),_("close")}function E(){B.value=!0,u((()=>{I.value=!1})),_("clickMask")}function Z(e){if(j.slideClose){e.event.preventDefault();let t=e.touches[0];J.value?"bottom"==z.value?O.value=Math.max(t.diffY,0):"top"==z.value&&(O.value=Math.min(t.diffY,0)):"right"==z.value?O.value=Math.max(t.diffX,0):"left"==z.value&&(O.value=Math.min(t.diffX,0))}}function q(e){j.slideClose&&(J.value&&Math.abs(O.value)>=C.getPx(j.slideHeight)||!J.value&&Math.abs(O.value)>=C.getPx(j.slideWidth)?(O.value=0,B.value=!0,D()):(B.value=!0,O.value=0,C.debounce((()=>{B.value=!1}),parseInt(P.value))))}return S({open:function(){var e,t;B.value=!0,null===(t=null===(e=Y.value)||void 0===e?void 0:e.open)||void 0===t||t.call(e),C.throttle((()=>{I.value=!0}),20,X.value+"showpop"),C.throttle((()=>{B.value=!1}),parseInt(P.value),X.value+"animating"),_("open")},close:D}),x((e=>!!I.value&&(j.preventBack||D(),!0))),(t=null,a=null)=>{const l=h,r=b(s("sn-view"),y),u=b(s("sn-overlay"),k);return d(),o(u,{ref_key:"overlayEle",ref:Y,renderMode:e.renderMode,aniTime:"".concat(i(R),"ms"),opacity:e.maskOpacity,maskClose:e.maskClose,onClickMask:E,customStyle:i(W)},{default:n((()=>[c(l,{class:m(["sn-drawer",i(A)]),onClick:a[0]||(a[0]=g((()=>{}),["stop"])),style:p([i($),e.customStyle])},{default:n((()=>[c(r,{padding:e.padding,onTouchmove:Z,onTouchend:q,onTouchcancel:q,style:{flex:"1"}},{default:n((()=>[e.showLine?(d(),o(l,{key:0,class:"sn-drawer-line",style:p(i(U))},null,8,["style"])):v("",!0),f(t.$slots,"default",{},void 0,!0)])),_:3},8,["padding"])])),_:3},8,["class","style"])])),_:3},8,["renderMode","aniTime","opacity","maskClose","customStyle"])}}})),[["__scopeId","data-v-d678af18"]]);export{S as _};
