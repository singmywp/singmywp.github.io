import{d as e,$ as t,r as a,c as l,a as o,b as s,e as n,u as i,y as r,m as u,o as d,f as c,q as p,C as v,B as f,p as m,A as g,j as h}from"./index-DoInGK9X.js";import{_ as y}from"./sn-view.BKJ7GZxj.js";import{a as b,r as x}from"./uni-app.es.K1mZmM8s.js";import{b as k}from"./sn-topbar.DxKzInQK.js";import{c as w}from"./sn-button.B1LvAG78.js";const S=w(e(Object.assign({name:"sn-drawer"},{__name:"sn-drawer",props:{renderMode:{type:String,default:"v-if"},position:{type:String,default:"bottom"},showLine:{type:Boolean,default:!0},slideClose:{type:Boolean,default:!0},width:{type:String,default:"300px"},slideWidth:{type:String,default:"100px"},height:{type:String,default:"300px"},slideHeight:{type:String,default:"100px"},bgColor:{type:String,default:""},lineColor:{type:String,default:""},padding:{type:String,default:"25px 15px 10px 15px"},borderRadius:{type:String,default:""},aniTime:{type:String,default:t.configs.aniTime.long},preventBack:{type:Boolean,default:!1},maskClose:{type:Boolean,default:!0},maskOpacity:{type:Number,default:.3},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["open","close","clickMask"],setup(e,w){var S=w.expose,C=w.emit;const M=t.utils,T=t.colors,j=C,I=e,_=a(!1),B=a(0),O=a(!0),X=a(M.randomComId()),Y=a(null),N=l((()=>["top","bottom","left","right"].includes(I.position)?I.position:"bottom")),U=l((()=>"top"==N.value||"bottom"==N.value)),z=l((()=>r("radius",I.borderRadius,t.configs.radius.xlarge))),A=l((()=>r("color",I.bgColor,T.value.front))),H=l((()=>r("color",I.lineColor,T.value.lineText))),J=l((()=>r("aniTime",I.aniTime,t.configs.aniTime.long))),L=l((()=>{let e=parseInt(J.value);return e>100?e-100:e})),P=l((()=>{let e=new Map;return e.set("background",H.value),e.set("border-radius",t.configs.radius.circle),U.value?(e.set("height","5px"),e.set("left","50%"),e.set("width","60px"),e.set("transform","translateX(-50%)"),e.set("bottom"==N.value?"top":"bottom","10px")):(e.set("width","5px"),e.set("top","50%"),e.set("height","60px"),e.set("transform","translateY(-50%)"),e.set("left"==N.value?"right":"left","10px")),e})),R=l((()=>new UTSJSONObject({justifyContent:U.value?"top"==N.value?"flex-start":"flex-end":"center",alignItems:U.value?"":"left"==N.value?"flex-start":"flex-end"}))),W=l((()=>{let e=new Map,a=z.value;switch(U.value?(e.set("width","100%"),e.set("height",I.height)):(e.set("height","100%"),e.set("width",I.width)),N.value){case"top":e.set("border-radius","0 0 ".concat(a," ").concat(a));break;case"bottom":e.set("border-radius","".concat(a," ").concat(a," 0 0"));break;case"left":e.set("border-radius","0 ".concat(a," ").concat(a," 0"));break;case"right":e.set("border-radius","".concat(a," 0 0 ").concat(a))}return 0!=B.value&&e.set("transform","translate".concat(U.value?"Y":"X","(").concat(B.value,"px)")),e.set("background",A.value),e.set("transition-duration","".concat(O.value?parseInt(J.value):0,"ms")),e.set("zIndex",t.configs.zIndex.popup),e})),$=l((()=>{let e=new Map;return e.set("animation",parseInt(J.value)>0),e.set("hover",_.value),e.set(N.value,!0),e}));function q(){O.value=!0,M.throttle((()=>{_.value=!1,u((()=>{var e,t;null===(t=null===(e=Y.value)||void 0===e?void 0:e.close)||void 0===t||t.call(e)}))}),20,X.value+"closepop"),j("close")}function D(){O.value=!0,u((()=>{_.value=!1})),j("clickMask")}function E(e){if(I.slideClose){e.event.preventDefault();let t=e.touches[0];U.value?"bottom"==N.value?B.value=Math.max(t.diffY,0):"top"==N.value&&(B.value=Math.min(t.diffY,0)):"right"==N.value?B.value=Math.max(t.diffX,0):"left"==N.value&&(B.value=Math.min(t.diffX,0))}}function G(e){I.slideClose&&(U.value&&Math.abs(B.value)>=M.getPx(I.slideHeight)||!U.value&&Math.abs(B.value)>=M.getPx(I.slideWidth)?(B.value=0,O.value=!0,q()):(O.value=!0,B.value=0,M.debounce((()=>{O.value=!1}),parseInt(J.value))))}return S({open:function(){var e,t;O.value=!0,null===(t=null===(e=Y.value)||void 0===e?void 0:e.open)||void 0===t||t.call(e),M.throttle((()=>{_.value=!0}),20,X.value+"showpop"),M.throttle((()=>{O.value=!1}),parseInt(J.value),X.value+"animating"),j("open")},close:q}),b((e=>!!_.value&&(I.preventBack||q(),!0))),(t=null,a=null)=>{const l=h,r=x(o("sn-view"),y),u=x(o("sn-overlay"),k);return d(),s(u,{ref_key:"overlayEle",ref:Y,renderMode:e.renderMode,aniTime:"".concat(i(L),"ms"),opacity:e.maskOpacity,maskClose:e.maskClose,onClickMask:D,customStyle:i(R)},{default:n((()=>[c(l,{class:m(["sn-drawer",i($)]),onClick:a[0]||(a[0]=g((()=>{}),["stop"])),style:p([i(W),e.customStyle])},{default:n((()=>[c(r,{padding:e.padding,onTouchmove:E,onTouchend:G,onTouchcancel:G,style:{flex:"1"}},{default:n((()=>[e.showLine?(d(),s(l,{key:0,class:"sn-drawer-line",style:p(i(P))},null,8,["style"])):v("",!0),f(t.$slots,"default",{},void 0,!0)])),_:3},8,["padding"])])),_:3},8,["class","style"])])),_:3},8,["renderMode","aniTime","opacity","maskClose","customStyle"])}}})),[["__scopeId","data-v-1c754ad9"]]);export{S as _};
