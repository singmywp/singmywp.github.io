import{d as e,R as a,$ as t,T as l,r as n,o,n as u,c as s,a as r,e as i,f as c,p as f,B as d,am as p,x as v,_ as m,b as y,W as g,X as S,u as h,g as b}from"./index-DYMgrqHp.js";import{_ as x,b as w}from"./sn-text.euomPoe8.js";import{r as j}from"./uni-app.es.DgDfNdgy.js";const C=w(e(Object.assign({name:"sn-rate"},{__name:"sn-rate",props:a(new UTSJSONObject({count:{type:Number,default:5},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},spacing:{type:String,default:"5px"},inactiveColor:{type:String,default:""},activeColor:{type:String,default:""},icon:{type:String,default:"star-fill"},iconSize:{type:String,default:""},activeIcon:{type:String,default:""},halfIcon:{type:String,default:"star-half-fill"},customStyle:{type:Object,default:new UTSJSONObject({})}}),new UTSJSONObject({modelValue:{type:Number,default:0},modelModifiers:{}})),emits:a(["change"],["update:modelValue"]),setup(e,a){var w=a.emit;const C=t.colors,I=t.utils,O=w,_=l(e,"modelValue"),z=e,M=I.randomComId(),B=I.randomComId(),T=n(null),N=n(null);o((()=>{u((()=>{T.value=p(M),N.value=p(B)}))}));const H=s((()=>{let e=z.activeIcon;return I.isEmpty(e)?z.icon:e})),J=s((()=>Math.min(z.count,Math.max(_.value,0)))),R=s((()=>{if(z.allowHalf){let e=Math.trunc(J.value);return(H.value+",").repeat(e)+(J.value-e==.5?z.halfIcon:"")}return(H.value+",").repeat(J.value)})),U=s((()=>Math.max(z.count-J.value,0))),V=s((()=>((z.allowHalf&&"star-fill"==z.icon?"star-line":z.icon)+",").repeat(Math.trunc(U.value)))),W=s((()=>{if(J.value>0&&null!=T.value&&null!=N.value){let e=T.value.getBoundingClientRect();return[e.x,e.y]}if(0==J.value&&null!=N){let e=N.value.getBoundingClientRect();return[e.x,e.y]}return[0,0]})),k=s((()=>null!=T.value&&null!=N.value?T.value.offsetWidth+N.value.offsetWidth:0)),X=s((()=>v("color",z.inactiveColor,C.value.infoDark))),D=s((()=>v("color",z.activeColor,C.value.warning))),E=s((()=>v("font",z.iconSize,t.configs.font.size(4)))),$=s((()=>{const e=new Map;return e.set("letterSpacing",z.spacing),e}));function q(e){let a=z.count;if(!z.readonly){let t=e.touches[0].clientX-W.value[0],l=k.value/a,n=parseInt((t/l).toString()),o=n+(z.allowHalf?t/l-n>.5?1:.5:1);o>a?o=a:o<0&&(o=0),z.clearable&&o==_.value&&(o=0),_.value=o,O("change",o)}}return(a=null,t=null)=>{const l=j(r("sn-icon"),x),n=m;return e.count>0?(y(),i(n,{key:0,class:"sn-rate",style:f([e.customStyle])},{default:c((()=>[g(b(l,{class:"sn-rate-prefix",id:h(M),name:h(R),color:h(D),size:h(E),onTouchstart:q,style:f(h($))},null,8,["id","name","color","size","style"]),[[S,h(J)>0]]),g(b(l,{class:"sn-rate-suffix",id:h(B),name:h(V),color:h(X),size:h(E),onTouchstart:q,style:f(h($))},null,8,["id","name","color","size","style"]),[[S,h(U)>0]])])),_:1},8,["style"])):d("",!0)}}})),[["__scopeId","data-v-a59e8bec"]]);export{C as _};
