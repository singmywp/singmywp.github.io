import{b as e,a as t,c as l}from"./sn-button.68-4Ol7n.js";import{d as o,r as a,c as n,w as s,b as u,h as i,g as r,f as c,u as p,m as d,F as v,l as f,p as g,o as m,q as x,B as y,j as S,S as C,e as b}from"./index-BV7wVSs2.js";import{$ as h,r as T,S as w}from"./uni-app.es.BzKMvEv9.js";import{c as z,b as B}from"./sn-topbar.A9l38UY4.js";const _=l(o(Object.assign({name:"sn-select"},{__name:"sn-select",props:{modelValue:{type:Number,default:0},data:{type:Array,default:[]},width:{type:String,default:"100px"},bgColor:{type:String,default:""},activeBgColor:{type:String,default:""},popBgColor:{type:String,default:""},popActiveBgColor:{type:String,default:""},textSize:{type:String,default:""},textColor:{type:String,default:""},popTextSize:{type:String,default:""},popActiveTextColor:{type:String,default:""},popTextColor:{type:String,default:""},borderRadius:{type:String,default:""},maxHeight:{type:String,default:"500px"},disabled:{type:Boolean,default:!1},customPopStyle:{type:Object,default:{}},customPopTextStyle:{type:Object,default:{}},customTextStyle:{type:Object,default:{}},customStyle:{type:Object,default:{}}},emits:["change","update:modelValue"],setup(l,o){var _=o.emit;const k=h.colors,j=h.utils,A=_,M=l,O=a(!1),I=a(!1),R=a(!1),P=a(null),V=a(null),E=a(null),H=a({top:0,left:0}),N=a(0),q=n({get:()=>M.modelValue,set:e=>{A("update:modelValue",e)}}),D=n((()=>h.configs.app.theme)),F=n((()=>M.data)),J=n((()=>F.value.length>0?F.value[q.value]:new w({id:"",text:""}))),U=n((()=>""==M.activeBgColor?k.value.infoActive:M.activeBgColor)),$=n((()=>""==M.popBgColor?k.value["light"==D.value?"front":"info"]:M.popBgColor)),G=n((()=>""==M.popActiveBgColor?k.value["light"==D.value?"info":"infoActive"]:M.popActiveBgColor)),K=n((()=>""==M.textSize?h.configs.font.size(3):M.textSize)),L=n((()=>{let e=""==M.textColor?k.value.text:M.textColor;return M.disabled?k.value.disabledText:e})),Q=n((()=>""==M.popTextSize?h.configs.font.size(2):M.popTextSize)),W=n((()=>""==M.popActiveTextColor?k.value.primaryDark:M.popActiveTextColor)),X=n((()=>""==M.popTextColor?k.value.text:M.popTextColor)),Y=n((()=>""==M.borderRadius?h.configs.radius.normal:M.borderRadius)),Z=n((()=>{let e=""==M.bgColor?k.value.front:M.bgColor;return M.disabled?k.value.disabled:O.value?M.activeBgColor:e})),ee=n((()=>{let e=new Map;return e.set("width",M.width),e.set("background",O.value?U.value:Z.value),e.set("border-radius",Y.value),e.set("transition-duration",h.configs.aniTime.normal),e})),te=n((()=>{let e=new Map;return e.set("transform","rotate(".concat(R.value?180:0,"deg)")),e.set("transition-duration",h.configs.aniTime.normal),e})),le=n((()=>{let e=new Map;return e.set("max-height",M.maxHeight),e})),oe=n((()=>{var e,t;let l=new Map;return l.set("background",$.value),l.set("border-radius",Y.value),l.set("width",M.width),l.set("top","".concat(null!==(e=H.value.top)&&void 0!==e?e:0,"px")),l.set("left","".concat(null!==(t=H.value.left)&&void 0!==t?t:0,"px")),l.set("max-height",M.maxHeight),l.set("z-index",h.configs.zIndex.popup),l.set("transition-duration",h.configs.aniTime.normal),l}));function ae(e){var t,l,o,a;if(!M.disabled){if(1==e&&null!=P.value){let e=P.value.getBoundingClientRect();H.value={top:e.top+e.height+5,left:e.left}}R.value=e,R.value?null===(l=null===(t=V.value)||void 0===t?void 0:t.open)||void 0===l||l.call(t):null===(a=null===(o=V.value)||void 0===o?void 0:o.close)||void 0===a||a.call(o),1==e&&null!=E.value&&f((()=>{let e=E.value.getBoundingClientRect().height;0!=e&&(N.value=e)}))}}const ne=a(j.randomComId());return s(R,(e=>{e?f((()=>{j.throttle((()=>{I.value=!0}),10,ne.value)})):(I.value=!1,j.throttle((()=>{R.value=!1}),parseInt(h.configs.aniTime.long),ne.value))})),(o=null,a=null)=>{const n=T(u("sn-text"),e),s=T(u("sn-icon"),t),f=g,w=T(u("sn-menu-item"),z),_=C,k=T(u("sn-overlay"),B);return m(),i(v,null,[r(f,{class:"sn-select",ref_key:"selectEle",ref:P,onTouchstart:a[0]||(a[0]=(e=null)=>O.value=!0),onClick:a[1]||(a[1]=(e=null)=>ae(!p(R))),onTouchend:a[2]||(a[2]=(e=null)=>O.value=!1),onTouchcancel:a[3]||(a[3]=(e=null)=>O.value=!1),onMousedown:a[4]||(a[4]=(e=null)=>O.value=!0),onMouseup:a[5]||(a[5]=(e=null)=>O.value=!1),style:d([p(ee),l.customStyle])},{default:c((()=>[r(n,{class:"sn-select-text",text:p(J).text,size:p(K),color:p(L),customStyle:l.customTextStyle},null,8,["text","size","color","customStyle"]),r(s,{name:"arrow-down-s-line",size:p(K),color:p(L),style:d(p(te))},null,8,["size","color","style"])])),_:1},8,["style"]),r(k,{ref_key:"overlayEle",ref:V,opacity:0,aniTime:parseInt(p(h).configs.aniTime.long),onClickMask:a[7]||(a[7]=(e=null)=>ae(!1))},{default:c((()=>[r(f,{class:x(["sn-select-popup",new UTSJSONObject({"sn-select-popup__show":p(I)})]),ref_key:"popEle",ref:E,style:d([p(oe),l.customPopStyle]),onClick:a[6]||(a[6]=y((()=>{}),["stop"]))},{default:c((()=>[r(_,{class:"sn-select-popup-listview",direction:"vertical",bounces:!1,"show-scrollbar":!1,style:d(p(le))},{default:c((()=>[(m(!0),i(v,null,S(p(F),((e,t)=>{var o;return m(),b(w,{key:t,bgColor:p($),activeBgColor:p(G),text:null!==(o=e.text)&&void 0!==o?o:"",textSize:p(Q),textColor:t==p(q)?p(W):p(X),textAlign:"center",customTextStyle:l.customPopTextStyle,customStyle:{width:l.width},onClick:(e=null)=>function(e){if(M.disabled)return null;q.value=e,A("change",F.value[e]),ae(!1)}(t)},null,8,["bgColor","activeBgColor","text","textSize","textColor","customTextStyle","customStyle","onClick"])})),128))])),_:1},8,["style"])])),_:1},8,["class","style"])])),_:1},8,["aniTime"])],64)}}})),[["__scopeId","data-v-68fe7f93"]]);export{_};
