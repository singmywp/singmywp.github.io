import{a as e,_ as t,b as l}from"./sn-text.euomPoe8.js";import{d as o,R as a,$ as n,T as s,r as u,c as i,w as r,a as c,h as d,g as p,f as v,m as f,u as g,p as m,F as y,S,x,n as b,_ as h,b as T,A as C,j as w,E as O,e as j}from"./index-DYMgrqHp.js";import{r as _}from"./uni-app.es.DgDfNdgy.js";import{_ as z}from"./sn-menu-item.DkjoXkWj.js";import{_ as k}from"./sn-overlay.CiZFgEyq.js";const B=l(o(Object.assign({name:"sn-select"},{__name:"sn-select",props:a(new UTSJSONObject({data:{type:Array,default:[]},width:{type:String,default:"100px"},bgColor:{type:String,default:""},activeBgColor:{type:String,default:""},popBgColor:{type:String,default:""},popActiveBgColor:{type:String,default:""},textSize:{type:String,default:""},textColor:{type:String,default:""},popTextSize:{type:String,default:""},popActiveTextColor:{type:String,default:""},popTextColor:{type:String,default:""},borderRadius:{type:String,default:""},maxHeight:{type:String,default:"500px"},disabled:{type:Boolean,default:!1},customPopStyle:{type:Object,default:new UTSJSONObject({})},customPopTextStyle:{type:Object,default:new UTSJSONObject({})},customTextStyle:{type:Object,default:new UTSJSONObject({})},customStyle:{type:Object,default:new UTSJSONObject({})}}),new UTSJSONObject({modelValue:{type:Number,default:0},modelModifiers:{}})),emits:a(["change"],["update:modelValue"]),setup(l,o){var a=o.emit;const B=n.colors,A=n.utils,J=a,N=s(l,"modelValue"),M=l,U=u(!1),R=u(!1),E=u(!1),I=u(null),P=u(null),H=u(null),V=u(new UTSJSONObject({top:0,left:0})),$=u(0),D=i((()=>n.configs.app.theme)),F=i((()=>M.data)),q=i((()=>F.value.length>0?F.value[N.value]:new S({id:"",text:""}))),G=i((()=>x("color",M.activeBgColor,B.value.infoActive))),K=i((()=>x("color",M.popBgColor,B.value["light"==D.value?"front":"info"]))),L=i((()=>x("color",M.popActiveBgColor,B.value["light"==D.value?"info":"infoActive"]))),Q=i((()=>x("font",M.textSize,n.configs.font.size(3)))),W=i((()=>{let e=x("color",M.textColor,B.value.text);return M.disabled?B.value.disabledText:e})),X=i((()=>x("font",M.popTextSize,n.configs.font.size(2)))),Y=i((()=>x("color",M.popActiveTextColor,B.value.primaryDark))),Z=i((()=>x("color",M.popTextColor,B.value.text))),ee=i((()=>x("radius",M.borderRadius,n.configs.radius.normal))),te=i((()=>{let e=x("color",M.bgColor,B.value.front);return M.disabled?B.value.disabled:U.value?M.activeBgColor:e})),le=i((()=>{const e=new Map;return e.set("width",M.width),e.set("background",U.value?G.value:te.value),e.set("border-radius",ee.value),e.set("transition-duration",n.configs.aniTime.normal),e})),oe=i((()=>{const e=new Map;return e.set("transform","rotate(".concat(E.value?180:0,"deg)")),e.set("transition-duration",n.configs.aniTime.normal),e})),ae=i((()=>{const e=new Map;return e.set("max-height",M.maxHeight),e})),ne=i((()=>{var e,t;const l=new Map;return l.set("background",K.value),l.set("border-radius",ee.value),l.set("width",M.width),l.set("top","".concat(null!==(e=V.value.top)&&void 0!==e?e:0,"px")),l.set("left","".concat(null!==(t=V.value.left)&&void 0!==t?t:0,"px")),l.set("max-height",M.maxHeight),l.set("z-index",n.configs.zIndex.popup),l.set("transition-duration",n.configs.aniTime.normal),l}));function se(e){var t,l,o,a;if(!M.disabled){if(1==e&&null!=I.value){let e=I.value.getBoundingClientRect();V.value={top:e.top+e.height+5,left:e.left}}E.value=e,E.value?null===(l=null===(t=P.value)||void 0===t?void 0:t.open)||void 0===l||l.call(t):null===(a=null===(o=P.value)||void 0===o?void 0:o.close)||void 0===a||a.call(o),1==e&&null!=H.value&&b((()=>{let e=H.value.getBoundingClientRect().height;0!=e&&($.value=e)}))}}const ue=u(A.randomComId());return r(E,(e=>{e?b((()=>{A.throttle((()=>{R.value=!0}),10,ue.value)})):(R.value=!1,A.throttle((()=>{E.value=!1}),parseInt(n.configs.aniTime.long),ue.value))})),(o=null,a=null)=>{const n=_(c("sn-text"),e),s=_(c("sn-icon"),t),u=h,i=_(c("sn-menu-item"),z),r=O,S=_(c("sn-overlay"),k);return T(),d(y,null,[p(u,{class:f(["sn-select",l.disabled?"disabled":""]),ref_key:"selectEle",ref:I,onTouchstart:a[0]||(a[0]=(e=null)=>U.value=!0),onClick:a[1]||(a[1]=(e=null)=>se(!g(E))),onTouchend:a[2]||(a[2]=(e=null)=>U.value=!1),onTouchcancel:a[3]||(a[3]=(e=null)=>U.value=!1),onMousedown:a[4]||(a[4]=(e=null)=>U.value=!0),onMouseup:a[5]||(a[5]=(e=null)=>U.value=!1),style:m([g(le),l.customStyle])},{default:v((()=>[p(n,{class:"sn-select-text",text:g(q).text,size:g(Q),color:g(W),customStyle:l.customTextStyle},null,8,["text","size","color","customStyle"]),p(s,{name:"arrow-down-s-line",size:g(Q),color:g(W),style:m(g(oe))},null,8,["size","color","style"])])),_:1},8,["class","style"]),p(S,{ref_key:"overlayEle",ref:P,aniTime:"$long",opacity:0,onClickMask:a[7]||(a[7]=(e=null)=>se(!1))},{default:v((()=>[p(u,{class:f(["sn-select-popup",new UTSJSONObject({"sn-select-popup__show":g(R)})]),ref_key:"popEle",ref:H,style:m([g(ne),l.customPopStyle]),onClick:a[6]||(a[6]=C((()=>{}),["stop"]))},{default:v((()=>[p(r,{class:"sn-select-popup-listview",direction:"vertical",bounces:!1,"show-scrollbar":!1,style:m(g(ae))},{default:v((()=>[(T(!0),d(y,null,w(g(F),((e,t)=>{var o;return T(),j(i,{key:t,bgColor:g(K),activeBgColor:g(L),text:null!==(o=e.text)&&void 0!==o?o:"",textSize:g(X),textColor:t==N.value?g(Y):g(Z),textAlign:"center",customTextStyle:l.customPopTextStyle,customStyle:{width:l.width},onClick:(e=null)=>function(e){if(M.disabled)return null;N.value=e,J("change",F.value[e]),se(!1)}(t)},null,8,["bgColor","activeBgColor","text","textSize","textColor","customTextStyle","customStyle","onClick"])})),128))])),_:1},8,["style"])])),_:1},8,["class","style"])])),_:1},512)],64)}}})),[["__scopeId","data-v-e87a9f8b"]]);export{B as _};
