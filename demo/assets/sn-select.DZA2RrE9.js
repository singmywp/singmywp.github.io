import{b as e,a as t,c as l}from"./sn-button.DCeBN0oM.js";import{d as o,$ as a,r as n,c as s,w as u,a as i,g as r,f as c,e as d,p,u as v,q as f,F as g,S as m,z as y,m as x,j as S,o as b,D as h,h as C,G as T,b as w}from"./index-BDGnenFq.js";import{r as z}from"./uni-app.es.BfR9KIrQ.js";import{c as j,b as O}from"./sn-topbar.D5ol6wWa.js";const _=l(o(Object.assign({name:"sn-select"},{__name:"sn-select",props:{modelValue:{type:Number,default:0},data:{type:Array,default:[]},width:{type:String,default:"100px"},bgColor:{type:String,default:""},activeBgColor:{type:String,default:""},popBgColor:{type:String,default:""},popActiveBgColor:{type:String,default:""},textSize:{type:String,default:""},textColor:{type:String,default:""},popTextSize:{type:String,default:""},popActiveTextColor:{type:String,default:""},popTextColor:{type:String,default:""},borderRadius:{type:String,default:""},maxHeight:{type:String,default:"500px"},disabled:{type:Boolean,default:!1},customPopStyle:{type:Object,default:new UTSJSONObject({})},customPopTextStyle:{type:Object,default:new UTSJSONObject({})},customTextStyle:{type:Object,default:new UTSJSONObject({})},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["change","update:modelValue"],setup(l,o){var _=o.emit;const k=a.colors,B=a.utils,A=_,M=l,N=n(!1),J=n(!1),U=n(!1),I=n(null),P=n(null),R=n(null),V=n({top:0,left:0}),E=n(0),H=s({get:()=>M.modelValue,set:e=>{A("update:modelValue",e)}}),D=s((()=>a.configs.app.theme)),$=s((()=>M.data)),q=s((()=>$.value.length>0?$.value[H.value]:new m({id:"",text:""}))),F=s((()=>y("color",M.activeBgColor,k.value.infoActive))),G=s((()=>y("color",M.popBgColor,k.value["light"==D.value?"front":"info"]))),K=s((()=>y("color",M.popActiveBgColor,k.value["light"==D.value?"info":"infoActive"]))),L=s((()=>y("font",M.textSize,a.configs.font.size(3)))),Q=s((()=>{let e=y("color",M.textColor,k.value.text);return M.disabled?k.value.disabledText:e})),W=s((()=>y("font",M.popTextSize,a.configs.font.size(2)))),X=s((()=>y("color",M.popActiveTextColor,k.value.primaryDark))),Y=s((()=>y("color",M.popTextColor,k.value.text))),Z=s((()=>y("radius",M.borderRadius,a.configs.radius.normal))),ee=s((()=>{let e=y("color",M.bgColor,k.value.front);return M.disabled?k.value.disabled:N.value?M.activeBgColor:e})),te=s((()=>{let e=new Map;return e.set("width",M.width),e.set("background",N.value?F.value:ee.value),e.set("border-radius",Z.value),e.set("transition-duration",a.configs.aniTime.normal),e})),le=s((()=>{let e=new Map;return e.set("transform","rotate(".concat(U.value?180:0,"deg)")),e.set("transition-duration",a.configs.aniTime.normal),e})),oe=s((()=>{let e=new Map;return e.set("max-height",M.maxHeight),e})),ae=s((()=>{var e,t;let l=new Map;return l.set("background",G.value),l.set("border-radius",Z.value),l.set("width",M.width),l.set("top","".concat(null!==(e=V.value.top)&&void 0!==e?e:0,"px")),l.set("left","".concat(null!==(t=V.value.left)&&void 0!==t?t:0,"px")),l.set("max-height",M.maxHeight),l.set("z-index",a.configs.zIndex.popup),l.set("transition-duration",a.configs.aniTime.normal),l}));function ne(e){var t,l,o,a;if(!M.disabled){if(1==e&&null!=I.value){let e=I.value.getBoundingClientRect();V.value={top:e.top+e.height+5,left:e.left}}U.value=e,U.value?null===(l=null===(t=P.value)||void 0===t?void 0:t.open)||void 0===l||l.call(t):null===(a=null===(o=P.value)||void 0===o?void 0:o.close)||void 0===a||a.call(o),1==e&&null!=R.value&&x((()=>{let e=R.value.getBoundingClientRect().height;0!=e&&(E.value=e)}))}}const se=n(B.randomComId());return u(U,(e=>{e?x((()=>{B.throttle((()=>{J.value=!0}),10,se.value)})):(J.value=!1,B.throttle((()=>{U.value=!1}),parseInt(a.configs.aniTime.long),se.value))})),(o=null,a=null)=>{const n=z(i("sn-text"),e),s=z(i("sn-icon"),t),u=S,m=z(i("sn-menu-item"),j),y=T,x=z(i("sn-overlay"),O);return b(),r(g,null,[c(u,{class:p(["sn-select",l.disabled?"disabled":""]),ref_key:"selectEle",ref:I,onTouchstart:a[0]||(a[0]=(e=null)=>N.value=!0),onClick:a[1]||(a[1]=(e=null)=>ne(!v(U))),onTouchend:a[2]||(a[2]=(e=null)=>N.value=!1),onTouchcancel:a[3]||(a[3]=(e=null)=>N.value=!1),onMousedown:a[4]||(a[4]=(e=null)=>N.value=!0),onMouseup:a[5]||(a[5]=(e=null)=>N.value=!1),style:f([v(te),l.customStyle])},{default:d((()=>[c(n,{class:"sn-select-text",text:v(q).text,size:v(L),color:v(Q),customStyle:l.customTextStyle},null,8,["text","size","color","customStyle"]),c(s,{name:"arrow-down-s-line",size:v(L),color:v(Q),style:f(v(le))},null,8,["size","color","style"])])),_:1},8,["class","style"]),c(x,{ref_key:"overlayEle",ref:P,aniTime:"$long",opacity:0,onClickMask:a[7]||(a[7]=(e=null)=>ne(!1))},{default:d((()=>[c(u,{class:p(["sn-select-popup",new UTSJSONObject({"sn-select-popup__show":v(J)})]),ref_key:"popEle",ref:R,style:f([v(ae),l.customPopStyle]),onClick:a[6]||(a[6]=h((()=>{}),["stop"]))},{default:d((()=>[c(y,{class:"sn-select-popup-listview",direction:"vertical",bounces:!1,"show-scrollbar":!1,style:f(v(oe))},{default:d((()=>[(b(!0),r(g,null,C(v($),((e,t)=>{var o;return b(),w(m,{key:t,bgColor:v(G),activeBgColor:v(K),text:null!==(o=e.text)&&void 0!==o?o:"",textSize:v(W),textColor:t==v(H)?v(X):v(Y),textAlign:"center",customTextStyle:l.customPopTextStyle,customStyle:{width:l.width},onClick:(e=null)=>function(e){if(M.disabled)return null;H.value=e,A("change",$.value[e]),ne(!1)}(t)},null,8,["bgColor","activeBgColor","text","textSize","textColor","customTextStyle","customStyle","onClick"])})),128))])),_:1},8,["style"])])),_:1},8,["class","style"])])),_:1},512)],64)}}})),[["__scopeId","data-v-ec833385"]]);export{_};
