import{a as e,_ as t,c as l}from"./sn-button.B1LvAG78.js";import{d as a,$ as o,r as n,c as s,w as i,a as r,b as u,e as d,q as p,u as c,y as m,j as g,o as b,f,i as x}from"./index-DoInGK9X.js";import{r as v}from"./uni-app.es.K1mZmM8s.js";import{_ as y}from"./sn-input.CG5cj0Ye.js";const C=l(a(Object.assign({name:"sn-stepper"},{__name:"sn-stepper",props:{modelValue:{type:Number,default:0},size:{type:String,default:"30px"},spacing:{type:String,default:"2px"},inputWidth:{type:String,default:"50px"},textSize:{type:String,default:""},textColor:{type:String,default:""},disabledTextColor:{type:String,default:""},inputBgColor:{type:String,default:""},inputActiveBgColor:{type:String,default:""},buttonBgColor:{type:String,default:""},borderRadius:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:NaN},step:{type:Number,default:1},longpress:{type:Boolean,default:!0},disableInput:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["update:modelValue","change"],setup(l,a){var C=a.emit;const N=o.colors,S=o.utils,h=C,B=l,z=n(""),V=n(null),T=n(null),_=s({get:()=>B.modelValue,set:e=>{let t=S.formatNumber(e);h("update:modelValue",t),h("change",t),z.value="".concat(t)}}),j=s((()=>!isNaN(B.max)&&B.modelValue==B.max||B.disabled)),R=s((()=>!isNaN(B.min)&&B.modelValue==B.min||B.disabled)),w=s((()=>{let e=new Map;return e.set("transition-duration",o.configs.aniTime.normal),e})),F=s((()=>m("color",B.textSize,"".concat(o.utils.getPx(o.configs.font.size(2))+1,"px")))),I=s((()=>m("color",B.textColor,N.value.text))),O=s((()=>m("color",B.disabledTextColor,N.value.disabledText))),M=s((()=>m("color",B.inputBgColor,N.value.info))),P=s((()=>m("color",B.inputActiveBgColor,N.value.info))),W=s((()=>m("color",B.buttonBgColor,N.value.info))),k=s((()=>m("radius",B.borderRadius,o.configs.radius.small))),A=s((()=>(S.getPx(B.size)-S.getPx(F.value))/2)),L=s((()=>{let e=new Map;return e.set("width",B.size),e.set("height",B.size),e.set("padding",""),e.set("transition-duration",o.configs.aniTime.normal),e})),U=s((()=>{let e=new Map;return e.set("width",B.inputWidth),e.set("size",B.size),e.set("flex",""),e.set("margin","0 ".concat(B.spacing)),e}));function q(e){_.value=e}function G(){if(!R.value){let e=parseFloat((B.modelValue-B.step).toFixed(2));q(isNaN(B.min)||e>=B.min?e:B.min)}}function J(){if(!j.value){let e=parseFloat((B.modelValue+B.step).toFixed(2));q(isNaN(B.max)||e<=B.max?e:B.max)}}function Q(){let e=0;""!=z.value.trim()?(e="-"==z.value?-1:parseFloat(parseFloat(z.value).toFixed(2)),e=e>B.max?B.max:e<B.min?B.min:e):e=isNaN(B.min)?isNaN(B.max)?0:B.max:B.min,_.value=e}function $(){B.longpress&&!B.disabled&&(null!=V.value&&(clearInterval(V.value),V.value=null),null!=T.value&&(clearInterval(T.value),T.value=null))}function D(e){B.longpress&&!B.disabled&&("decrease"==e&&(T.value=setInterval((()=>{G()}),100)),"increase"==e&&(V.value=setInterval((()=>{J()}),100)))}return i(_,(e=>{e=S.formatNumber(e),!isNaN(B.max)&&e>B.max&&q(B.max),!isNaN(B.min)&&e<B.min&&q(B.min),z.value=e.toString()}),{immediate:!0}),(a=null,o=null)=>{const n=v(r("sn-icon"),e),s=v(r("sn-button"),t),i=v(r("sn-input"),y),m=g;return b(),u(m,{class:"sn-stepper",style:p([c(w),l.customStyle])},{default:d((()=>[f(s,{class:"sn-stepper-action",disabled:c(R),bgColor:c(W),borderRadius:c(k),onClick:o[0]||(o[0]=(e=null)=>G()),onLongpress:o[1]||(o[1]=(e=null)=>D("decrease")),onTouchend:$,onTouchcancel:$,style:p(c(L))},{default:d((()=>[f(n,{name:"subtract-line",color:c(R)?c(O):c(I)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"]),f(i,{modelValue:c(z),"onUpdate:modelValue":o[2]||(o[2]=(e=null)=>x(z)?z.value=e:null),type:"digit",class:"sn-stepper-inout",borderWidth:"0px",align:"center",font:"misans-semibold",borderRadius:c(k),textSize:c(F),cursorColor:c(I),padding:"".concat(c(A),"px 5px"),bgColor:c(M),activeBgColor:c(P),textColor:c(I),disabled:l.disabled,readonly:l.disableInput,onBlur:Q,onConfirm:Q,style:p(c(U))},null,8,["modelValue","borderRadius","textSize","cursorColor","padding","bgColor","activeBgColor","textColor","disabled","readonly","style"]),f(s,{class:"sn-stepper-action",disabled:c(j),bgColor:c(W),borderRadius:c(k),onClick:o[3]||(o[3]=(e=null)=>J()),onLongpress:o[4]||(o[4]=(e=null)=>D("increase")),onTouchend:$,onTouchcancel:$,style:p(c(L))},{default:d((()=>[f(n,{name:"add-line",color:c(j)?c(O):c(I)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"])])),_:1},8,["style"])}}})),[["__scopeId","data-v-81205f8e"]]);export{C as _};
