import{_ as e,b as t}from"./sn-text.euomPoe8.js";import{d as a,$ as l,r as o,c as n,w as s,a as i,e as r,f as u,p as d,u as p,x as c,_ as m,b as g,g as b,i as f}from"./index-DYMgrqHp.js";import{r as x}from"./uni-app.es.DgDfNdgy.js";import{_ as v}from"./sn-button.BjZePiC5.js";import{_ as y}from"./sn-input.Cq5jBGx5.js";const C=t(a(Object.assign({name:"sn-stepper"},{__name:"sn-stepper",props:{modelValue:{type:Number,default:0},size:{type:String,default:"30px"},spacing:{type:String,default:"2px"},inputWidth:{type:String,default:"50px"},textSize:{type:String,default:""},textColor:{type:String,default:""},disabledTextColor:{type:String,default:""},inputBgColor:{type:String,default:""},inputActiveBgColor:{type:String,default:""},buttonBgColor:{type:String,default:""},borderRadius:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:NaN},step:{type:Number,default:1},longpress:{type:Boolean,default:!0},disableInput:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["update:modelValue","change"],setup(t,a){var C=a.emit;const N=l.colors,S=l.utils,h=C,B=t,_=o(""),z=o(null),V=o(null),T=n({get:()=>B.modelValue,set:e=>{let t=S.formatNumber(e);h("update:modelValue",t),h("change",t),_.value="".concat(t)}}),j=n((()=>!isNaN(B.max)&&B.modelValue==B.max||B.disabled)),R=n((()=>!isNaN(B.min)&&B.modelValue==B.min||B.disabled)),w=n((()=>{const e=new Map;return e.set("transition-duration",l.configs.aniTime.normal),e})),F=n((()=>c("color",B.textSize,"".concat(l.utils.getPx(l.configs.font.size(2))+1,"px")))),I=n((()=>c("color",B.textColor,N.value.text))),O=n((()=>c("color",B.disabledTextColor,N.value.disabledText))),M=n((()=>c("color",B.inputBgColor,N.value.info))),P=n((()=>c("color",B.inputActiveBgColor,N.value.info))),W=n((()=>c("color",B.buttonBgColor,N.value.info))),k=n((()=>c("radius",B.borderRadius,l.configs.radius.small))),A=n((()=>(S.getPx(B.size)-S.getPx(F.value))/2)),J=n((()=>{const e=new Map;return e.set("width",B.size),e.set("height",B.size),e.set("padding",""),e.set("transition-duration",l.configs.aniTime.normal),e})),L=n((()=>{const e=new Map;return e.set("width",B.inputWidth),e.set("size",B.size),e.set("flex",""),e.set("margin","0 ".concat(B.spacing)),e}));function U(e){T.value=e}function Q(){if(!R.value){let e=parseFloat((B.modelValue-B.step).toFixed(2));U(isNaN(B.min)||e>=B.min?e:B.min)}}function $(){if(!j.value){let e=parseFloat((B.modelValue+B.step).toFixed(2));U(isNaN(B.max)||e<=B.max?e:B.max)}}function q(){let e=0;""!=_.value.trim()?(e="-"==_.value?-1:parseFloat(parseFloat(_.value).toFixed(2)),e=e>B.max?B.max:e<B.min?B.min:e):e=isNaN(B.min)?isNaN(B.max)?0:B.max:B.min,T.value=e}function D(){B.longpress&&!B.disabled&&(null!=z.value&&(clearInterval(z.value),z.value=null),null!=V.value&&(clearInterval(V.value),V.value=null))}function E(e){B.longpress&&!B.disabled&&("decrease"==e&&(V.value=setInterval((()=>{Q()}),100)),"increase"==e&&(z.value=setInterval((()=>{$()}),100)))}return s(T,(e=>{e=S.formatNumber(e),!isNaN(B.max)&&e>B.max&&U(B.max),!isNaN(B.min)&&e<B.min&&U(B.min),_.value=e.toString()}),{immediate:!0}),(a=null,l=null)=>{const o=x(i("sn-icon"),e),n=x(i("sn-button"),v),s=x(i("sn-input"),y),c=m;return g(),r(c,{class:"sn-stepper",style:d([p(w),t.customStyle])},{default:u((()=>[b(n,{class:"sn-stepper-action",disabled:p(R),bgColor:p(W),borderRadius:p(k),onClick:l[0]||(l[0]=(e=null)=>Q()),onLongpress:l[1]||(l[1]=(e=null)=>E("decrease")),onTouchend:D,onTouchcancel:D,style:d(p(J))},{default:u((()=>[b(o,{name:"subtract-line",color:p(R)?p(O):p(I)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"]),b(s,{modelValue:p(_),"onUpdate:modelValue":l[2]||(l[2]=(e=null)=>f(_)?_.value=e:null),type:"digit",class:"sn-stepper-inout",borderWidth:"0px",align:"center",borderRadius:p(k),textSize:p(F),cursorColor:p(I),padding:"".concat(p(A),"px 5px"),bgColor:p(M),activeBgColor:p(P),textColor:p(I),disabled:t.disabled,readonly:t.disableInput,onBlur:q,onConfirm:q,style:d(p(L))},null,8,["modelValue","borderRadius","textSize","cursorColor","padding","bgColor","activeBgColor","textColor","disabled","readonly","style"]),b(n,{class:"sn-stepper-action",disabled:p(j),bgColor:p(W),borderRadius:p(k),onClick:l[3]||(l[3]=(e=null)=>$()),onLongpress:l[4]||(l[4]=(e=null)=>E("increase")),onTouchend:D,onTouchcancel:D,style:d(p(J))},{default:u((()=>[b(o,{name:"add-line",color:p(j)?p(O):p(I)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"])])),_:1},8,["style"])}}})),[["__scopeId","data-v-9d0fba67"]]);export{C as _};
