import{a as e,_ as t,c as l}from"./sn-button.CpSyIQkh.js";import{d as a,r as o,c as n,w as s,b as i,e as r,f as u,p as d,u as p,q as m,o as c,g,i as b}from"./index-C41ek1zM.js";import{$ as f,r as x}from"./uni-app.es.DMEFtuWf.js";import{_ as v}from"./sn-input.zz52LGns.js";const y=l(a(Object.assign({name:"sn-stepper"},{__name:"sn-stepper",props:{modelValue:{type:Number,default:0},size:{type:String,default:"30px"},spacing:{type:String,default:"2px"},inputWidth:{type:String,default:"50px"},textSize:{type:String,default:""},textColor:{type:String,default:""},disabledTextColor:{type:String,default:""},inputBgColor:{type:String,default:""},inputActiveBgColor:{type:String,default:""},buttonBgColor:{type:String,default:""},borderRadius:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:NaN},step:{type:Number,default:1},longpress:{type:Boolean,default:!0},disableInput:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},customStyle:{type:Object,default:{}}},emits:["update:modelValue","change"],setup(l,a){var y=a.emit;const C=f.colors,N=f.utils,S=y,B=l,h=o(""),z=o(null),V=o(null),T=n({get:()=>B.modelValue,set:e=>{let t=N.formatNumber(e);S("update:modelValue",t),S("change",t),h.value="".concat(t)}}),_=n((()=>!isNaN(B.max)&&B.modelValue==B.max||B.disabled)),R=n((()=>!isNaN(B.min)&&B.modelValue==B.min||B.disabled)),F=n((()=>{let e=new Map;return e.set("transition-duration",f.configs.aniTime.normal),e})),I=n((()=>""==B.textSize?"".concat(f.utils.getPx(f.configs.font.size(2))+1,"px"):B.textSize)),j=n((()=>""==B.textColor?C.value.text:B.textColor)),w=n((()=>""==B.disabledTextColor?C.value.disabledText:B.disabledTextColor)),A=n((()=>""==B.inputBgColor?C.value.info:B.inputBgColor)),M=n((()=>""==B.inputActiveBgColor?C.value.info:B.inputActiveBgColor)),P=n((()=>""==B.buttonBgColor?C.value.info:B.buttonBgColor)),W=n((()=>""==B.borderRadius?f.configs.radius.small:B.borderRadius)),k=n((()=>(N.getPx(B.size)-N.getPx(I.value))/2)),q=n((()=>{let e=new Map;return e.set("width",B.size),e.set("height",B.size),e.set("padding",""),e.set("transition-duration",f.configs.aniTime.normal),e})),L=n((()=>{let e=new Map;return e.set("width",B.inputWidth),e.set("size",B.size),e.set("flex",""),e.set("margin","0 ".concat(B.spacing)),e}));function O(e){T.value=e}function U(){if(!R.value){let e=parseFloat((B.modelValue-B.step).toFixed(2));O(isNaN(B.min)||e>=B.min?e:B.min)}}function $(){if(!_.value){let e=parseFloat((B.modelValue+B.step).toFixed(2));O(isNaN(B.max)||e<=B.max?e:B.max)}}function D(){let e=0;""!=h.value.trim()?(e="-"==h.value?-1:parseFloat(parseFloat(h.value).toFixed(2)),e=e>B.max?B.max:e<B.min?B.min:e):e=isNaN(B.min)?isNaN(B.max)?0:B.max:B.min,T.value=e}function E(){B.longpress&&!B.disabled&&(null!=z.value&&(clearInterval(z.value),z.value=null),null!=V.value&&(clearInterval(V.value),V.value=null))}function G(e){B.longpress&&!B.disabled&&("decrease"==e&&(V.value=setInterval((()=>{U()}),100)),"increase"==e&&(z.value=setInterval((()=>{$()}),100)))}return s(T,(e=>{e=N.formatNumber(e),!isNaN(B.max)&&e>B.max&&O(B.max),!isNaN(B.min)&&e<B.min&&O(B.min),h.value=e.toString()}),{immediate:!0}),(a=null,o=null)=>{const n=x(i("sn-icon"),e),s=x(i("sn-button"),t),f=x(i("sn-input"),v),y=m;return c(),r(y,{class:"sn-stepper",style:d([p(F),l.customStyle])},{default:u((()=>[g(s,{class:"sn-stepper-action",disabled:p(R),bgColor:p(P),borderRadius:p(W),onClick:o[0]||(o[0]=(e=null)=>U()),onLongpress:o[1]||(o[1]=(e=null)=>G("decrease")),onTouchend:E,onTouchcancel:E,style:d(p(q))},{default:u((()=>[g(n,{name:"subtract-line",color:p(R)?p(w):p(j)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"]),g(f,{modelValue:p(h),"onUpdate:modelValue":o[2]||(o[2]=(e=null)=>b(h)?h.value=e:null),type:"digit",class:"sn-stepper-inout",borderWidth:"0px",align:"center",font:"misans-semibold",borderRadius:p(W),textSize:p(I),cursorColor:p(j),padding:"".concat(p(k),"px 5px"),bgColor:p(A),activeBgColor:p(M),textColor:p(j),disabled:l.disabled,readonly:l.disableInput,onBlur:D,onConfirm:D,style:d(p(L))},null,8,["modelValue","borderRadius","textSize","cursorColor","padding","bgColor","activeBgColor","textColor","disabled","readonly","style"]),g(s,{class:"sn-stepper-action",disabled:p(_),bgColor:p(P),borderRadius:p(W),onClick:o[3]||(o[3]=(e=null)=>$()),onLongpress:o[4]||(o[4]=(e=null)=>G("increase")),onTouchend:E,onTouchcancel:E,style:d(p(q))},{default:u((()=>[g(n,{name:"add-line",color:p(_)?p(w):p(j)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"])])),_:1},8,["style"])}}})),[["__scopeId","data-v-7f363318"]]);export{y as _};
