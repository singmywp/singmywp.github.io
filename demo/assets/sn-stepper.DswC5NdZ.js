import{a as e,_ as t,c as l}from"./sn-button.DCeBN0oM.js";import{d as a,$ as o,r as n,c as s,w as i,a as r,b as u,e as d,q as p,u as c,z as m,j as g,o as b,f,i as x}from"./index-BDGnenFq.js";import{r as v}from"./uni-app.es.BfR9KIrQ.js";import{_ as y}from"./sn-input.CQs-BOzL.js";const C=l(a(Object.assign({name:"sn-stepper"},{__name:"sn-stepper",props:{modelValue:{type:Number,default:0},size:{type:String,default:"30px"},spacing:{type:String,default:"2px"},inputWidth:{type:String,default:"50px"},textSize:{type:String,default:""},textColor:{type:String,default:""},disabledTextColor:{type:String,default:""},inputBgColor:{type:String,default:""},inputActiveBgColor:{type:String,default:""},buttonBgColor:{type:String,default:""},borderRadius:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:NaN},step:{type:Number,default:1},longpress:{type:Boolean,default:!0},disableInput:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["update:modelValue","change"],setup(l,a){var C=a.emit;const N=o.colors,S=o.utils,h=C,z=l,B=n(""),V=n(null),T=n(null),_=s({get:()=>z.modelValue,set:e=>{let t=S.formatNumber(e);h("update:modelValue",t),h("change",t),B.value="".concat(t)}}),j=s((()=>!isNaN(z.max)&&z.modelValue==z.max||z.disabled)),R=s((()=>!isNaN(z.min)&&z.modelValue==z.min||z.disabled)),w=s((()=>{let e=new Map;return e.set("transition-duration",o.configs.aniTime.normal),e})),F=s((()=>m("color",z.textSize,"".concat(o.utils.getPx(o.configs.font.size(2))+1,"px")))),I=s((()=>m("color",z.textColor,N.value.text))),O=s((()=>m("color",z.disabledTextColor,N.value.disabledText))),M=s((()=>m("color",z.inputBgColor,N.value.info))),P=s((()=>m("color",z.inputActiveBgColor,N.value.info))),W=s((()=>m("color",z.buttonBgColor,N.value.info))),k=s((()=>m("radius",z.borderRadius,o.configs.radius.small))),A=s((()=>(S.getPx(z.size)-S.getPx(F.value))/2)),J=s((()=>{let e=new Map;return e.set("width",z.size),e.set("height",z.size),e.set("padding",""),e.set("transition-duration",o.configs.aniTime.normal),e})),L=s((()=>{let e=new Map;return e.set("width",z.inputWidth),e.set("size",z.size),e.set("flex",""),e.set("margin","0 ".concat(z.spacing)),e}));function U(e){_.value=e}function q(){if(!R.value){let e=parseFloat((z.modelValue-z.step).toFixed(2));U(isNaN(z.min)||e>=z.min?e:z.min)}}function $(){if(!j.value){let e=parseFloat((z.modelValue+z.step).toFixed(2));U(isNaN(z.max)||e<=z.max?e:z.max)}}function D(){let e=0;""!=B.value.trim()?(e="-"==B.value?-1:parseFloat(parseFloat(B.value).toFixed(2)),e=e>z.max?z.max:e<z.min?z.min:e):e=isNaN(z.min)?isNaN(z.max)?0:z.max:z.min,_.value=e}function E(){z.longpress&&!z.disabled&&(null!=V.value&&(clearInterval(V.value),V.value=null),null!=T.value&&(clearInterval(T.value),T.value=null))}function G(e){z.longpress&&!z.disabled&&("decrease"==e&&(T.value=setInterval((()=>{q()}),100)),"increase"==e&&(V.value=setInterval((()=>{$()}),100)))}return i(_,(e=>{e=S.formatNumber(e),!isNaN(z.max)&&e>z.max&&U(z.max),!isNaN(z.min)&&e<z.min&&U(z.min),B.value=e.toString()}),{immediate:!0}),(a=null,o=null)=>{const n=v(r("sn-icon"),e),s=v(r("sn-button"),t),i=v(r("sn-input"),y),m=g;return b(),u(m,{class:"sn-stepper",style:p([c(w),l.customStyle])},{default:d((()=>[f(s,{class:"sn-stepper-action",disabled:c(R),bgColor:c(W),borderRadius:c(k),onClick:o[0]||(o[0]=(e=null)=>q()),onLongpress:o[1]||(o[1]=(e=null)=>G("decrease")),onTouchend:E,onTouchcancel:E,style:p(c(J))},{default:d((()=>[f(n,{name:"subtract-line",color:c(R)?c(O):c(I)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"]),f(i,{modelValue:c(B),"onUpdate:modelValue":o[2]||(o[2]=(e=null)=>x(B)?B.value=e:null),type:"digit",class:"sn-stepper-inout",borderWidth:"0px",align:"center",font:"misans-semibold",borderRadius:c(k),textSize:c(F),cursorColor:c(I),padding:"".concat(c(A),"px 5px"),bgColor:c(M),activeBgColor:c(P),textColor:c(I),disabled:l.disabled,readonly:l.disableInput,onBlur:D,onConfirm:D,style:p(c(L))},null,8,["modelValue","borderRadius","textSize","cursorColor","padding","bgColor","activeBgColor","textColor","disabled","readonly","style"]),f(s,{class:"sn-stepper-action",disabled:c(j),bgColor:c(W),borderRadius:c(k),onClick:o[3]||(o[3]=(e=null)=>$()),onLongpress:o[4]||(o[4]=(e=null)=>G("increase")),onTouchend:E,onTouchcancel:E,style:p(c(J))},{default:d((()=>[f(n,{name:"add-line",color:c(j)?c(O):c(I)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"])])),_:1},8,["style"])}}})),[["__scopeId","data-v-81205f8e"]]);export{C as _};
