import{a as e,_ as t,c as l}from"./sn-button.CJ0ZsVkl.js";import{d as a,r as o,c as n,w as s,b as i,e as u,f as r,m as d,u as m,p,o as c,g as b,i as g}from"./index-D82xabMX.js";import{$ as x,r as f}from"./uni-app.es.Cv0ss-rw.js";import{_ as v}from"./sn-input.OLyd3D9e.js";const y=l(a(Object.assign({name:"sn-stepper"},{__name:"sn-stepper",props:{modelValue:{type:Number,default:0},size:{type:String,default:"30px"},spacing:{type:String,default:"2px"},inputWidth:{type:String,default:"50px"},textSize:{type:String,default:""},textColor:{type:String,default:""},disabledTextColor:{type:String,default:""},inputBgColor:{type:String,default:""},inputActiveBgColor:{type:String,default:""},buttonBgColor:{type:String,default:""},borderRadius:{type:String,default:""},min:{type:Number,default:0},max:{type:Number,default:NaN},step:{type:Number,default:1},longpress:{type:Boolean,default:!0},disableInput:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},customStyle:{type:Object,default:{}}},emits:["update:modelValue","change"],setup(l,a){var y=a.emit;const C=x.colors,N=x.utils,S=y,B=l,h=o(""),z=o(null),V=o(null),T=n({get:()=>B.modelValue,set:e=>{let t=N.formatNumber(e);S("update:modelValue",t),S("change",t),h.value="".concat(t)}}),_=n((()=>!isNaN(B.max)&&B.modelValue==B.max||B.disabled)),R=n((()=>!isNaN(B.min)&&B.modelValue==B.min||B.disabled)),F=n((()=>{let e=new Map;return e.set("transition-duration",x.configs.aniTime.normal),e})),I=n((()=>""==B.textSize?"".concat(x.utils.getPx(x.configs.font.size(2))+1,"px"):B.textSize)),j=n((()=>""==B.textColor?C.value.text:B.textColor)),w=n((()=>""==B.disabledTextColor?C.value.disabledText:B.disabledTextColor)),A=n((()=>""==B.inputBgColor?C.value.info:B.inputBgColor)),M=n((()=>""==B.inputActiveBgColor?C.value.info:B.inputActiveBgColor)),P=n((()=>""==B.buttonBgColor?C.value.info:B.buttonBgColor)),W=n((()=>""==B.borderRadius?x.configs.radius.small:B.borderRadius)),k=n((()=>(N.getPx(B.size)-N.getPx(I.value))/2)),L=n((()=>{let e=new Map;return e.set("width",B.size),e.set("height",B.size),e.set("padding",""),e.set("transition-duration",x.configs.aniTime.normal),e})),O=n((()=>{let e=new Map;return e.set("width",B.inputWidth),e.set("size",B.size),e.set("flex",""),e.set("margin","0 ".concat(B.spacing)),e}));function U(e){T.value=e}function $(){if(!R.value){let e=parseFloat((B.modelValue-B.step).toFixed(2));U(isNaN(B.min)||e>=B.min?e:B.min)}}function q(){if(!_.value){let e=parseFloat((B.modelValue+B.step).toFixed(2));U(isNaN(B.max)||e<=B.max?e:B.max)}}function D(){let e=0;""!=h.value.trim()?(e="-"==h.value?-1:parseFloat(parseFloat(h.value).toFixed(2)),e=e>B.max?B.max:e<B.min?B.min:e):e=isNaN(B.min)?isNaN(B.max)?0:B.max:B.min,T.value=e}function E(){B.longpress&&!B.disabled&&(null!=z.value&&(clearInterval(z.value),z.value=null),null!=V.value&&(clearInterval(V.value),V.value=null))}function G(e){B.longpress&&!B.disabled&&("decrease"==e&&(V.value=setInterval((()=>{$()}),100)),"increase"==e&&(z.value=setInterval((()=>{q()}),100)))}return s(T,(e=>{e=N.formatNumber(e),!isNaN(B.max)&&e>B.max&&U(B.max),!isNaN(B.min)&&e<B.min&&U(B.min),h.value=e.toString()}),{immediate:!0}),(a=null,o=null)=>{const n=f(i("sn-icon"),e),s=f(i("sn-button"),t),x=f(i("sn-input"),v),y=p;return c(),u(y,{class:"sn-number-box",style:d([m(F),l.customStyle])},{default:r((()=>[b(s,{class:"sn-number-box-action",disabled:m(R),bgColor:m(P),borderRadius:m(W),onClick:o[0]||(o[0]=(e=null)=>$()),onLongpress:o[1]||(o[1]=(e=null)=>G("decrease")),onTouchend:E,onTouchcancel:E,style:d(m(L))},{default:r((()=>[b(n,{name:"subtract-line",color:m(R)?m(w):m(j)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"]),b(x,{modelValue:m(h),"onUpdate:modelValue":o[2]||(o[2]=(e=null)=>g(h)?h.value=e:null),type:"digit",class:"sn-number-box-inout",borderWidth:"0px",align:"center",font:"misans-semibold",borderRadius:m(W),textSize:m(I),cursorColor:m(j),padding:"".concat(m(k),"px 5px"),bgColor:m(A),activeBgColor:m(M),textColor:m(j),disabled:l.disabled,readonly:l.disableInput,onBlur:D,onConfirm:D,style:d(m(O))},null,8,["modelValue","borderRadius","textSize","cursorColor","padding","bgColor","activeBgColor","textColor","disabled","readonly","style"]),b(s,{class:"sn-number-box-action",disabled:m(_),bgColor:m(P),borderRadius:m(W),onClick:o[3]||(o[3]=(e=null)=>q()),onLongpress:o[4]||(o[4]=(e=null)=>G("increase")),onTouchend:E,onTouchcancel:E,style:d(m(L))},{default:r((()=>[b(n,{name:"add-line",color:m(_)?m(w):m(j)},null,8,["color"])])),_:1},8,["disabled","bgColor","borderRadius","style"])])),_:1},8,["style"])}}})),[["__scopeId","data-v-3199b76e"]]);export{y as _};
