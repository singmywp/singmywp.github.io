import{d as e,$ as t,r as l,c as a,w as i,l as o,m as n,a as s,b as u,e as r,q as d,u as g,y as c,j as f,o as v,f as m,B as b,g as p,h,F as x,G as y,p as C}from"./index-DoInGK9X.js";import{b as S,c as w}from"./sn-button.B1LvAG78.js";import{r as _}from"./uni-app.es.K1mZmM8s.js";import{_ as j}from"./sn-badge.DtCZwnqZ.js";import{u as T}from"./useResize.Dia-r-oM.js";const O=w(e(Object.assign({name:"sn-tabs"},{__name:"sn-tabs",props:{modelValue:{type:Number,default:0},scrollable:{type:Boolean,default:!1},data:{type:Array,default:[]},width:{type:String,default:"100%"},height:{type:String,default:"40px"},bgColor:{type:String,default:""},textColor:{type:String,default:""},textSize:{type:String,default:""},disabledTextColor:{type:String,default:""},activeTextColor:{type:String,default:""},itemPadding:{type:String,default:"12px"},lineColor:{type:String,default:""},lineWidth:{type:String,default:""},lineHeight:{type:String,default:"2px"},customItemStyle:{type:Object,default:new UTSJSONObject({})},customTextStyle:{type:Object,default:new UTSJSONObject({})},customActiveItemStyle:{type:Object,default:new UTSJSONObject({})},customStyle:{type:Object,default:new UTSJSONObject({})}},emits:["change","update:modelValue"],setup(e,w){var O=w.emit;const k=t.utils,z=t.colors,B=O,M=e,A=l(null),R=l(null),E=l(null),P=l(null),I=l(null),N=l(0),V=l(0),J=l(0),U=l(0),H=l(""),W=a({get:()=>M.modelValue,set:e=>{B("update:modelValue",e)}}),Z=a((()=>c("color",M.bgColor,z.value.front))),$=a((()=>c("color",M.textColor,z.value.title))),G=a((()=>c("font",M.textSize,t.configs.font.size(2)))),q=a((()=>c("color",M.activeTextColor,z.value.primary))),F=a((()=>c("color",M.disabledTextColor,z.value.disabledText))),X=a((()=>c("color",M.lineColor,z.value.primary))),D=a((()=>{let e=new Map;return e.set("width",M.width),e.set("height",M.height),e.set("background",Z.value),e.set("border-radius",t.configs.radius.normal),e.set("transition-duration",t.configs.aniTime.normal),e})),K=a((()=>{let e=new Map,l=k.getPx(M.itemPadding.split(" ")[0]);return M.scrollable?(e.set("padding-left","".concat(l,"px")),e.set("padding-right","".concat(l,"px"))):e.set("flex","1"),e.set("transition-duration",t.configs.aniTime.normal),e})),L=a((()=>{let e=new Map;return e.set("transform","translateX(".concat(N.value,"px")),e.set("width","".concat(V.value,"px")),e.set("height",M.lineHeight),e.set("bottom","".concat(k.getPx(M.lineHeight),"px")),e.set("background",X.value),e.set("border-radius",t.configs.radius.circle),e.set("transition-duration",t.configs.aniTime.normal),e}));function Q(e){var t,l,a,i,o,n;if(0==M.data.length)return null;let s=M.data[e].id,u=0,r=0,d=!1;I.value.forEach(((e,t)=>{let l=e.getBoundingClientRect().width;u+=l,s==e.getAttribute("id")?d=!0:d||(r+=l)})),J.value=u;let g=I.value[W.value].getBoundingClientRect().width,c=""==M.lineWidth?.7*g:k.getPx(M.lineWidth);r+=(g-c)/2,V.value=c,N.value=r;let f=I.value[W.value].getBoundingClientRect(),v=R.value.getBoundingClientRect(),m=v.left-(null!==(a=null===(l=null===(t=E.value)||void 0===t?void 0:t.getBoundingClientRect())||void 0===l?void 0:l.width)&&void 0!==a?a:0),b=v.right-(null!==(n=null===(o=null===(i=P.value)||void 0===i?void 0:i.getBoundingClientRect())||void 0===o?void 0:o.width)&&void 0!==n?n:0),p="";if(m<=f.left){p=I.value[Math.max(0,W.value-2)].getAttribute("id")}else if(b<=f.right){p=I.value[Math.min(I.value.length-1,W.value+2)].getAttribute("id")}else{p=I.value[Math.max(0,W.value-2)].getAttribute("id")}H.value=p}return i((()=>M.modelValue),((e,t)=>{var l;if(e==W.value)return null;(e>=M.data.length||e<0||null!==(l=M.data[e].disabled)&&void 0!==l&&l)&&(W.value=t),B("change",e),Q(e)})),o((()=>{function e(){M.data.length>0&&Q(Math.min(M.data.length-1,Math.max(0,W.value)))}U.value=W.value,n((()=>{e()})),T(A.value,(()=>{e()}))})),(t=null,l=null)=>{const a=f,i=_(s("sn-text"),S),o=_(s("sn-badge"),j),c=y;return v(),u(a,{class:"sn-tabs",ref_key:"containEle",ref:A,style:d([g(D),e.customStyle])},{default:r((()=>[m(a,{ref_key:"leftEle",ref:E},{default:r((()=>[b(t.$slots,"left",{},void 0,!0)])),_:3},512),m(c,{class:"sn-tabs-scroll",ref_key:"scrollEle",ref:R,"show-scrollbar":!1,direction:e.scrollable?"horizontal":"none","scroll-into-view":g(H),"scroll-with-animation":!0},{default:r((()=>[(v(!0),p(x,null,h(e.data,((t,l)=>{var s;return v(),u(a,{class:C(["sn-tabs-item",null!==(s=t.disabled)&&void 0!==s&&s?"disabled":""]),ref_for:!0,ref_key:"itemsEle",ref:I,key:l,id:t.id,onClick:(e=null)=>function(e,t){var l;if(null!==(l=e.disabled)&&void 0!==l&&l)return null;W.value=t,B("change",t),Q(t),n((()=>{Q(t)}))}(t,l),style:d(l==g(W)?[g(K),e.customItemStyle]:[g(K),e.customActiveItemStyle])},{default:r((()=>{var a,n,s,c,f,b,p,h,x,y;return[null==t.badgeConfig?(v(),u(i,{key:0,class:"sn-tabs-item-text",align:"center",text:t.text,size:g(G),color:null!==(a=t.disabled)&&void 0!==a&&a?g(F):l==g(W)?g(q):g($)},null,8,["text","size","color"])):(v(),u(o,{key:1,value:null!==(n=t.badgeConfig.value)&&void 0!==n?n:0,max:null!==(s=t.badgeConfig.max)&&void 0!==s?s:-1,size:null!==(c=t.badgeConfig.size)&&void 0!==c?c:"",offset:null!==(f=t.badgeConfig.offset)&&void 0!==f?f:"translate(15px, -5px)",mode:null!==(b=t.badgeConfig.mode)&&void 0!==b?b:"number",text:null!==(p=t.badgeConfig.text)&&void 0!==p?p:"",showZero:null!==(h=t.badgeConfig.showZero)&&void 0!==h&&h,textColor:null!==(x=t.badgeConfig.textColor)&&void 0!==x?x:"",bgColor:null!==(y=t.badgeConfig.bgColor)&&void 0!==y?y:""},{default:r((()=>{var a;return[m(i,{class:"sn-tabs-item-text",align:"center",text:t.text,size:g(G),color:null!==(a=t.disabled)&&void 0!==a&&a?g(F):l==g(W)?g(q):g($),style:d([e.customTextStyle])},null,8,["text","size","color","style"])]})),_:2},1032,["value","max","size","offset","mode","text","showZero","textColor","bgColor"]))]})),_:2},1032,["class","id","onClick","style"])})),128)),m(a,{class:"sn-tabs-line",style:d(g(L))},null,8,["style"])])),_:1},8,["direction","scroll-into-view"]),m(a,{ref_key:"rightEle",ref:P},{default:r((()=>[b(t.$slots,"right",{},void 0,!0)])),_:3},512)])),_:3},8,["style"])}}})),[["__scopeId","data-v-0d438ead"]]);export{O as _};
