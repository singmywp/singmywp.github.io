import{d as e,R as t,$ as l,T as a,r as i,c as u,w as n,o,n as s,am as d,a as r,e as v,f as g,u as c,p as f,x as m,_ as b,b as p,g as x,z as h,h as y,j as C,F as S,E as w,m as T}from"./index-DYMgrqHp.js";import{a as O,b as _}from"./sn-text.euomPoe8.js";import{r as j}from"./uni-app.es.DgDfNdgy.js";import{_ as z}from"./sn-badge.CniK0gFP.js";import{u as R}from"./useResize.Cfi37DcV.js";const k=_(e(Object.assign({name:"sn-tabs"},{__name:"sn-tabs",props:t(new UTSJSONObject({scrollable:{type:Boolean,default:!1},data:{type:Array,default:[]},mode:{type:String,default:"swipe"},width:{type:String,default:"100%"},height:{type:String,default:"40px"},bgColor:{type:String,default:""},textColor:{type:String,default:""},textSize:{type:String,default:""},borderRadius:{type:String,default:""},disabledTextColor:{type:String,default:""},activeTextColor:{type:String,default:""},itemPadding:{type:String,default:"12px"},lineColor:{type:String,default:""},lineWidth:{type:String,default:""},lineHeight:{type:String,default:"2px"},aniTime:{type:String,default:""},customItemStyle:{type:Object,default:new UTSJSONObject({})},customTextStyle:{type:Object,default:new UTSJSONObject({})},customActiveItemStyle:{type:Object,default:new UTSJSONObject({})},customStyle:{type:Object,default:new UTSJSONObject({})}}),new UTSJSONObject({modelValue:{type:Number,default:0},modelModifiers:{}})),emits:t(["change"],["update:modelValue"]),setup(e,t){var _=t.emit;const k=l.utils,B=l.colors,N=_,I=a(e,"modelValue"),A=e,E=k.randomComId(),J=i(null),M=i(null),U=i(null),P=i(null),$=i([]),V=i(0),Z=i(0),H=i(0),W=i(20),F=i(0),Y=i(""),q=u((()=>m("color",A.bgColor,B.value.front))),D=u((()=>["swipe","push"].includes(A.mode)?A.mode:"swipe")),G=u((()=>m("other",A.width,"100%"))),K=u((()=>m("other",A.height,"40px"))),L=u((()=>m("radius",A.borderRadius,l.configs.radius.normal))),Q=u((()=>m("color",A.textColor,B.value.title))),X=u((()=>m("font",A.textSize,l.configs.font.size(2)))),ee=u((()=>m("color",A.activeTextColor,B.value.primary))),te=u((()=>m("other",A.itemPadding,"12px"))),le=u((()=>m("color",A.disabledTextColor,B.value.disabledText))),ae=u((()=>m("color",A.lineColor,B.value.primary))),ie=u((()=>m("other",A.lineHeight,"2px"))),ue=u((()=>m("aniTime",A.aniTime,l.configs.aniTime.long))),ne=u((()=>{let e=new Map;return e.set("background",q.value),e.set("width",G.value),e.set("height",K.value),e.set("background",q.value),e.set("border-radius",L.value),e.set("transition-duration",ue.value),e})),oe=u((()=>{let e=new Map;return e.set("left","".concat(H.value,"px")),e.set("width","".concat(W.value,"px")),e.set("height",ie.value),e.set("border-radius",l.configs.radius.circle),e.set("background",ae.value),e.set("transition-duration",ue.value),e})),se=u((()=>{const e=new Map;let t=k.getPx(te.value.split(" ")[0]);return A.scrollable?(e.set("padding-left","".concat(t,"px")),e.set("padding-right","".concat(t,"px"))):e.set("flex","1"),e.set("transition-duration",l.configs.aniTime.normal),e}));function de(e){if(0==$.value.length)return null;let t=0,l=0,a=!1;P.value.forEach(((i,u)=>{let n=i.getBoundingClientRect().width;t+=n,e==i.getAttribute("id")?a=!0:a||(l+=n)})),F.value=t;let i=P.value[V.value].getBoundingClientRect().width,u=k.getPx(A.lineWidth),n=0==u||isNaN(u)?.6*i:u;l+=(i-n)/2;const o=parseInt(ue.value);if("swipe"==D.value)W.value=n,H.value=l;else if("push"==D.value){let e=0;P.value.forEach(((t,l)=>{Z.value<V.value?l>=Z.value&&l<=V.value&&(e+=.7*t.getBoundingClientRect().width):l<=Z.value&&l>=V.value&&(e+=.7*t.getBoundingClientRect().width)})),W.value=e,Z.value>V.value?(H.value=l,setTimeout((()=>{W.value=n}),o-10)):setTimeout((()=>{W.value=n,H.value=l}),o-10)}!function(){var e,t,l,a,i,u;let n=P.value[V.value].getBoundingClientRect(),o=J.value.getBoundingClientRect().left-(null!==(l=null===(t=null===(e=M.value)||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.width)&&void 0!==l?l:0),s=J.value.getBoundingClientRect().right-(null!==(u=null===(i=null===(a=U.value)||void 0===a?void 0:a.getBoundingClientRect())||void 0===i?void 0:i.width)&&void 0!==u?u:0);if(o<=n.left){let e=Math.max(0,V.value-1);Y.value=P.value[e].getAttribute("id")}else if(s<=n.right){let e=Math.min(P.value.length-1,V.value+1);Y.value=P.value[e].getAttribute("id")}else{let e=Math.max(0,V.value-1);Y.value=P.value[e].getAttribute("id")}}()}return n(I,(()=>{if(I.value==V.value)return null;Z.value=V.value,V.value=I.value,N("change",V.value),de($.value[V.value].id)})),n((()=>A.data),(()=>{$.value=A.data}),{immediate:!0,deep:!0}),o((()=>{Z.value=V.value,V.value=I.value,s((()=>{let e=$.value.findIndex((e=>$.value.indexOf(e)==V.value));if(-1==e)return null;de($.value[e].id)})),R(d(E),(()=>{if(0==$.value.length)return null;de($.value[V.value].id)}))})),(t=null,l=null)=>{const a=b,i=j(r("sn-text"),O),u=j(r("sn-badge"),z),n=w;return p(),v(a,{class:"sn-tabs",id:c(E),style:f([c(ne),e.customStyle])},{default:g((()=>[x(a,{ref_key:"leftEle",ref:M},{default:g((()=>[h(t.$slots,"left",{},void 0,!0)])),_:3},512),x(n,{ref_key:"scrollEle",ref:J,class:"sn-tabs-scroll",direction:"horizontal","scroll-into-view":c(Y),"scroll-with-animation":!0,"show-scrollbar":!1},{default:g((()=>[(p(!0),y(S,null,C(e.data,((t,l)=>{var n;return p(),v(a,{class:T(["sn-tabs-item",null!==(n=t.disabled)&&void 0!==n&&n?"disabled":""]),ref_for:!0,ref_key:"itemEles",ref:P,key:l,id:t.id,onClick:(e=null)=>function(e,t){return 1==e.disabled||t==V.value?null:void(I.value=t)}(t,l),style:f(l==I.value?[c(se),e.customItemStyle]:[c(se),e.customActiveItemStyle])},{default:g((()=>{var a,n,o,s,d,r,m,b,h,y;return[null==t.badgeConfig?(p(),v(i,{key:0,class:"sn-tabs-item-text",align:"center",text:t.text,size:c(X),color:null!==(a=t.disabled)&&void 0!==a&&a?c(le):l==I.value?c(ee):c(Q)},null,8,["text","size","color"])):(p(),v(u,{key:1,value:null!==(n=t.badgeConfig.value)&&void 0!==n?n:0,max:null!==(o=t.badgeConfig.max)&&void 0!==o?o:-1,size:null!==(s=t.badgeConfig.size)&&void 0!==s?s:"",offset:null!==(d=t.badgeConfig.offset)&&void 0!==d?d:"translate(15px, -5px)",mode:null!==(r=t.badgeConfig.mode)&&void 0!==r?r:"number",text:null!==(m=t.badgeConfig.text)&&void 0!==m?m:"",showZero:null!==(b=t.badgeConfig.showZero)&&void 0!==b&&b,textColor:null!==(h=t.badgeConfig.textColor)&&void 0!==h?h:"",bgColor:null!==(y=t.badgeConfig.bgColor)&&void 0!==y?y:""},{default:g((()=>{var a;return[x(i,{class:"sn-tabs-item-text",align:"center",text:t.text,size:c(X),color:null!==(a=t.disabled)&&void 0!==a&&a?c(le):l==I.value?c(ee):c(Q),style:f([e.customTextStyle])},null,8,["text","size","color","style"])]})),_:2},1032,["value","max","size","offset","mode","text","showZero","textColor","bgColor"]))]})),_:2},1032,["class","id","onClick","style"])})),128)),x(a,{class:"sn-tabs-line",style:f([c(oe)])},null,8,["style"])])),_:1},8,["scroll-into-view"]),x(a,{ref_key:"rightEle",ref:U},{default:g((()=>[h(t.$slots,"right",{},void 0,!0)])),_:3},512)])),_:3},8,["id","style"])}}})),[["__scopeId","data-v-1db4264e"]]);export{k as _};
